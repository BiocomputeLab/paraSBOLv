<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 7.4.0" />
    <title>parasbolv.parasbolv API documentation</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2264%22%20height%3D%2264%22%20viewBox%3D%2244.5%202.5%2015%2015%22%3E%3Cpath%20d%3D%22M49.351%2021.041c-.233-.721-.546-2.408-.772-4.076-.042-.09-.067-.187-.046-.288-.166-1.347-.277-2.625-.241-3.351-1.378-1.008-2.271-2.586-2.271-4.362%200-.976.272-1.935.788-2.774.057-.094.122-.18.184-.268-.033-.167-.052-.339-.052-.516%200-1.477%201.202-2.679%202.679-2.679.791%200%201.496.352%201.987.9a6.3%206.3%200%200%201%201.001.029c.492-.564%201.207-.929%202.012-.929%201.477%200%202.679%201.202%202.679%202.679a2.65%202.65%200%200%201-.269%201.148c.383.747.595%201.572.595%202.41%200%202.311-1.507%204.29-3.635%205.107.037.699.147%202.27.423%203.294l.137.461c.156%202.136-4.612%205.166-5.199%203.215zm.127-4.919a4.78%204.78%200%200%200%20.775-.584c-.172-.115-.505-.254-.88-.378zm.331%202.302l.828-.502c-.202-.143-.576-.328-.984-.49zm.45%202.157l.701-.403c-.214-.115-.536-.249-.891-.376l.19.779zM49.13%204.141c0%20.152.123.276.276.276s.275-.124.275-.276-.123-.276-.276-.276-.275.124-.275.276zm.735-.389a1.15%201.15%200%200%201%20.314.783%201.16%201.16%200%200%201-1.162%201.162c-.457%200-.842-.27-1.032-.653-.026.117-.042.238-.042.362a1.68%201.68%200%200%200%201.679%201.679%201.68%201.68%200%200%200%201.679-1.679c0-.843-.626-1.535-1.436-1.654zm3.076%201.654a1.68%201.68%200%200%200%201.679%201.679%201.68%201.68%200%200%200%201.679-1.679c0-.037-.009-.072-.011-.109-.21.3-.541.508-.935.508a1.16%201.16%200%200%201-1.162-1.162%201.14%201.14%200%200%201%20.474-.912c-.015%200-.03-.005-.045-.005-.926.001-1.679.754-1.679%201.68zm1.861-1.265c0%20.152.123.276.276.276s.275-.124.275-.276-.123-.276-.276-.276-.275.124-.275.276zm1.823%204.823c0-.52-.103-1.035-.288-1.52-.466.394-1.06.64-1.717.64-1.144%200-2.116-.725-2.499-1.738-.383%201.012-1.355%201.738-2.499%201.738-.867%200-1.631-.421-2.121-1.062-.307.605-.478%201.267-.478%201.942%200%202.486%202.153%204.51%204.801%204.51s4.801-2.023%204.801-4.51zm-3.032%209.156l-.146-.492c-.276-1.02-.395-2.457-.444-3.268a6.11%206.11%200%200%201-1.18.115%206.01%206.01%200%200%201-2.536-.562l.006.175c.802.215%201.848.612%202.021%201.25.079.295-.021.601-.274.837l-.598.501c.667.304%201.243.698%201.311%201.179.02.144.022.507-.393.787l-.564.365c1.285.521%201.361.96%201.381%201.126.018.142.011.496-.427.746l-.854.489c.064-1.19%201.985-2.585%202.697-3.248zM49.34%209.925c0-.667%201-.667%201%200%200%20.653.818%201.205%201.787%201.205s1.787-.552%201.787-1.205c0-.667%201-.667%201%200%200%201.216-1.25%202.205-2.787%202.205s-2.787-.989-2.787-2.205zm-.887-7.633c-.093.077-.205.114-.317.114a.5.5%200%200%201-.318-.886L49.183.397a.5.5%200%200%201%20.703.068.5.5%200%200%201-.069.703zm7.661-.065c-.086%200-.173-.022-.253-.068l-1.523-.893c-.575-.337-.069-1.2.506-.863l1.523.892a.5.5%200%200%201%20.179.685c-.094.158-.261.247-.432.247z%22%20fill%3D%22%233bb300%22/%3E%3C/svg%3E"/>


<style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
<style>/*! pygments syntax highlighting */pre{line-height:125%;}td.linenos pre{color:#000000; background-color:#f0f0f0; padding-left:5px; padding-right:5px;}span.linenos{color:#000000; background-color:#f0f0f0; padding-left:5px; padding-right:5px;}td.linenos pre.special{color:#000000; background-color:#ffffc0; padding-left:5px; padding-right:5px;}span.linenos.special{color:#000000; background-color:#ffffc0; padding-left:5px; padding-right:5px;}.pdoc .hll{background-color:#ffffcc}.pdoc{background:#f8f8f8;}.pdoc .c{color:#408080; font-style:italic}.pdoc .err{border:1px solid #FF0000}.pdoc .k{color:#008000; font-weight:bold}.pdoc .o{color:#666666}.pdoc .ch{color:#408080; font-style:italic}.pdoc .cm{color:#408080; font-style:italic}.pdoc .cp{color:#BC7A00}.pdoc .cpf{color:#408080; font-style:italic}.pdoc .c1{color:#408080; font-style:italic}.pdoc .cs{color:#408080; font-style:italic}.pdoc .gd{color:#A00000}.pdoc .ge{font-style:italic}.pdoc .gr{color:#FF0000}.pdoc .gh{color:#000080; font-weight:bold}.pdoc .gi{color:#00A000}.pdoc .go{color:#888888}.pdoc .gp{color:#000080; font-weight:bold}.pdoc .gs{font-weight:bold}.pdoc .gu{color:#800080; font-weight:bold}.pdoc .gt{color:#0044DD}.pdoc .kc{color:#008000; font-weight:bold}.pdoc .kd{color:#008000; font-weight:bold}.pdoc .kn{color:#008000; font-weight:bold}.pdoc .kp{color:#008000}.pdoc .kr{color:#008000; font-weight:bold}.pdoc .kt{color:#B00040}.pdoc .m{color:#666666}.pdoc .s{color:#BA2121}.pdoc .na{color:#7D9029}.pdoc .nb{color:#008000}.pdoc .nc{color:#0000FF; font-weight:bold}.pdoc .no{color:#880000}.pdoc .nd{color:#AA22FF}.pdoc .ni{color:#999999; font-weight:bold}.pdoc .ne{color:#D2413A; font-weight:bold}.pdoc .nf{color:#0000FF}.pdoc .nl{color:#A0A000}.pdoc .nn{color:#0000FF; font-weight:bold}.pdoc .nt{color:#008000; font-weight:bold}.pdoc .nv{color:#19177C}.pdoc .ow{color:#AA22FF; font-weight:bold}.pdoc .w{color:#bbbbbb}.pdoc .mb{color:#666666}.pdoc .mf{color:#666666}.pdoc .mh{color:#666666}.pdoc .mi{color:#666666}.pdoc .mo{color:#666666}.pdoc .sa{color:#BA2121}.pdoc .sb{color:#BA2121}.pdoc .sc{color:#BA2121}.pdoc .dl{color:#BA2121}.pdoc .sd{color:#BA2121; font-style:italic}.pdoc .s2{color:#BA2121}.pdoc .se{color:#BB6622; font-weight:bold}.pdoc .sh{color:#BA2121}.pdoc .si{color:#BB6688; font-weight:bold}.pdoc .sx{color:#008000}.pdoc .sr{color:#BB6688}.pdoc .s1{color:#BA2121}.pdoc .ss{color:#19177C}.pdoc .bp{color:#008000}.pdoc .fm{color:#0000FF}.pdoc .vc{color:#19177C}.pdoc .vg{color:#19177C}.pdoc .vi{color:#19177C}.pdoc .vm{color:#19177C}.pdoc .il{color:#666666}</style>
<style>/*! pdoc */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f7f7f7;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}body{background-color:var(--pdoc-background);}html, body{width:100%;height:100%;}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}.git-button{display:none !important;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}#navtoggle{display:none;}}#togglestate{display:none;}nav.pdoc{--pad:1.75rem;--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent }nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc li{display:block;margin:0;padding:.2rem 0 .2rem var(--indent);transition:all 100ms;}nav.pdoc > div > ul > li{padding-left:0;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}html, main{scroll-behavior:smooth;}.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{background-color:var(--code);border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--code);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.pdoc details{--shift:-40px;text-align:right;margin-top:var(--shift);margin-bottom:calc(0px - var(--shift));clear:both;filter:opacity(1);}.pdoc details:not([open]){height:0;overflow:visible;}.pdoc details > summary{font-size:.75rem;cursor:pointer;color:var(--muted);border-width:0;padding:0 .7em;display:inline-block;display:inline list-item;user-select:none;}.pdoc details > summary:focus{outline:0;}.pdoc details > div{margin-top:calc(0px - var(--shift) / 2);text-align:left;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc > section:first-of-type > .docstring{margin-bottom:3rem;}.pdoc .docstring pre{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc .headerlink{position:absolute;width:0;margin-left:-1.5rem;line-height:1.4rem;font-size:1.5rem;font-weight:normal;transition:all 100ms ease-in-out;opacity:0;}.pdoc .attr > .headerlink{margin-left:-2.5rem;}.pdoc *:hover > .headerlink,.pdoc *:target > .attr > .headerlink{opacity:1;}.pdoc .attr{display:block;color:var(--text);margin:1rem 0 .5rem;padding:.4rem 5rem .4rem 1rem;background-color:var(--accent);}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{white-space:pre-wrap;}.pdoc .annotation{color:var(--annotation);}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}</style>
</head>
<body>        <nav class="pdoc">
            <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
            <input id="togglestate" type="checkbox">
            <div>
                        <a class="pdoc-button module-list-button" href="../parasbolv.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                            &nbsp;parasbolv</a>


                        <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                               pattern=".+" required>



                    <h2>API Documentation</h2>
                        <ul class="memberlist">
            <li>
                    <a class="class" href="#GlyphRenderer">GlyphRenderer</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#GlyphRenderer.__init__">GlyphRenderer</a>
                        </li>
                        <li>
                                <a class="function" href="#GlyphRenderer.get_glyph_parameters">get_glyph_parameters</a>
                        </li>
                        <li>
                                <a class="function" href="#GlyphRenderer.load_glyph">load_glyph</a>
                        </li>
                        <li>
                                <a class="function" href="#GlyphRenderer.load_package_glyphs">load_package_glyphs</a>
                        </li>
                        <li>
                                <a class="function" href="#GlyphRenderer.load_glyphs_from_path">load_glyphs_from_path</a>
                        </li>
                        <li>
                                <a class="function" href="#GlyphRenderer.draw_glyph">draw_glyph</a>
                        </li>
                        <li>
                                <a class="function" href="#GlyphRenderer.process_label_params">process_label_params</a>
                        </li>
                        <li>
                                <a class="function" href="#GlyphRenderer.calculate_centroid_of_paths">calculate_centroid_of_paths</a>
                        </li>
                        <li>
                                <a class="function" href="#GlyphRenderer.get_glyph_bounds">get_glyph_bounds</a>
                        </li>
                        <li>
                                <a class="function" href="#GlyphRenderer.get_baseline_end">get_baseline_end</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#find_bound_of_bounds">find_bound_of_bounds</a>
            </li>
            <li>
                    <a class="class" href="#Construct">Construct</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Construct.__init__">Construct</a>
                        </li>
                        <li>
                                <a class="function" href="#Construct.reverse_interactions">reverse_interactions</a>
                        </li>
                        <li>
                                <a class="function" href="#Construct.update_bounds">update_bounds</a>
                        </li>
                        <li>
                                <a class="function" href="#Construct.draw">draw</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#render_part_list">render_part_list</a>
            </li>
            <li>
                    <a class="function" href="#adjust_position_for_orientation">adjust_position_for_orientation</a>
            </li>
            <li>
                    <a class="function" href="#collate_user_params">collate_user_params</a>
            </li>
            <li>
                    <a class="function" href="#draw_interaction">draw_interaction</a>
            </li>
            <li>
                    <a class="function" href="#draw_control">draw_control</a>
            </li>
            <li>
                    <a class="function" href="#draw_degradation">draw_degradation</a>
            </li>
            <li>
                    <a class="function" href="#draw_inhibition">draw_inhibition</a>
            </li>
            <li>
                    <a class="function" href="#draw_process">draw_process</a>
            </li>
            <li>
                    <a class="function" href="#draw_stimulation">draw_stimulation</a>
            </li>
            <li>
                    <a class="function" href="#process_interaction_params">process_interaction_params</a>
            </li>
    </ul>



                    <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev">
                        built with <span class="visually-hidden">pdoc</span><img
                            alt="pdoc logo"
                            src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
                    </a>
            </div>
        </nav>
    <main class="pdoc">
            <section>
                    <h1 class="modulename">
<a href="./../parasbolv.html">parasbolv</a><wbr>.parasbolv    </h1>

                        <div class="docstring"><p>paraSBOLv</p>

<p>A simple and lightweight library for rendering parametric SVG versions
of the SBOL Visual symbols using matplotlib. It is able to load a directory
of glyphs and provides access to all style and geometry customisations,
and provides a number of helper functions to handle part lists and interactions.</p>
</div>

                        <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">paraSBOLv</span>

<span class="sd">A simple and lightweight library for rendering parametric SVG versions</span>
<span class="sd">of the SBOL Visual symbols using matplotlib. It is able to load a directory</span>
<span class="sd">of glyphs and provides access to all style and geometry customisations,</span>
<span class="sd">and provides a number of helper functions to handle part lists and interactions.</span>
<span class="sd">&quot;&quot;&quot;</span>


<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">xml.etree.ElementTree</span> <span class="kn">as</span> <span class="nn">ET</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">cos</span><span class="p">,</span> <span class="n">sin</span><span class="p">,</span> <span class="n">pi</span><span class="p">,</span> <span class="n">sqrt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.patches</span> <span class="kn">as</span> <span class="nn">patches</span>
<span class="kn">import</span> <span class="nn">matplotlib.font_manager</span> <span class="kn">as</span> <span class="nn">font_manager</span>
<span class="kn">from</span> <span class="nn">matplotlib.path</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">parasbolv.svgpath2mpl</span> <span class="kn">import</span> <span class="n">parse_path</span>


<span class="n">__author__</span>  <span class="o">=</span> <span class="s1">&#39;Thomas E. Gorochowski &lt;tom@chofski.co.uk&gt;, </span><span class="se">\</span>
<span class="s1">               Charlie Clark &lt;charlieclark1.e.e.2019@bristol.ac.uk&gt;&#39;</span>
<span class="n">__license__</span> <span class="o">=</span> <span class="s1">&#39;MIT&#39;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s1">&#39;0.1&#39;</span>


<span class="k">class</span> <span class="nc">GlyphRenderer</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Class to load and render using matplotlib parametric SVG glyphs.</span>
<span class="sd">    &quot;&quot;&quot;</span>


    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">glyph_path</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        glyph_path: str</span>
<span class="sd">            File path at which the glyph SVG files are stored,</span>
<span class="sd">            relative to the directory in which parasbolv.py is</span>
<span class="sd">            contained.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">svg2mpl_style_map</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">svg2mpl_style_map</span><span class="p">[</span><span class="s1">&#39;fill&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;facecolor&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">svg2mpl_style_map</span><span class="p">[</span><span class="s1">&#39;stroke&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;edgecolor&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">svg2mpl_style_map</span><span class="p">[</span><span class="s1">&#39;stroke-width&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;linewidth&#39;</span>
        <span class="k">if</span> <span class="n">glyph_path</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">glyphs_library</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">glyph_term_map</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_package_glyphs</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">glyphs_library</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">glyph_term_map</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_glyphs_from_path</span><span class="p">(</span><span class="n">glyph_path</span><span class="p">)</span>


    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">__process_unknown_val</span> <span class="p">(</span><span class="n">val</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Converts an unknown value into the correct type.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        val: string</span>
<span class="sd">            Represents an unknown value</span>
<span class="sd">            such as colour or line width.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">converted_val</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="n">val</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;rgba&#39;</span><span class="p">):</span>
            <span class="c1"># Convert RGBA value from 8-bit to arithmetic</span>
            <span class="n">c_els</span> <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
            <span class="n">r_val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">c_els</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="mf">255.0</span>
            <span class="n">g_val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">c_els</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mf">255.0</span>
            <span class="n">b_val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">c_els</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">/</span><span class="mf">255.0</span>
            <span class="n">a_val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">c_els</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
            <span class="n">converted_val</span> <span class="o">=</span> <span class="p">(</span><span class="n">r_val</span><span class="p">,</span> <span class="n">g_val</span><span class="p">,</span> <span class="n">b_val</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">val</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;rgb&#39;</span><span class="p">):</span>
            <span class="c1"># Convert RGB value from 8-bit to arithmetic</span>
            <span class="n">c_els</span> <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
            <span class="n">r_val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">c_els</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="mf">255.0</span>
            <span class="n">g_val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">c_els</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mf">255.0</span>
            <span class="n">b_val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">c_els</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">/</span><span class="mf">255.0</span>
            <span class="n">converted_val</span> <span class="o">=</span> <span class="p">(</span><span class="n">r_val</span><span class="p">,</span> <span class="n">g_val</span><span class="p">,</span> <span class="n">b_val</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">val</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;pt&#39;</span><span class="p">):</span>
            <span class="c1"># Convert to float, omitting &#39;pt&#39; unit</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">converted_val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">converted_val</span> <span class="o">=</span> <span class="n">val</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">converted_val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">converted_val</span> <span class="o">=</span> <span class="n">val</span>
        <span class="k">return</span> <span class="n">converted_val</span>


    <span class="k">def</span> <span class="nf">get_glyph_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">glyph_type</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">default_values</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the possible glyph parameters of a glyph.</span>
<span class="sd">        If no glyph is specified, returns the possible parameters</span>
<span class="sd">        for all glyphs.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        glyph_type: str</span>
<span class="sd">            Type of glyph to get parameters for. If</span>
<span class="sd">            unspecified, returns parameters for every</span>
<span class="sd">            glyph.</span>
<span class="sd">        default_values: bool</span>
<span class="sd">            If true, also returns default values for</span>
<span class="sd">            glyph parameters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">library</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">glyphs_library</span>
        <span class="k">if</span> <span class="n">glyph_type</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">default_dictionary</span> <span class="o">=</span> <span class="n">library</span><span class="p">[</span><span class="n">glyph_type</span><span class="p">][</span><span class="s1">&#39;defaults&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;&quot;&quot;&#39;{glyph_type}&#39; is not a glyph type in the glyphs library.&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">default_dictionary</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="n">all_default_dictionaries</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">all_default_dictionaries</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">library</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;defaults&#39;</span><span class="p">]</span>
        <span class="c1"># Remove defaults</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">default_values</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">default_dictionary</span><span class="p">:</span>
                <span class="n">default_list</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">default_dictionary</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">default_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">default_list</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">default_list_dict</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">all_default_dictionaries</span><span class="p">:</span>
                    <span class="n">glyph_defaults</span> <span class="o">=</span> <span class="n">all_default_dictionaries</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                    <span class="n">default_list_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">default</span> <span class="ow">in</span> <span class="n">glyph_defaults</span><span class="p">:</span>
                        <span class="n">default_list_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">default</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">default_list_dict</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">default_dictionary</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">default_dictionary</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">all_default_dictionaries</span>


    <span class="k">def</span> <span class="nf">__process_style</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style_text</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Converts style text into a dictionary.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        style_text: str</span>
<span class="sd">            Contains concatenated SVG style information</span>
<span class="sd">            such as `fill`, `stroke` and `stroke-width`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Convert the style text into a dictionary</span>
        <span class="n">style_data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">style_els</span> <span class="o">=</span> <span class="n">style_text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">style_els</span><span class="p">:</span>
            <span class="n">key_val</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">el</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)]</span> <span class="c1"># Convert style element into list</span>
            <span class="k">if</span> <span class="n">key_val</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">svg2mpl_style_map</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="c1"># Create new key-value pair with processed value</span>
                <span class="n">style_data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">svg2mpl_style_map</span><span class="p">[</span><span class="n">key_val</span><span class="p">[</span><span class="mi">0</span><span class="p">]]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__process_unknown_val</span><span class="p">(</span><span class="n">key_val</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">style_data</span>


    <span class="k">def</span> <span class="nf">__extract_tag_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag_attributes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Extracts all the relevant SVG details from an XML tag in the SVG.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        tag_attributes: dict</span>
<span class="sd">            Dictionary derived from XML structure</span>
<span class="sd">            containing SVG parameters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tag_details</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;glyphtype&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;terms&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c1"># Pull out the relevant details</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">tag_attributes</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;glyphtype&#39;</span><span class="p">:</span>
                <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;glyphtype&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tag_attributes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;terms&#39;</span><span class="p">:</span>
                <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;terms&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tag_attributes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;class&#39;</span><span class="p">:</span>
                <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tag_attributes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;id&#39;</span><span class="p">:</span>
                <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tag_attributes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;style&#39;</span><span class="p">:</span>
                <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__process_style</span><span class="p">(</span><span class="n">tag_attributes</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
            <span class="k">if</span> <span class="s1">&#39;parametric&#39;</span> <span class="ow">in</span> <span class="n">key</span> <span class="ow">and</span> <span class="n">key</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;}d&#39;</span><span class="p">):</span>
                <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tag_attributes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">if</span> <span class="s1">&#39;parametric&#39;</span> <span class="ow">in</span> <span class="n">key</span> <span class="ow">and</span> <span class="n">key</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;}defaults&#39;</span><span class="p">):</span>
                <span class="n">split_defaults_text</span> <span class="o">=</span> <span class="n">tag_attributes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
                <span class="n">defaults</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">split_defaults_text</span><span class="p">:</span>
                    <span class="n">key_value</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
                    <span class="n">defaults</span><span class="p">[</span><span class="n">key_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">key_value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
                <span class="n">defaults</span><span class="p">[</span><span class="s1">&#39;baseline_y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
                <span class="n">defaults</span><span class="p">[</span><span class="s1">&#39;baseline_x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
                <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">defaults</span>
        <span class="k">return</span> <span class="n">tag_details</span>


    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">__eval_svg_data</span><span class="p">(</span><span class="n">svg_text</span><span class="p">,</span> <span class="n">parameters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Extracts and then replaces equation with evaluated version using regular expression.</span>

<span class="sd">        See: https://stackoverflow.com/questions/38734335/python-regex-replace-bracketed-text-with-contents-of-brackets</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        svg_text: str</span>
<span class="sd">            SVG text containing unsubstituted values.</span>
<span class="sd">        parameters: dict</span>
<span class="sd">            Contains parameter values to be substituted</span>
<span class="sd">            into `svg_text` for evaluation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;{([^{}]+)}&quot;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">m</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">()[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">parameters</span><span class="p">)),</span> <span class="n">svg_text</span><span class="p">)</span>


    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">__flip_position_rotate_glyph</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">baseline_y</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">orientation</span><span class="p">,</span> <span class="n">rotation</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Flips paths into matplotlib default orientation and position, and rotates paths.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        path: Matplotlib Path object - https://matplotlib.org/stable/api/path_api.html</span>
<span class="sd">            Path to be transformed.</span>
<span class="sd">        baseline_y: float</span>
<span class="sd">            y value of the baseline.</span>
<span class="sd">        position: tuple</span>
<span class="sd">            Path position, format (x,y).</span>
<span class="sd">        orientation: &#39;forward&#39; or &#39;reverse&#39;</span>
<span class="sd">            Orietnation of the part.</span>
<span class="sd">        rotation: float</span>
<span class="sd">            Rotation value in radians.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Flip paths into matplotlib default orientation and position and rotate paths</span>
        <span class="k">if</span> <span class="n">orientation</span> <span class="o">==</span> <span class="s1">&#39;reverse&#39;</span><span class="p">:</span>
            <span class="n">rotation</span> <span class="o">+=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">180</span><span class="p">)</span>
        <span class="n">new_verts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">new_codes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">v_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">vertices</span><span class="p">,</span> <span class="mi">0</span><span class="p">)):</span>
            <span class="n">cur_vert</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">vertices</span><span class="p">[</span><span class="n">v_idx</span><span class="p">]</span>
            <span class="n">new_codes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">codes</span><span class="p">[</span><span class="n">v_idx</span><span class="p">])</span>
            <span class="c1"># Assign x and flipped y of origin in accordance with matplotlib default orientation</span>
            <span class="n">org_x</span> <span class="o">=</span> <span class="n">cur_vert</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">org_flipped_y</span> <span class="o">=</span> <span class="n">baseline_y</span><span class="o">-</span><span class="p">(</span><span class="n">cur_vert</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">baseline_y</span><span class="p">)</span>
            <span class="c1"># Rotate using trig functions</span>
            <span class="n">rot_x</span> <span class="o">=</span> <span class="n">org_x</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span> <span class="o">-</span> <span class="n">org_flipped_y</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span>
            <span class="n">rot_y</span> <span class="o">=</span> <span class="n">org_x</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span> <span class="o">+</span> <span class="n">org_flipped_y</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span>
            <span class="n">final_x</span> <span class="o">=</span> <span class="n">rot_x</span><span class="o">+</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">final_y</span> <span class="o">=</span> <span class="n">rot_y</span><span class="o">+</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">new_verts</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">final_x</span><span class="p">,</span> <span class="n">final_y</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="n">new_verts</span><span class="p">,</span> <span class="n">new_codes</span><span class="p">)</span>


    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">__bounds_from_paths_to_draw</span><span class="p">(</span><span class="n">paths</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calculates the bounding box from a set of paths.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        paths: list</span>
<span class="sd">           List containing Matplotlib Path objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x_min</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">x_max</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">y_min</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">y_max</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
            <span class="c1"># Find min and max x/y values of all vertices</span>
            <span class="n">xs</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">vertices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">ys</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">vertices</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">cur_x_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span>
            <span class="n">cur_x_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span>
            <span class="n">cur_y_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">ys</span><span class="p">)</span>
            <span class="n">cur_y_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">ys</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">x_min</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">x_min</span> <span class="o">=</span> <span class="n">cur_x_min</span>
                <span class="n">x_max</span> <span class="o">=</span> <span class="n">cur_x_max</span>
                <span class="n">y_min</span> <span class="o">=</span> <span class="n">cur_y_min</span>
                <span class="n">y_max</span> <span class="o">=</span> <span class="n">cur_y_max</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">cur_x_min</span> <span class="o">&lt;</span> <span class="n">x_min</span><span class="p">:</span>
                    <span class="n">x_min</span> <span class="o">=</span> <span class="n">cur_x_min</span>
                <span class="k">if</span> <span class="n">cur_x_max</span> <span class="o">&gt;</span> <span class="n">x_max</span><span class="p">:</span>
                    <span class="n">x_max</span> <span class="o">=</span> <span class="n">cur_x_max</span>
                <span class="k">if</span> <span class="n">cur_y_min</span> <span class="o">&lt;</span> <span class="n">y_min</span><span class="p">:</span>
                    <span class="n">y_min</span> <span class="o">=</span> <span class="n">cur_y_min</span>
                <span class="k">if</span> <span class="n">cur_y_max</span> <span class="o">&gt;</span> <span class="n">y_max</span><span class="p">:</span>
                    <span class="n">y_max</span> <span class="o">=</span> <span class="n">cur_y_max</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">x_min</span><span class="p">,</span> <span class="n">y_min</span><span class="p">),</span> <span class="p">(</span><span class="n">x_max</span><span class="p">,</span> <span class="n">y_max</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">load_glyph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Loads glyph information from an SVG file.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        filename: str</span>
<span class="sd">            Absolute file path of SVG file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tree</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>
        <span class="n">root_attributes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__extract_tag_details</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">attrib</span><span class="p">)</span>
        <span class="n">glyph_type</span> <span class="o">=</span> <span class="n">root_attributes</span><span class="p">[</span><span class="s1">&#39;glyphtype&#39;</span><span class="p">]</span>
        <span class="n">glyph_terms</span> <span class="o">=</span> <span class="n">root_attributes</span><span class="p">[</span><span class="s1">&#39;terms&#39;</span><span class="p">]</span>
        <span class="n">glyph_data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">glyph_data</span><span class="p">[</span><span class="s1">&#39;paths&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">glyph_data</span><span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">root_attributes</span><span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">root</span><span class="p">:</span>
            <span class="c1"># Cycle through and find all paths</span>
            <span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">):</span>
                <span class="n">glyph_data</span><span class="p">[</span><span class="s1">&#39;paths&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__extract_tag_details</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">attrib</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">glyph_type</span><span class="p">,</span> <span class="n">glyph_terms</span><span class="p">,</span> <span class="n">glyph_data</span>


    <span class="k">def</span> <span class="nf">load_package_glyphs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Finds the directory with packaged glyphs and loads them.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="vm">__name__</span><span class="p">]</span><span class="o">.</span><span class="vm">__file__</span><span class="p">)</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="s1">&#39;glyphs&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_glyphs_from_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">load_glyphs_from_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Loads glyph information from SVG files in a directory.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        path: str</span>
<span class="sd">            Absolute file path of directory containing glyphs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">glyphs_library</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">glyph_term_map</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">infile</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;*.svg&#39;</span><span class="p">)</span> <span class="p">):</span>
            <span class="n">glyph_type</span><span class="p">,</span> <span class="n">glyph_terms</span><span class="p">,</span> <span class="n">glyph_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_glyph</span><span class="p">(</span><span class="n">infile</span><span class="p">)</span>
            <span class="n">glyphs_library</span><span class="p">[</span><span class="n">glyph_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">glyph_data</span>
            <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">glyph_terms</span><span class="p">:</span>
                <span class="n">glyph_term_map</span><span class="p">[</span><span class="n">term</span><span class="p">]</span> <span class="o">=</span> <span class="n">glyph_type</span>
        <span class="k">return</span> <span class="n">glyphs_library</span><span class="p">,</span> <span class="n">glyph_term_map</span>


    <span class="k">def</span> <span class="nf">draw_glyph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                   <span class="n">ax</span><span class="p">,</span>
                   <span class="n">glyph_type</span><span class="p">,</span>
                   <span class="n">position</span><span class="p">,</span>
                   <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;forward&#39;</span><span class="p">,</span>
                   <span class="n">rotation</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
                   <span class="n">user_parameters</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                   <span class="n">user_style</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draws a glyph to Matploblib Axes.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ax: Axes object</span>
<span class="sd">            https://matplotlib.org/stable/api/axes_api.html</span>
<span class="sd">        glyph_type: str</span>
<span class="sd">            Name of the glyph being drawn.</span>
<span class="sd">        position: tuple</span>
<span class="sd">            Position to draw to, format (x,y).</span>
<span class="sd">        rotation: float, optional</span>
<span class="sd">            Rotation of glyph in radians.</span>
<span class="sd">        user_parameters: dict, optional</span>
<span class="sd">            Dictionary containing sizing/label parameters of glyph.</span>
<span class="sd">        user_style: dict, optional</span>
<span class="sd">            Dictionary containing style parameters of glyph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Check glyph type exists</span>
            <span class="n">glyph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">glyphs_library</span><span class="p">[</span><span class="n">glyph_type</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">class</span> <span class="nc">Invalid_glyph_type</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
                <span class="k">pass</span>
            <span class="k">raise</span> <span class="n">Invalid_glyph_type</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;&quot;&quot;&#39;{glyph_type}&#39; is not a valid glyph.&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="c1"># Collate parameters</span>
        <span class="n">merged_parameters</span><span class="p">,</span> <span class="n">label_parameters</span> <span class="o">=</span> <span class="n">collate_user_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                                                  <span class="n">glyph_type</span><span class="p">,</span>
                                                                  <span class="n">user_parameters</span><span class="p">)</span>
        <span class="c1"># Find invalid path ids</span>
        <span class="k">if</span> <span class="n">user_style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">path_ids</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">glyph</span><span class="p">[</span><span class="s1">&#39;paths&#39;</span><span class="p">]:</span>
                <span class="n">path_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">user_style</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">path_ids</span><span class="p">:</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;&quot;&quot;&#39;{key}&#39; is not a valid path ID for the &#39;{glyph_type}&#39; glyph.&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">paths_to_draw</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">path_zorders</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="n">user_parameters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;path_zorders&#39;</span> <span class="ow">in</span> <span class="n">user_parameters</span><span class="p">:</span>
                <span class="n">path_zorders</span> <span class="o">=</span> <span class="n">user_parameters</span><span class="p">[</span><span class="s1">&#39;path_zorders&#39;</span><span class="p">]</span>
        <span class="n">zorders_to_use</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">glyph</span><span class="p">[</span><span class="s1">&#39;paths&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">path</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;baseline&#39;</span><span class="p">,</span> <span class="s1">&#39;bounding-box&#39;</span><span class="p">]:</span>
                <span class="n">merged_style</span> <span class="o">=</span> <span class="n">path</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">user_style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span>
                    <span class="n">path</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span>
                    <span class="n">path</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">user_style</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="c1"># Merge the styling dictionaries (user takes preference)</span>
                    <span class="n">merged_style</span> <span class="o">=</span> <span class="n">user_style</span><span class="p">[</span><span class="n">path</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="k">for</span> <span class="n">style_el</span> <span class="ow">in</span> <span class="n">path</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="k">if</span> <span class="n">style_el</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">merged_style</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="n">merged_style</span><span class="p">[</span><span class="n">style_el</span><span class="p">]</span> <span class="o">=</span>  <span class="n">path</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">][</span><span class="n">style_el</span><span class="p">]</span>
                    <span class="k">for</span> <span class="n">style_el</span> <span class="ow">in</span> <span class="n">merged_style</span><span class="o">.</span><span class="n">copy</span><span class="p">():</span>
                        <span class="c1"># Find and remove invalid style elements</span>
                        <span class="k">if</span> <span class="n">style_el</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">path</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="n">merged_style</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">style_el</span><span class="p">)</span>
                            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;&quot;&quot;Style parameter &#39;{style_el}&#39; is not valid for &#39;{path[&quot;id&quot;]}&#39;.&quot;&quot;&quot;</span><span class="p">)</span>
                <span class="n">svg_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__eval_svg_data</span><span class="p">(</span><span class="n">path</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">],</span> <span class="n">merged_parameters</span><span class="p">)</span>
                <span class="c1"># Handle user-inputted path zorders</span>
                <span class="k">if</span> <span class="n">path_zorders</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">path</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">path_zorders</span><span class="p">:</span>
                        <span class="n">zorder</span> <span class="o">=</span> <span class="n">path_zorders</span><span class="p">[</span><span class="n">path</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]]</span>
                        <span class="n">zorders_to_use</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">zorder</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">zorders_to_use</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">zorders_to_use</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
                <span class="c1"># Call to svgpath2mpl</span>
                <span class="n">paths_to_draw</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">parse_path</span><span class="p">(</span><span class="n">svg_text</span><span class="p">),</span> <span class="n">merged_style</span><span class="p">])</span>
        <span class="c1"># Draw glyph to the axis with correct styling parameters</span>
        <span class="n">baseline_y</span> <span class="o">=</span> <span class="n">glyph</span><span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">][</span><span class="s1">&#39;baseline_y&#39;</span><span class="p">]</span>
        <span class="n">all_y_flipped_paths</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">position</span> <span class="o">=</span> <span class="n">adjust_position_for_orientation</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">orientation</span><span class="p">,</span> <span class="n">merged_parameters</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">],</span> <span class="n">rotation</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths_to_draw</span><span class="p">:</span>
            <span class="n">path_index</span> <span class="o">=</span> <span class="n">paths_to_draw</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="n">y_flipped_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__flip_position_rotate_glyph</span><span class="p">(</span><span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                                               <span class="n">baseline_y</span><span class="p">,</span>
                                                               <span class="n">position</span><span class="p">,</span>
                                                               <span class="n">orientation</span><span class="p">,</span>
                                                               <span class="n">rotation</span><span class="p">)</span>
            <span class="n">all_y_flipped_paths</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">y_flipped_path</span><span class="p">])</span>
            <span class="n">patch</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">PathPatch</span><span class="p">(</span><span class="n">y_flipped_path</span><span class="p">,</span> <span class="o">**</span><span class="n">path</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">zorder</span><span class="o">=</span><span class="n">zorders_to_use</span><span class="p">[</span><span class="n">path_index</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">patch</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">user_parameters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">label_parameters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c1"># Draw label</span>
                <span class="n">processed_label_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_label_params</span><span class="p">(</span><span class="n">label_parameters</span><span class="p">,</span>
                                                                   <span class="n">all_y_flipped_paths</span><span class="p">)</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="o">**</span><span class="n">processed_label_params</span><span class="p">,</span>
                        <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
                        <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
        <span class="n">glyph_bounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bounds_from_paths_to_draw</span><span class="p">(</span><span class="n">all_y_flipped_paths</span><span class="p">)</span>
        <span class="n">position</span> <span class="o">=</span> <span class="n">adjust_position_for_orientation</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">orientation</span><span class="p">,</span> <span class="n">merged_parameters</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">],</span> <span class="n">rotation</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">glyph_bounds</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_baseline_end</span><span class="p">(</span><span class="n">glyph_type</span><span class="p">,</span>
                                      <span class="n">position</span><span class="p">,</span>
                                      <span class="n">orientation</span><span class="p">,</span>
                                      <span class="n">rotation</span><span class="o">=</span><span class="n">rotation</span><span class="p">,</span>
                                      <span class="n">user_parameters</span><span class="o">=</span><span class="n">user_parameters</span><span class="p">))</span>


    <span class="k">def</span> <span class="nf">process_label_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label_parameters</span><span class="p">,</span> <span class="n">paths</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Formats and completes label parameters.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        label_parameters: dict</span>
<span class="sd">            Dictionary containing user-inputted</span>
<span class="sd">            label parameters, may contain:</span>
<span class="sd">                color: tuple</span>
<span class="sd">                    Label text colour, format</span>
<span class="sd">                    (r,g,b).</span>
<span class="sd">                xy_skew: tuple</span>
<span class="sd">                    Skew of label from centroid,</span>
<span class="sd">                    format (x,y).</span>
<span class="sd">                rotation: float</span>
<span class="sd">                    Rotation of label text in</span>
<span class="sd">                    Radians.</span>
<span class="sd">                userfont: dict</span>
<span class="sd">                    Dictionary containing Matplotlib</span>
<span class="sd">                    font properties key-value pairs:</span>
<span class="sd">                    https://matplotlib.org/stable/_modules/matplotlib/font_manager.html#FontProperties.</span>
<span class="sd">        paths: list</span>
<span class="sd">            List of paths composing the</span>
<span class="sd">            to-be-labelled glyph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">color</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">xy_skew</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">finalfont</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">FontProperties</span><span class="p">()</span>
        <span class="c1"># Collate parameters (user parameters take priority)</span>
        <span class="k">if</span> <span class="s1">&#39;color&#39;</span> <span class="ow">in</span> <span class="n">label_parameters</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">label_parameters</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;xy_skew&#39;</span> <span class="ow">in</span> <span class="n">label_parameters</span><span class="p">:</span>
            <span class="n">xy_skew</span> <span class="o">=</span> <span class="n">label_parameters</span><span class="p">[</span><span class="s1">&#39;xy_skew&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;rotation&#39;</span> <span class="ow">in</span> <span class="n">label_parameters</span><span class="p">:</span>
            <span class="c1"># Convert to degrees</span>
            <span class="n">rotation</span> <span class="o">=</span> <span class="p">(</span><span class="mi">180</span><span class="o">/</span><span class="n">pi</span><span class="p">)</span> <span class="o">*</span> <span class="n">label_parameters</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;userfont&#39;</span> <span class="ow">in</span> <span class="n">label_parameters</span><span class="p">:</span>
            <span class="n">finalfont</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">FontProperties</span><span class="p">(</span><span class="o">**</span><span class="n">label_parameters</span><span class="p">[</span><span class="s1">&#39;userfont&#39;</span><span class="p">])</span>
        <span class="n">all_path_vertices</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
            <span class="c1"># Find vertices of each path</span>
            <span class="n">path_vertices</span> <span class="o">=</span> <span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">vertices</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">all_path_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path_vertices</span><span class="p">)</span>
        <span class="n">textpos_x</span><span class="p">,</span> <span class="n">textpos_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_centroid_of_paths</span><span class="p">(</span><span class="n">all_path_vertices</span><span class="p">,</span> <span class="n">xy_skew</span><span class="o">=</span><span class="n">xy_skew</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="n">textpos_x</span><span class="p">,</span>
                <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="n">textpos_y</span><span class="p">,</span>
                <span class="s1">&#39;s&#39;</span><span class="p">:</span><span class="n">label_parameters</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">],</span>
                <span class="s1">&#39;color&#39;</span><span class="p">:</span><span class="n">color</span><span class="p">,</span>
                <span class="s1">&#39;fontproperties&#39;</span><span class="p">:</span><span class="n">finalfont</span><span class="p">,</span>
                <span class="s1">&#39;rotation&#39;</span><span class="p">:</span><span class="n">rotation</span><span class="p">}</span>


    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">calculate_centroid_of_paths</span><span class="p">(</span><span class="n">all_path_vertices</span><span class="p">,</span> <span class="n">xy_skew</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)):</span>
        <span class="sd">&quot;&quot;&quot;Calculates central point of paths provided.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        all_path_vertices: list</span>
<span class="sd">            Contains vertices of every path.</span>
<span class="sd">        xy_skew: tuple, optional</span>
<span class="sd">            Skew of centroid in x and y</span>
<span class="sd">            directions, format (x,y).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">vertices</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_path_vertices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">vertices</span> <span class="o">=</span> <span class="n">all_path_vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">vertices_to_array</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">path_vertices</span> <span class="ow">in</span> <span class="n">all_path_vertices</span><span class="p">:</span>
                <span class="c1"># Find centroid of each path</span>
                <span class="n">length</span> <span class="o">=</span> <span class="n">path_vertices</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">sum_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">path_vertices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
                <span class="n">sum_y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">path_vertices</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>
                <span class="n">vertices_to_array</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">sum_x</span><span class="o">/</span><span class="n">length</span><span class="p">,</span> <span class="n">sum_y</span><span class="o">/</span><span class="n">length</span><span class="p">])</span>
            <span class="n">vertices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">vertices_to_array</span><span class="p">)</span>
        <span class="c1"># Find centroid of single path/centroid of multiple centroids</span>
        <span class="n">length</span> <span class="o">=</span> <span class="n">vertices</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">sum_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">vertices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="n">sum_y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">vertices</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="c1"># Collate original and relative values</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">xy_skew</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">sum_x</span><span class="o">/</span><span class="n">length</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">xy_skew</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">sum_y</span><span class="o">/</span><span class="n">length</span>
        <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>


    <span class="k">def</span> <span class="nf">get_glyph_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">glyph_type</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">user_parameters</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns bounds of glyph.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        glyph_type: str</span>
<span class="sd">            Type of glyph.</span>
<span class="sd">        position: tuple</span>
<span class="sd">            Position of glyph, format (x,y).</span>
<span class="sd">        rotation: float, optional</span>
<span class="sd">            Rotation of glyph in radians.</span>
<span class="sd">        user_parameters: dict, optional</span>
<span class="sd">            Dictionary containing sizing/label parameters of glyph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_glyph</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">glyph_type</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="n">rotation</span><span class="p">,</span> <span class="n">user_parameters</span><span class="o">=</span><span class="n">user_parameters</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">get_baseline_end</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">glyph_type</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">orientation</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">user_parameters</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Finds the point following a glyph from which the baseline should end.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        glyph_type: str</span>
<span class="sd">            Type of glyph.</span>
<span class="sd">        position: tuple</span>
<span class="sd">            Position of glyph, format (x,y).</span>
<span class="sd">        rotation: float, optional</span>
<span class="sd">            Rotation of glyph in radians.</span>
<span class="sd">        user_parameters: dict, optional</span>
<span class="sd">            Dictionary containing sizing/label parameters of glyph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">glyph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">glyphs_library</span><span class="p">[</span><span class="n">glyph_type</span><span class="p">]</span>
        <span class="n">merged_parameters</span> <span class="o">=</span> <span class="n">glyph</span><span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">user_parameters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c1"># Collate parameters (user parameters take priority)</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">user_parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">merged_parameters</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_parameters</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="n">baseline_path</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">glyph</span><span class="p">[</span><span class="s1">&#39;paths&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">path</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;baseline&#39;</span><span class="p">:</span>
                <span class="n">svg_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__eval_svg_data</span><span class="p">(</span><span class="n">path</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">],</span> <span class="n">merged_parameters</span><span class="p">)</span>
                <span class="c1"># Call to svgpath2mpl</span>
                <span class="n">baseline_path</span> <span class="o">=</span> <span class="n">parse_path</span><span class="p">(</span><span class="n">svg_text</span><span class="p">)</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="n">baseline_path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c1"># Draw glyph to the axis with correct styling parameters</span>
            <span class="n">baseline_y</span> <span class="o">=</span> <span class="n">glyph</span><span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">][</span><span class="s1">&#39;baseline_y&#39;</span><span class="p">]</span>
            <span class="n">y_flipped_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__flip_position_rotate_glyph</span><span class="p">(</span><span class="n">baseline_path</span><span class="p">,</span>
                                                               <span class="n">baseline_y</span><span class="p">,</span>
                                                               <span class="n">position</span><span class="p">,</span>
                                                               <span class="n">orientation</span><span class="p">,</span>
                                                               <span class="n">rotation</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">y_flipped_path</span><span class="o">.</span><span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">y_flipped_path</span><span class="o">.</span><span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>

        <span class="k">return</span> <span class="bp">None</span>


<span class="k">def</span> <span class="nf">find_bound_of_bounds</span><span class="p">(</span><span class="n">bounds_list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Find the bounding box of a list of bounds.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    bounds_list: list</span>
<span class="sd">        List containing bounds to find bounding box of.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Set initial guess</span>
    <span class="n">x_min</span> <span class="o">=</span> <span class="n">bounds_list</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">y_min</span> <span class="o">=</span> <span class="n">bounds_list</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">x_max</span> <span class="o">=</span> <span class="n">bounds_list</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">y_max</span> <span class="o">=</span> <span class="n">bounds_list</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
    <span class="c1"># Find min and max x/y values</span>
    <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bounds_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">x_min</span><span class="p">:</span>
            <span class="n">x_min</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">y_min</span><span class="p">:</span>
            <span class="n">y_min</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">x_max</span><span class="p">:</span>
            <span class="n">x_max</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">y_max</span><span class="p">:</span>
            <span class="n">y_max</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="p">[(</span><span class="n">x_min</span><span class="p">,</span> <span class="n">y_min</span><span class="p">),</span> <span class="p">(</span><span class="n">x_max</span><span class="p">,</span> <span class="n">y_max</span><span class="p">)]</span>


<span class="k">class</span> <span class="nc">Construct</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;A modifiable construct consisting of</span>
<span class="sd">       SBOL glyphs and interactions.</span>

<span class="sd">       NOTE: Attributes below lacking</span>
<span class="sd">       description are documented in the</span>
<span class="sd">       __init__ docstring of this class.</span>

<span class="sd">       Attributes</span>
<span class="sd">       ----------</span>
<span class="sd">       part_list: list</span>
<span class="sd">       renderer: object</span>
<span class="sd">       padding: float</span>
<span class="sd">       gapsize: float</span>
<span class="sd">       fig: object</span>
<span class="sd">       ax: object</span>
<span class="sd">       start_position: tuple</span>
<span class="sd">       additional_bounds_list: list</span>
<span class="sd">       interaction_list: list</span>
<span class="sd">       rotation: float</span>
<span class="sd">       modify_axis: bool</span>
<span class="sd">       bounds: tuple</span>
<span class="sd">           Represents the bounds of the</span>
<span class="sd">           construct, formatted as ((x1,y1), (x2,y2))</span>
<span class="sd">           where (x1,y1) are the coordinates of the</span>
<span class="sd">           lower left vertex and (x2, y2) are the</span>
<span class="sd">           coordinates of the top right vertex.</span>
<span class="sd">    &quot;&quot;&quot;</span>


    <span class="k">def</span> <span class="fm">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                  <span class="n">part_list</span><span class="p">,</span>
                  <span class="n">renderer</span><span class="p">,</span>
                  <span class="n">padding</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
                  <span class="n">gapsize</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">,</span>
                  <span class="n">fig</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                  <span class="n">ax</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                  <span class="n">start_position</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                  <span class="n">additional_bounds_list</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                  <span class="n">interaction_list</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                  <span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
                  <span class="n">modify_axis</span> <span class="o">=</span> <span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        part_list: list</span>
<span class="sd">            Contains all glyphs in the</span>
<span class="sd">            construct. Each glyph is represented</span>
<span class="sd">            by a list containing three elements:</span>
<span class="sd">            [0] Glyph type, represented by a string,</span>
<span class="sd">            [1] the user_parameters dictionary, and</span>
<span class="sd">            [2] the style_parameters dictionary.</span>
<span class="sd">        renderer: object</span>
<span class="sd">            ParaSB0Lv GlyphRenderer object defined</span>
<span class="sd">            above.</span>
<span class="sd">        padding: float, optional</span>
<span class="sd">            Scale of the space added to axis limits.</span>
<span class="sd">        gapsize: float, optional</span>
<span class="sd">            Scale of the gaps between parts.</span>
<span class="sd">        fig: object, optional</span>
<span class="sd">            Matplotlib Figure object.</span>
<span class="sd">        ax: object, optional</span>
<span class="sd">            Matplotlib Axes object.</span>
<span class="sd">        start_position: tuple, optional</span>
<span class="sd">            Represents the origin of the construct,</span>
<span class="sd">            format (x, y).</span>
<span class="sd">        additional_bounds_list: list, optional</span>
<span class="sd">            Contains additional bounds to be</span>
<span class="sd">            incorporated into the construct</span>
<span class="sd">            bounds when using self.draw()</span>
<span class="sd">            and self.update_bounds().</span>
<span class="sd">        interaction_list: list, optional</span>
<span class="sd">            Specifies interactions between</span>
<span class="sd">            construct glyphs. Each interaction</span>
<span class="sd">            is represented by a list containing</span>
<span class="sd">            four elements: [0] The origin glyph</span>
<span class="sd">            of the interaction, represented by</span>
<span class="sd">            the glyph&#39;s index, [1] the receiving</span>
<span class="sd">            glyph of the interaction, represented</span>
<span class="sd">            similarly, [2] the interaction type</span>
<span class="sd">            string, and [3] the interaction_parameters</span>
<span class="sd">            dictionary.</span>
<span class="sd">        rotation: float, optional</span>
<span class="sd">            Float representing the rotation of</span>
<span class="sd">            the construct in radians.</span>
<span class="sd">        modify_axis: bool, optional</span>
<span class="sd">            Enable/disable the automatic resizing and</span>
<span class="sd">            modification of the Matplotlib Axes object - useful</span>
<span class="sd">            when wanting to modify it manually</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">renderer</span> <span class="o">=</span> <span class="n">renderer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">padding</span> <span class="o">=</span> <span class="n">padding</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gapsize</span> <span class="o">=</span> <span class="n">gapsize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fig</span> <span class="o">=</span> <span class="n">fig</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span> <span class="ow">is</span>  <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_position</span> <span class="o">=</span> <span class="n">start_position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">additional_bounds_list</span> <span class="o">=</span> <span class="n">additional_bounds_list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modify_axis</span> <span class="o">=</span> <span class="n">modify_axis</span>

        <span class="c1"># Data structure</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">part_list</span> <span class="o">=</span> <span class="n">part_list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interaction_list</span> <span class="o">=</span> <span class="n">interaction_list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rotation</span> <span class="o">=</span> <span class="n">rotation</span> <span class="c1"># Radians</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_bounds</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">reverse_interactions</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reverses the side interactions are drawn on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">interaction_list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">interaction</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">interaction_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">if</span> <span class="s1">&#39;direction&#39;</span> <span class="ow">in</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;forward&#39;</span><span class="p">:</span>
                        <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;reverse&#39;</span>
                    <span class="k">elif</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;reverse&#39;</span><span class="p">:</span>
                        <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;forward&#39;</span>
                <span class="k">if</span> <span class="s1">&#39;direction&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                    <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;reverse&#39;</span>


    <span class="k">def</span> <span class="nf">update_bounds</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Updates the bounds of the constuct.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">draw_for_bounds</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)[</span><span class="mi">4</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span> <span class="o">=</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>


    <span class="k">def</span> <span class="nf">draw</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">draw_for_bounds</span> <span class="o">=</span> <span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draws the construct using Matplotlib.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        draw_for_bounds: bool, optional</span>
<span class="sd">            Indicates if the construct is being</span>
<span class="sd">            drawn to update the self.bounds</span>
<span class="sd">            attribute.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Draw the construct</span>
        <span class="n">bounds_to_add</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">additional_bounds_list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c1"># Include additional bounds</span>
            <span class="k">for</span> <span class="n">additional_bounds</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">additional_bounds_list</span><span class="p">:</span>
                <span class="n">bounds_to_add</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">additional_bounds</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">draw_for_bounds</span> <span class="ow">is</span> <span class="bp">False</span><span class="p">:</span>
            <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">baseline_start</span><span class="p">,</span> <span class="n">baseline_end</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="n">render_part_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">part_list</span><span class="p">,</span>
                                                                             <span class="bp">self</span><span class="o">.</span><span class="n">renderer</span><span class="p">,</span>
                                                                             <span class="n">padding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">padding</span><span class="p">,</span>
                                                                             <span class="n">gapsize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gapsize</span><span class="p">,</span>
                                                                             <span class="n">fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="p">,</span>
                                                                             <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">,</span>
                                                                             <span class="n">start_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_position</span><span class="p">,</span>
                                                                             <span class="n">additional_bounds_list</span> <span class="o">=</span> <span class="n">bounds_to_add</span><span class="p">,</span>
                                                                             <span class="n">interaction_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interaction_list</span><span class="p">,</span>
                                                                             <span class="n">rotation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotation</span><span class="p">,</span>
                                                                             <span class="n">modify_axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modify_axis</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">baseline_start</span><span class="p">,</span> <span class="n">baseline_end</span><span class="p">,</span> <span class="n">bounds</span>
        <span class="k">elif</span> <span class="n">draw_for_bounds</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="c1"># Temporary rendering pathway to generate bounds</span>
            <span class="n">temp_fig</span><span class="p">,</span> <span class="n">temp_ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
            <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">baseline_start</span><span class="p">,</span> <span class="n">baseline_end</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="n">render_part_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">part_list</span><span class="p">,</span>
                                                                             <span class="bp">self</span><span class="o">.</span><span class="n">renderer</span><span class="p">,</span>
                                                                             <span class="n">padding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">padding</span><span class="p">,</span>
                                                                             <span class="n">gapsize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gapsize</span><span class="p">,</span>
                                                                             <span class="n">fig</span> <span class="o">=</span> <span class="n">temp_fig</span><span class="p">,</span>
                                                                             <span class="n">ax</span> <span class="o">=</span> <span class="n">temp_ax</span><span class="p">,</span>
                                                                             <span class="n">start_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_position</span><span class="p">,</span>
                                                                             <span class="n">additional_bounds_list</span> <span class="o">=</span> <span class="n">bounds_to_add</span><span class="p">,</span>
                                                                             <span class="n">interaction_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interaction_list</span><span class="p">,</span>
                                                                             <span class="n">rotation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotation</span><span class="p">,</span>
                                                                             <span class="n">modify_axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modify_axis</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">baseline_start</span><span class="p">,</span> <span class="n">baseline_end</span><span class="p">,</span> <span class="n">bounds</span>


<span class="k">def</span> <span class="nf">render_part_list</span> <span class="p">(</span><span class="n">part_list</span><span class="p">,</span>
                      <span class="n">renderer</span><span class="p">,</span>
                      <span class="n">padding</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
                      <span class="n">gapsize</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">,</span>
                      <span class="n">fig</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                      <span class="n">ax</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                      <span class="n">start_position</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                      <span class="n">additional_bounds_list</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                      <span class="n">interaction_list</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                      <span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
                      <span class="n">modify_axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Renders multiple glyphs in sequence.</span>

<span class="sd">    NOTE: See parameters of the __init__</span>
<span class="sd">    method within the Construct class</span>
<span class="sd">    for parameter descriptions.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    part_list: list</span>
<span class="sd">    renderer: object</span>
<span class="sd">    padding: float, optional</span>
<span class="sd">    gapsize: float, optional</span>
<span class="sd">    fig: object, optional</span>
<span class="sd">    ax: object, optional</span>
<span class="sd">    start_position: tuple, optional</span>
<span class="sd">    additional_bounds_list: list, optional</span>
<span class="sd">    interaction_list: list, optional</span>
<span class="sd">    rotation: float, optional</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fig</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">ax</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">modify_axis</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mf">0.99</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mf">0.99</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>
    <span class="n">part_position</span> <span class="o">=</span> <span class="n">start_position</span>
    <span class="n">bounds_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">part_list</span><span class="p">:</span>
        <span class="n">orientation</span> <span class="o">=</span> <span class="n">part</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">user_parameters</span> <span class="o">=</span> <span class="n">part</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="c1"># Pre-draw part_position adjustments (vertical_offset and orientation).</span>
        <span class="k">if</span> <span class="n">user_parameters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;vertical_offset&#39;</span> <span class="ow">in</span> <span class="n">user_parameters</span><span class="p">:</span>
                <span class="n">bearing</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="mf">3.142</span> <span class="o">-</span> <span class="n">rotation</span>
                <span class="n">part_position</span> <span class="o">=</span> <span class="p">(</span><span class="n">part_position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">user_parameters</span><span class="p">[</span><span class="s1">&#39;vertical_offset&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">bearing</span><span class="p">),</span>
                                 <span class="n">part_position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">user_parameters</span><span class="p">[</span><span class="s1">&#39;vertical_offset&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">bearing</span><span class="p">))</span>
        <span class="c1"># Draw the part</span>
        <span class="n">bounds</span><span class="p">,</span> <span class="n">part_position</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">draw_glyph</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span>
                                                    <span class="n">part</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                                    <span class="n">part_position</span><span class="p">,</span>
                                                    <span class="n">orientation</span><span class="o">=</span><span class="n">orientation</span><span class="p">,</span>
                                                    <span class="n">rotation</span><span class="o">=</span><span class="n">rotation</span><span class="p">,</span>
                                                    <span class="n">user_parameters</span><span class="o">=</span><span class="n">user_parameters</span><span class="p">,</span>
                                                    <span class="n">user_style</span><span class="o">=</span><span class="n">part</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="c1"># Post-draw part_position adjustments (vertical_offset, orientation, and gapsize)</span>
        <span class="k">if</span> <span class="n">user_parameters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;vertical_offset&#39;</span> <span class="ow">in</span> <span class="n">user_parameters</span><span class="p">:</span>
                <span class="n">bearing</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="mf">3.142</span> <span class="o">-</span> <span class="n">rotation</span>
                <span class="n">part_position</span> <span class="o">=</span> <span class="p">(</span><span class="n">part_position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="n">user_parameters</span><span class="p">[</span><span class="s1">&#39;vertical_offset&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">bearing</span><span class="p">),</span>
                                 <span class="n">part_position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="n">user_parameters</span><span class="p">[</span><span class="s1">&#39;vertical_offset&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">bearing</span><span class="p">))</span>
            <span class="k">if</span> <span class="s1">&#39;trailing_gap_skew&#39;</span> <span class="ow">in</span> <span class="n">user_parameters</span><span class="p">:</span>
                <span class="n">trailing_gap_skew</span> <span class="o">=</span> <span class="n">user_parameters</span><span class="p">[</span><span class="s1">&#39;trailing_gap_skew&#39;</span><span class="p">]</span>
                <span class="n">part_position</span> <span class="o">=</span> <span class="p">(</span><span class="n">part_position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">trailing_gap_skew</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">rotation</span><span class="p">),</span>
                                <span class="p">(</span><span class="n">part_position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">trailing_gap_skew</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">rotation</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">part</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">part_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">part_position</span> <span class="o">=</span> <span class="p">(</span><span class="n">part_position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">gapsize</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">rotation</span><span class="p">),</span>
                            <span class="p">(</span><span class="n">part_position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">gapsize</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">rotation</span><span class="p">)))</span>
        <span class="n">bounds_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>
    <span class="n">interaction_bounds_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">interaction_list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">interaction_types</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;control&#39;</span><span class="p">,</span><span class="s1">&#39;degradation&#39;</span><span class="p">,</span><span class="s1">&#39;inhibition&#39;</span><span class="p">,</span><span class="s1">&#39;process&#39;</span><span class="p">,</span><span class="s1">&#39;stimulation&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">interaction</span> <span class="ow">in</span> <span class="n">interaction_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="n">interaction_types</span><span class="p">:</span>
                <span class="c1"># Find bounds of glyphs</span>
                <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">part_list</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">part</span> <span class="ow">is</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                        <span class="n">sending_bounds</span> <span class="o">=</span> <span class="n">bounds_list</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
                        <span class="k">break</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">part_list</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">part</span> <span class="ow">is</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                        <span class="n">receiving_bounds</span> <span class="o">=</span> <span class="n">bounds_list</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
                        <span class="n">receiving_part_orientation</span> <span class="o">=</span> <span class="n">part</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">break</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="c1"># If unspecified by the user, interactions with reverse orientation receiving parts are drawn in reverse direction</span>
                <span class="k">if</span> <span class="n">receiving_part_orientation</span> <span class="o">==</span> <span class="s1">&#39;reverse&#39;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;direction&#39;</span><span class="p">:</span><span class="s1">&#39;reverse&#39;</span><span class="p">}</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="s1">&#39;direction&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                            <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;reverse&#39;</span>
                <span class="c1"># Draw interactions</span>
                <span class="n">bounds</span> <span class="o">=</span> <span class="n">draw_interaction</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span>
                                          <span class="n">sending_bounds</span><span class="p">,</span>
                                          <span class="n">receiving_bounds</span><span class="p">,</span>
                                          <span class="n">interaction</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                                          <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
                                          <span class="n">rotation</span> <span class="o">=</span> <span class="n">rotation</span><span class="p">)</span>
                <span class="n">interaction_bounds_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;&quot;&quot;&#39;{interaction[2]}&#39; is not a valid interaction type.&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="c1"># Unify interaction bounds and additional bounds with glyph bounds</span>
    <span class="k">for</span> <span class="n">interaction_bounds</span> <span class="ow">in</span> <span class="n">interaction_bounds_list</span><span class="p">:</span>
        <span class="n">bounds_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interaction_bounds</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">additional_bounds</span> <span class="ow">in</span> <span class="n">additional_bounds_list</span><span class="p">:</span>
        <span class="n">bounds_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">additional_bounds</span><span class="p">)</span>
    <span class="c1"># Automatically find bounds for plot and resize axes</span>
    <span class="n">final_bounds</span> <span class="o">=</span> <span class="n">find_bound_of_bounds</span><span class="p">(</span><span class="n">bounds_list</span><span class="p">)</span>
    <span class="n">width</span> <span class="o">=</span> <span class="p">(</span><span class="n">final_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">final_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="mf">60.0</span>
    <span class="n">height</span> <span class="o">=</span> <span class="p">(</span><span class="n">final_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">final_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mf">60.0</span>
    <span class="n">fig_pad</span> <span class="o">=</span> <span class="p">(</span><span class="n">final_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">final_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span><span class="o">*</span><span class="n">padding</span>
    <span class="n">pad</span> <span class="o">=</span> <span class="n">height</span><span class="o">*</span><span class="n">padding</span>
    <span class="n">width</span> <span class="o">=</span> <span class="n">width</span> <span class="o">+</span> <span class="p">(</span><span class="n">pad</span><span class="o">*</span><span class="mf">2.0</span><span class="p">)</span>
    <span class="n">height</span> <span class="o">=</span> <span class="n">height</span> <span class="o">+</span> <span class="p">(</span><span class="n">pad</span><span class="o">*</span><span class="mf">2.0</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">modify_axis</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="n">final_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">fig_pad</span><span class="p">,</span> <span class="n">final_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">fig_pad</span><span class="p">])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="n">final_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">fig_pad</span><span class="p">,</span> <span class="n">final_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">fig_pad</span><span class="p">])</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">set_size_inches</span><span class="p">(</span> <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span> <span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">start_position</span><span class="p">,</span> <span class="n">part_position</span><span class="p">,</span> <span class="n">final_bounds</span>


<span class="k">def</span> <span class="nf">adjust_position_for_orientation</span> <span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">orientation</span><span class="p">,</span> <span class="n">glyph_width</span><span class="p">,</span> <span class="n">rotation</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Adjusts the relative position of a part that</span>
<span class="sd">       to be drawn with a reversed orientation.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    position: tuple</span>
<span class="sd">        Position the glyph is to be</span>
<span class="sd">        drawn to, format (x,y).</span>
<span class="sd">    orientation: string</span>
<span class="sd">        Defines the glyph orientation,</span>
<span class="sd">        valued as either &#39;forward&#39; or</span>
<span class="sd">        &#39;reverse&#39;.</span>
<span class="sd">    glyph_width: float</span>
<span class="sd">        Width value of the glyph.</span>
<span class="sd">    rotation: float</span>
<span class="sd">        Rotation value of the construct</span>
<span class="sd">        containing the glyph.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">orientation</span> <span class="o">==</span> <span class="s1">&#39;reverse&#39;</span><span class="p">:</span>
        <span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">glyph_width</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">rotation</span><span class="p">)),</span> <span class="p">(</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">glyph_width</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">rotation</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">position</span>


<span class="k">def</span> <span class="nf">collate_user_params</span> <span class="p">(</span><span class="n">renderer</span><span class="p">,</span> <span class="n">glyph_type</span><span class="p">,</span> <span class="n">user_parameters</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Combine user-defined parameters with default glyph</span>
<span class="sd">       parameters to create merged parameters for drawing.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    renderer: object</span>
<span class="sd">        ParaSBOLv rendering object.</span>
<span class="sd">    glyph_type: str</span>
<span class="sd">        Type of glyph being drawn.</span>
<span class="sd">    user_parameters: dict</span>
<span class="sd">        User-defined parameters to</span>
<span class="sd">        be applied to the glyph.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">glyph</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">glyphs_library</span><span class="p">[</span><span class="n">glyph_type</span><span class="p">]</span>
    <span class="n">merged_parameters</span> <span class="o">=</span> <span class="n">glyph</span><span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">label_parameters</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="n">user_parameters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># Find label</span>
        <span class="k">if</span> <span class="s1">&#39;label_parameters&#39;</span> <span class="ow">in</span> <span class="n">user_parameters</span><span class="p">:</span>
            <span class="n">label_parameters</span> <span class="o">=</span> <span class="n">user_parameters</span><span class="p">[</span><span class="s1">&#39;label_parameters&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">user_parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">glyph</span><span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">]</span> <span class="ow">and</span>
                <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;label_parameters&#39;</span> <span class="ow">and</span>
                <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;orientation&#39;</span> <span class="ow">and</span>
                <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;vertical_offset&#39;</span> <span class="ow">and</span>
                <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;trailing_gap_skew&#39;</span> <span class="ow">and</span>
                <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;path_zorders&#39;</span><span class="p">):</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;&quot;&quot;Parameter &#39;{key}&#39; is not valid for &#39;{glyph_type}&#39;.&quot;&quot;&quot;</span><span class="p">)</span>
            <span class="n">merged_parameters</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_parameters</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">merged_parameters</span><span class="p">,</span> <span class="n">label_parameters</span>


<span class="k">def</span> <span class="nf">draw_interaction</span> <span class="p">(</span><span class="n">ax</span><span class="p">,</span>
                      <span class="n">sending_bounds</span><span class="p">,</span>
                      <span class="n">receiving_bounds</span><span class="p">,</span>
                      <span class="n">interaction_type</span><span class="p">,</span>
                      <span class="n">parameters</span><span class="p">,</span>
                      <span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Draws an interaction.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ax: object</span>
<span class="sd">        Matplotlib Axes object.</span>
<span class="sd">    sending_bounds: tuple</span>
<span class="sd">        Bounds of the sending glyph of the</span>
<span class="sd">        interaction, format ((x1,y1), (x2,y2)),</span>
<span class="sd">        where (x1,y1) is the bottom left vertex</span>
<span class="sd">        and (x2,y2) the top right.</span>
<span class="sd">    receiving_bounds: tuple</span>
<span class="sd">        Bounds of the receiving glyph of the</span>
<span class="sd">        interaction, formatted identically.</span>
<span class="sd">    interaction_type: string</span>
<span class="sd">        Type of interaction being drawn, from</span>
<span class="sd">        &#39;control&#39;, &#39;degradation&#39;, &#39;inhibition&#39;,</span>
<span class="sd">        &#39;process&#39;, &#39;stimulation&#39;.</span>
<span class="sd">    parameters: dict</span>
<span class="sd">        Contains parameters for the interaction.</span>
<span class="sd">        See docstring for the function</span>
<span class="sd">        `process_interaction_params` for details.</span>
<span class="sd">    rotation: float, optional</span>
<span class="sd">        Rotation, in radians, of construct that</span>
<span class="sd">        interactions are to be drawn to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="n">process_interaction_params</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
    <span class="c1"># Convert to degrees</span>
    <span class="n">rotation</span> <span class="o">=</span> <span class="p">(</span><span class="mi">180</span><span class="o">/</span><span class="n">pi</span><span class="p">)</span> <span class="o">*</span> <span class="n">rotation</span>
    <span class="k">if</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;reverse&#39;</span><span class="p">:</span>
        <span class="c1"># Flip side to draw interaction on</span>
        <span class="n">rotation</span> <span class="o">+=</span> <span class="mi">180</span>
        <span class="c1"># Flip centroids</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">sending_bounds</span>
        <span class="n">sending_bounds</span> <span class="o">=</span> <span class="n">receiving_bounds</span>
        <span class="n">receiving_bounds</span> <span class="o">=</span> <span class="n">p</span>
    <span class="c1"># Determine distance from baseline</span>
    <span class="n">initial_distance</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;distance_from_baseline&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">interaction_type</span> <span class="o">==</span> <span class="s1">&#39;degradation&#39;</span><span class="p">:</span> <span class="c1"># Degradation is bigger than the other interactions</span>
        <span class="n">initial_distance</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;distance_from_baseline&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span>
    <span class="c1"># Determine pad size</span>
    <span class="n">y_pad</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;heightskew&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span>
    <span class="c1"># Find centroid of glyph bounds</span>
    <span class="n">origin_cent</span> <span class="o">=</span> <span class="p">(</span><span class="n">sending_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">sending_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">sending_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
                   <span class="n">sending_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">sending_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">sending_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">end_cent</span> <span class="o">=</span> <span class="p">(</span><span class="n">receiving_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">receiving_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">receiving_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
                <span class="n">receiving_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">receiving_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">receiving_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    <span class="c1"># Determine distance between centroids</span>
    <span class="n">x_distance</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">origin_cent</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">end_cent</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">y_distance</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">origin_cent</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">end_cent</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">centroid_distance</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">x_distance</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y_distance</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
    <span class="c1"># Determine interaction origin</span>
    <span class="n">rotation</span> <span class="o">=</span> <span class="n">rotation</span> <span class="o">%</span> <span class="mi">360</span>
    <span class="n">bearing</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">-</span> <span class="n">rotation</span>
    <span class="n">int_origin_x</span> <span class="o">=</span> <span class="p">(</span><span class="n">origin_cent</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">initial_distance</span><span class="o">+</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;distance_from_baseline&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">bearing</span> <span class="o">*</span> <span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span> <span class="c1"># (h + rsin(a), k + rcos(a))</span>
    <span class="n">int_origin_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">origin_cent</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">initial_distance</span><span class="o">+</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;distance_from_baseline&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">bearing</span> <span class="o">*</span> <span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="c1"># Determine origin max</span>
    <span class="n">int_origin_max</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_origin_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">y_pad</span><span class="o">+</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;sending_length_skew&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">bearing</span> <span class="o">*</span> <span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
                      <span class="n">int_origin_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">y_pad</span><span class="o">+</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;sending_length_skew&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">bearing</span> <span class="o">*</span> <span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="c1"># Determine end max</span>
    <span class="n">int_end_max</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_origin_max</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">centroid_distance</span><span class="o">*</span><span class="n">sin</span><span class="p">((</span><span class="mi">90</span> <span class="o">-</span> <span class="n">rotation</span><span class="p">)</span> <span class="o">*</span> <span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
                   <span class="n">int_origin_max</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">centroid_distance</span><span class="o">*</span><span class="n">cos</span><span class="p">((</span><span class="mi">90</span> <span class="o">-</span> <span class="n">rotation</span><span class="p">)</span> <span class="o">*</span> <span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="c1"># Determine interaction endpoint</span>
    <span class="n">int_end_x</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_max</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">y_pad</span><span class="o">+</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;receiving_length_skew&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">sin</span><span class="p">((</span><span class="mi">180</span><span class="o">-</span><span class="n">rotation</span><span class="p">)</span> <span class="o">*</span> <span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">int_end_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_max</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">y_pad</span><span class="o">+</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;receiving_length_skew&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">cos</span><span class="p">((</span><span class="mi">180</span><span class="o">-</span><span class="n">rotation</span><span class="p">)</span> <span class="o">*</span> <span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;reverse&#39;</span><span class="p">:</span>
        <span class="c1"># Reverse origin and end points</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">int_origin_x</span><span class="p">,</span> <span class="n">int_origin_y</span><span class="p">,</span> <span class="n">int_origin_max</span>
        <span class="n">int_origin_x</span><span class="p">,</span> <span class="n">int_origin_y</span><span class="p">,</span> <span class="n">int_origin_max</span> <span class="o">=</span> <span class="n">int_end_x</span><span class="p">,</span> <span class="n">int_end_y</span><span class="p">,</span> <span class="n">int_end_max</span>
        <span class="n">int_end_x</span><span class="p">,</span> <span class="n">int_end_y</span><span class="p">,</span> <span class="n">int_end_max</span> <span class="o">=</span> <span class="n">p</span>
    <span class="c1"># Draw headless interaction</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">int_origin_x</span><span class="p">,</span>
              <span class="n">int_origin_max</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
              <span class="n">int_end_max</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
              <span class="n">int_end_x</span><span class="p">],</span>
             <span class="p">[</span><span class="n">int_origin_y</span><span class="p">,</span>
              <span class="n">int_origin_max</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
              <span class="n">int_end_max</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
              <span class="n">int_end_y</span><span class="p">],</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
            <span class="n">lw</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;linewidth&#39;</span><span class="p">],</span>
            <span class="n">zorder</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;zorder&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">5</span><span class="p">)</span> <span class="c1"># Slightly lower zorder than head to prevent overlap</span>
    <span class="c1"># Control</span>
    <span class="k">if</span> <span class="n">interaction_type</span> <span class="o">==</span> <span class="s1">&#39;control&#39;</span><span class="p">:</span>
        <span class="n">draw_control</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span>
                     <span class="n">int_end_x</span><span class="p">,</span>
                     <span class="n">int_end_y</span><span class="p">,</span>
                     <span class="n">parameters</span><span class="p">,</span>
                     <span class="n">rotation</span> <span class="o">=</span> <span class="n">rotation</span><span class="p">)</span>
    <span class="c1"># Degradation</span>
    <span class="k">elif</span> <span class="n">interaction_type</span> <span class="o">==</span> <span class="s1">&#39;degradation&#39;</span><span class="p">:</span>
        <span class="n">draw_degradation</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span>
                         <span class="n">int_end_x</span><span class="p">,</span>
                         <span class="n">int_end_y</span><span class="p">,</span>
                         <span class="n">parameters</span><span class="p">,</span>
                         <span class="n">rotation</span> <span class="o">=</span> <span class="n">rotation</span><span class="p">)</span>
    <span class="c1"># Inhibition</span>
    <span class="k">elif</span> <span class="n">interaction_type</span> <span class="o">==</span> <span class="s1">&#39;inhibition&#39;</span><span class="p">:</span>
        <span class="n">draw_inhibition</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span>
                        <span class="n">int_end_x</span><span class="p">,</span>
                        <span class="n">int_end_y</span><span class="p">,</span>
                        <span class="n">parameters</span><span class="p">,</span>
                        <span class="n">rotation</span> <span class="o">=</span> <span class="n">rotation</span><span class="p">)</span>
    <span class="c1"># Process</span>
    <span class="k">elif</span> <span class="n">interaction_type</span> <span class="o">==</span> <span class="s1">&#39;process&#39;</span><span class="p">:</span>
        <span class="n">draw_process</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span>
                     <span class="n">int_end_x</span><span class="p">,</span>
                     <span class="n">int_end_y</span><span class="p">,</span>
                     <span class="n">parameters</span><span class="p">,</span>
                     <span class="n">rotation</span> <span class="o">=</span> <span class="n">rotation</span><span class="p">)</span>
    <span class="c1"># Stimulation</span>
    <span class="k">elif</span> <span class="n">interaction_type</span> <span class="o">==</span> <span class="s1">&#39;stimulation&#39;</span><span class="p">:</span>
        <span class="n">draw_stimulation</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span>
                         <span class="n">int_end_x</span><span class="p">,</span>
                         <span class="n">int_end_y</span><span class="p">,</span>
                         <span class="n">parameters</span><span class="p">,</span>
                         <span class="n">rotation</span> <span class="o">=</span> <span class="n">rotation</span><span class="p">)</span>
    <span class="c1"># Find bounds of interaction</span>
    <span class="n">xcoords</span> <span class="o">=</span> <span class="p">[</span><span class="n">int_origin_max</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">int_end_max</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
               <span class="n">int_origin_x</span><span class="p">,</span> <span class="n">int_end_x</span><span class="p">]</span>
    <span class="n">ycoords</span> <span class="o">=</span> <span class="p">[</span><span class="n">int_origin_max</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">int_end_max</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
               <span class="n">int_origin_y</span><span class="p">,</span> <span class="n">int_end_y</span><span class="p">]</span>
    <span class="n">minbounds</span> <span class="o">=</span> <span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">xcoords</span><span class="p">),</span><span class="nb">min</span><span class="p">(</span><span class="n">ycoords</span><span class="p">))</span>
    <span class="n">maxbounds</span> <span class="o">=</span> <span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">xcoords</span><span class="p">),</span><span class="nb">max</span><span class="p">(</span><span class="n">ycoords</span><span class="p">))</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">minbounds</span><span class="p">,</span> <span class="n">maxbounds</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">draw_control</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span>
                 <span class="n">int_end_x</span><span class="p">,</span>
                 <span class="n">int_end_y</span><span class="p">,</span>
                 <span class="n">parameters</span><span class="p">,</span>
                 <span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Draws the head of a control interaction.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ax: object</span>
<span class="sd">        Matplotlib Axes object.</span>
<span class="sd">    int_end_x: float</span>
<span class="sd">        x value for the point at the end of</span>
<span class="sd">        the interaction.</span>
<span class="sd">    int_end_y: float</span>
<span class="sd">        y value for the point at the end of</span>
<span class="sd">        the interaction.</span>
<span class="sd">    parameters: dict</span>
<span class="sd">        Contains parameters for the interaction.</span>
<span class="sd">        See docstring for the function</span>
<span class="sd">        `process_interaction_params` for details.</span>
<span class="sd">    rotation: float, optional</span>
<span class="sd">        Rotation of the construct the interaction</span>
<span class="sd">        is being drawn to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headheight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headheight&#39;</span><span class="p">]:</span>
        <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headheight&#39;</span><span class="p">]</span>
    <span class="n">bearing1</span> <span class="o">=</span> <span class="p">((</span><span class="mi">360</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">rotation</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="mi">45</span>
    <span class="n">bearing2</span> <span class="o">=</span> <span class="p">((</span><span class="mi">360</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">rotation</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="mi">45</span>
    <span class="n">point1</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
              <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">point2</span> <span class="o">=</span> <span class="p">(</span><span class="n">point1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
              <span class="n">point1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">point3</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
              <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="c1"># Draw</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">int_end_x</span><span class="p">,</span>
              <span class="n">point1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
              <span class="n">point2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
              <span class="n">point3</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
              <span class="n">int_end_x</span><span class="p">],</span>
             <span class="p">[</span><span class="n">int_end_y</span><span class="p">,</span>
              <span class="n">point1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
              <span class="n">point2</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
              <span class="n">point3</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
              <span class="n">int_end_y</span><span class="p">],</span>
              <span class="n">color</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
              <span class="n">lw</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;linewidth&#39;</span><span class="p">],</span>
              <span class="n">zorder</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;zorder&#39;</span><span class="p">])</span>


<span class="k">def</span> <span class="nf">draw_degradation</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">int_end_x</span><span class="p">,</span> <span class="n">int_end_y</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Draws the head of a degradation interaction.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ax: object</span>
<span class="sd">        Matplotlib Axes object.</span>
<span class="sd">    int_end_x: float</span>
<span class="sd">        x value for the point at the end of</span>
<span class="sd">        the interaction.</span>
<span class="sd">    int_end_y: float</span>
<span class="sd">        y value for the point at the end of</span>
<span class="sd">        the interaction.</span>
<span class="sd">    parameters: dict</span>
<span class="sd">        Contains parameters for the interaction.</span>
<span class="sd">        See docstring for the function</span>
<span class="sd">        `process_interaction_params` for details.</span>
<span class="sd">    rotation: float, optional</span>
<span class="sd">        Rotation of the construct the interaction</span>
<span class="sd">        is being drawn to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bearing1</span> <span class="o">=</span> <span class="mi">90</span> <span class="o">-</span> <span class="n">rotation</span>
    <span class="n">bearing2</span> <span class="o">=</span> <span class="p">((</span><span class="mi">360</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">bearing1</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">bearing1</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">bearing3</span> <span class="o">=</span> <span class="p">((</span><span class="mi">360</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">rotation</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">base1</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
             <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">base2</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
             <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">point</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headheight&#39;</span><span class="p">])</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing3</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
             <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headheight&#39;</span><span class="p">])</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing3</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="c1"># Arrow</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">([[</span><span class="n">int_end_x</span><span class="p">,</span> <span class="n">int_end_y</span><span class="p">],</span>
                <span class="p">[</span><span class="n">base1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">base1</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                <span class="p">[</span><span class="n">point</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                <span class="p">[</span><span class="n">base2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">base2</span><span class="p">[</span><span class="mi">1</span><span class="p">]]],</span>
                <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">patch</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">PathPatch</span><span class="p">(</span><span class="n">path</span><span class="p">,</span>
                              <span class="n">facecolor</span><span class="o">=</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
                              <span class="n">edgecolor</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
                              <span class="n">lw</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;linewidth&#39;</span><span class="p">],</span>
                              <span class="n">zorder</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;zorder&#39;</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">patch</span><span class="p">)</span>
    <span class="c1"># Circle</span>
    <span class="n">origin</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headheight&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span> <span class="o">+</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing3</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
              <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headheight&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span> <span class="o">+</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing3</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="n">patch</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">Circle</span><span class="p">((</span><span class="n">origin</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">origin</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                            <span class="n">radius</span> <span class="o">=</span> <span class="n">r</span><span class="p">,</span>
                            <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span>
                            <span class="n">edgecolor</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
                            <span class="n">lw</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;linewidth&#39;</span><span class="p">],</span>
                            <span class="n">zorder</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;zorder&#39;</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">patch</span><span class="p">)</span>
    <span class="c1"># Line within circle</span>
    <span class="n">bearing1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">360</span> <span class="o">-</span> <span class="n">rotation</span><span class="p">)</span> <span class="o">+</span> <span class="mi">45</span>
    <span class="n">bearing2</span> <span class="o">=</span> <span class="p">(</span><span class="mi">360</span> <span class="o">-</span> <span class="n">rotation</span><span class="p">)</span> <span class="o">+</span> <span class="mi">225</span>
    <span class="n">end1</span> <span class="o">=</span> <span class="p">(</span><span class="n">origin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
            <span class="n">origin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">end2</span> <span class="o">=</span> <span class="p">(</span><span class="n">origin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
            <span class="n">origin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">end1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">end2</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
             <span class="p">[</span><span class="n">end1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">end2</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
             <span class="n">color</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
             <span class="n">lw</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;linewidth&#39;</span><span class="p">],</span>
             <span class="n">zorder</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;zorder&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">500</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">draw_inhibition</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">int_end_x</span><span class="p">,</span> <span class="n">int_end_y</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Draws the head of an inhibition interaction.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ax: object</span>
<span class="sd">        Matplotlib Axes object.</span>
<span class="sd">    int_end_x: float</span>
<span class="sd">        x value for the point at the end of</span>
<span class="sd">        the interaction.</span>
<span class="sd">    int_end_y: float</span>
<span class="sd">        y value for the point at the end of</span>
<span class="sd">        the interaction.</span>
<span class="sd">    parameters: dict</span>
<span class="sd">        Contains parameters for the interaction.</span>
<span class="sd">        See docstring for the function</span>
<span class="sd">        `process_interaction_params` for details.</span>
<span class="sd">    rotation: float, optional</span>
<span class="sd">        Rotation of the construct the interaction</span>
<span class="sd">        is being drawn to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bearing1</span> <span class="o">=</span> <span class="mi">90</span> <span class="o">-</span> <span class="n">rotation</span>
    <span class="n">bearing2</span> <span class="o">=</span> <span class="p">((</span><span class="mi">360</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">bearing1</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">bearing1</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">base1</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
             <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">base2</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
             <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="c1"># Draw</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">base1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
              <span class="n">base2</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
             <span class="p">[</span><span class="n">base1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
              <span class="n">base2</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
             <span class="n">color</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
             <span class="n">lw</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;linewidth&#39;</span><span class="p">],</span>
             <span class="n">zorder</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;zorder&#39;</span><span class="p">])</span>


<span class="k">def</span> <span class="nf">draw_process</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">int_end_x</span><span class="p">,</span> <span class="n">int_end_y</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Draws the head of a process interaction.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ax: object</span>
<span class="sd">        Matplotlib Axes object.</span>
<span class="sd">    int_end_x: float</span>
<span class="sd">        x value for the point at the end of</span>
<span class="sd">        the interaction.</span>
<span class="sd">    int_end_y: float</span>
<span class="sd">        y value for the point at the end of</span>
<span class="sd">        the interaction.</span>
<span class="sd">    parameters: dict</span>
<span class="sd">        Contains parameters for the interaction.</span>
<span class="sd">        See docstring for the function</span>
<span class="sd">        `process_interaction_params` for details.</span>
<span class="sd">    rotation: float, optional</span>
<span class="sd">        Rotation of the construct the interaction</span>
<span class="sd">        is being drawn to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bearing1</span> <span class="o">=</span> <span class="mi">90</span> <span class="o">-</span> <span class="n">rotation</span>
    <span class="n">bearing2</span> <span class="o">=</span> <span class="p">((</span><span class="mi">360</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">bearing1</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">bearing1</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">bearing3</span> <span class="o">=</span> <span class="p">((</span><span class="mi">360</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">rotation</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">base1</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
             <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">base2</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
             <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">point</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headheight&#39;</span><span class="p">])</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing3</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
             <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headheight&#39;</span><span class="p">])</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing3</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="c1"># Draw</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">([[</span><span class="n">int_end_x</span><span class="p">,</span> <span class="n">int_end_y</span><span class="p">],</span>
                <span class="p">[</span><span class="n">base1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">base1</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                <span class="p">[</span><span class="n">point</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                <span class="p">[</span><span class="n">base2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">base2</span><span class="p">[</span><span class="mi">1</span><span class="p">]]],</span>
                <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">patch</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">PathPatch</span><span class="p">(</span><span class="n">path</span><span class="p">,</span>
                              <span class="n">facecolor</span><span class="o">=</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
                              <span class="n">edgecolor</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
                              <span class="n">lw</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;linewidth&#39;</span><span class="p">],</span>
                              <span class="n">zorder</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;zorder&#39;</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">patch</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">draw_stimulation</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">int_end_x</span><span class="p">,</span> <span class="n">int_end_y</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Draws the head of a stimulation interaction.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ax: object</span>
<span class="sd">        Matplotlib Axes object.</span>
<span class="sd">    int_end_x: float</span>
<span class="sd">        x value for the point at the end of</span>
<span class="sd">        the interaction.</span>
<span class="sd">    int_end_y: float</span>
<span class="sd">        y value for the point at the end of</span>
<span class="sd">        the interaction.</span>
<span class="sd">    parameters: dict</span>
<span class="sd">        Contains parameters for the interaction.</span>
<span class="sd">        See docstring for the function</span>
<span class="sd">        `process_interaction_params` for details.</span>
<span class="sd">    rotation: float, optional</span>
<span class="sd">        Rotation of the construct the interaction</span>
<span class="sd">        is being drawn to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bearing1</span> <span class="o">=</span> <span class="mi">90</span> <span class="o">-</span> <span class="n">rotation</span>
    <span class="n">bearing2</span> <span class="o">=</span> <span class="p">((</span><span class="mi">360</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">bearing1</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">bearing1</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">bearing3</span> <span class="o">=</span> <span class="p">((</span><span class="mi">360</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">rotation</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">base1</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
             <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">base2</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
             <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">point</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headheight&#39;</span><span class="p">])</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing3</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
             <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headheight&#39;</span><span class="p">])</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing3</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="c1"># Draw</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">([[</span><span class="n">int_end_x</span><span class="p">,</span> <span class="n">int_end_y</span><span class="p">],</span>
                <span class="p">[</span><span class="n">base1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">base1</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                <span class="p">[</span><span class="n">point</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                <span class="p">[</span><span class="n">base2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">base2</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                <span class="p">[</span><span class="n">int_end_x</span><span class="p">,</span> <span class="n">int_end_y</span><span class="p">]],</span>
                <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">patch</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">PathPatch</span><span class="p">(</span><span class="n">path</span><span class="p">,</span>
                              <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span>
                              <span class="n">edgecolor</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
                              <span class="n">lw</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;linewidth&#39;</span><span class="p">],</span>
                              <span class="n">zorder</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;zorder&#39;</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">patch</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">process_interaction_params</span><span class="p">(</span><span class="n">parameters</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Formats and completes interaction parameters.</span>

<span class="sd">    Interaction parameters are combined into a dictionary passed as a single argumnet.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>

<span class="sd">    color: tuple</span>
<span class="sd">        Format (r,g,b).</span>
<span class="sd">    headheight: float</span>
<span class="sd">        Height of interaction head.</span>
<span class="sd">    headwidth: float</span>
<span class="sd">        Width of interaction head.</span>
<span class="sd">    zorder: int</span>
<span class="sd">        Matplotlib zorder value of</span>
<span class="sd">        the interaction.</span>
<span class="sd">    direction: string</span>
<span class="sd">        Determines what side of the</span>
<span class="sd">        construct the interaction is</span>
<span class="sd">        drawn on; &#39;forward&#39; or &#39;reverse&#39;.</span>
<span class="sd">    linewidth: float</span>
<span class="sd">        Determines the width of lines</span>
<span class="sd">        used to draw the interaction.</span>
<span class="sd">    heightskew: float</span>
<span class="sd">        Skews the total height of the</span>
<span class="sd">        interaction.</span>
<span class="sd">    sending_length_skew: float</span>
<span class="sd">        Skews the length of the origin</span>
<span class="sd">        line of the interaction.</span>
<span class="sd">    receiving_length_skew: float</span>
<span class="sd">        Skews the length of the</span>
<span class="sd">        receiving line of the</span>
<span class="sd">        interaction.</span>
<span class="sd">    distance_from_baseline: float</span>
<span class="sd">        Skews the distance between the</span>
<span class="sd">        interaction and the baseline.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">final_parameters</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
                        <span class="s1">&#39;headheight&#39;</span><span class="p">:</span> <span class="mf">7.0</span><span class="p">,</span>
                        <span class="s1">&#39;headwidth&#39;</span><span class="p">:</span> <span class="mf">7.0</span><span class="p">,</span>
                        <span class="s1">&#39;zorder&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                        <span class="s1">&#39;direction&#39;</span><span class="p">:</span> <span class="s1">&#39;forward&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;linewidth&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                        <span class="s1">&#39;heightskew&#39;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span>
                        <span class="s1">&#39;sending_length_skew&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                        <span class="s1">&#39;receiving_length_skew&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                        <span class="s1">&#39;distance_from_baseline&#39;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">parameters</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">final_parameters</span>
    <span class="c1"># Collate interaction parameters</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">parameters</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">final_parameters</span><span class="p">:</span>
            <span class="n">final_parameters</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;&quot;&quot;&#39;{key}&#39; is not a valid interaction parameter.&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="c1"># Amplify zorder to ensure all drawings composing the interaction can be grouped on Z axis</span>
    <span class="n">final_parameters</span><span class="p">[</span><span class="s1">&#39;zorder&#39;</span><span class="p">]</span> <span class="o">*=</span> <span class="mi">100</span>
    <span class="k">return</span> <span class="n">final_parameters</span>
</pre></div>

        </details>

            </section>
                <section id="GlyphRenderer">
                                <div class="attr class">
        <a class="headerlink" href="#GlyphRenderer">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">GlyphRenderer</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">GlyphRenderer</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Class to load and render using matplotlib parametric SVG glyphs.</span>
<span class="sd">    &quot;&quot;&quot;</span>


    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">glyph_path</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        glyph_path: str</span>
<span class="sd">            File path at which the glyph SVG files are stored,</span>
<span class="sd">            relative to the directory in which parasbolv.py is</span>
<span class="sd">            contained.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">svg2mpl_style_map</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">svg2mpl_style_map</span><span class="p">[</span><span class="s1">&#39;fill&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;facecolor&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">svg2mpl_style_map</span><span class="p">[</span><span class="s1">&#39;stroke&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;edgecolor&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">svg2mpl_style_map</span><span class="p">[</span><span class="s1">&#39;stroke-width&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;linewidth&#39;</span>
        <span class="k">if</span> <span class="n">glyph_path</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">glyphs_library</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">glyph_term_map</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_package_glyphs</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">glyphs_library</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">glyph_term_map</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_glyphs_from_path</span><span class="p">(</span><span class="n">glyph_path</span><span class="p">)</span>


    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">__process_unknown_val</span> <span class="p">(</span><span class="n">val</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Converts an unknown value into the correct type.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        val: string</span>
<span class="sd">            Represents an unknown value</span>
<span class="sd">            such as colour or line width.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">converted_val</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="n">val</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;rgba&#39;</span><span class="p">):</span>
            <span class="c1"># Convert RGBA value from 8-bit to arithmetic</span>
            <span class="n">c_els</span> <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
            <span class="n">r_val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">c_els</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="mf">255.0</span>
            <span class="n">g_val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">c_els</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mf">255.0</span>
            <span class="n">b_val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">c_els</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">/</span><span class="mf">255.0</span>
            <span class="n">a_val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">c_els</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
            <span class="n">converted_val</span> <span class="o">=</span> <span class="p">(</span><span class="n">r_val</span><span class="p">,</span> <span class="n">g_val</span><span class="p">,</span> <span class="n">b_val</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">val</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;rgb&#39;</span><span class="p">):</span>
            <span class="c1"># Convert RGB value from 8-bit to arithmetic</span>
            <span class="n">c_els</span> <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
            <span class="n">r_val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">c_els</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="mf">255.0</span>
            <span class="n">g_val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">c_els</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mf">255.0</span>
            <span class="n">b_val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">c_els</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">/</span><span class="mf">255.0</span>
            <span class="n">converted_val</span> <span class="o">=</span> <span class="p">(</span><span class="n">r_val</span><span class="p">,</span> <span class="n">g_val</span><span class="p">,</span> <span class="n">b_val</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">val</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;pt&#39;</span><span class="p">):</span>
            <span class="c1"># Convert to float, omitting &#39;pt&#39; unit</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">converted_val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">converted_val</span> <span class="o">=</span> <span class="n">val</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">converted_val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">converted_val</span> <span class="o">=</span> <span class="n">val</span>
        <span class="k">return</span> <span class="n">converted_val</span>


    <span class="k">def</span> <span class="nf">get_glyph_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">glyph_type</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">default_values</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the possible glyph parameters of a glyph.</span>
<span class="sd">        If no glyph is specified, returns the possible parameters</span>
<span class="sd">        for all glyphs.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        glyph_type: str</span>
<span class="sd">            Type of glyph to get parameters for. If</span>
<span class="sd">            unspecified, returns parameters for every</span>
<span class="sd">            glyph.</span>
<span class="sd">        default_values: bool</span>
<span class="sd">            If true, also returns default values for</span>
<span class="sd">            glyph parameters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">library</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">glyphs_library</span>
        <span class="k">if</span> <span class="n">glyph_type</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">default_dictionary</span> <span class="o">=</span> <span class="n">library</span><span class="p">[</span><span class="n">glyph_type</span><span class="p">][</span><span class="s1">&#39;defaults&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;&quot;&quot;&#39;{glyph_type}&#39; is not a glyph type in the glyphs library.&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">default_dictionary</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="n">all_default_dictionaries</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">all_default_dictionaries</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">library</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;defaults&#39;</span><span class="p">]</span>
        <span class="c1"># Remove defaults</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">default_values</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">default_dictionary</span><span class="p">:</span>
                <span class="n">default_list</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">default_dictionary</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">default_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">default_list</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">default_list_dict</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">all_default_dictionaries</span><span class="p">:</span>
                    <span class="n">glyph_defaults</span> <span class="o">=</span> <span class="n">all_default_dictionaries</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                    <span class="n">default_list_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">default</span> <span class="ow">in</span> <span class="n">glyph_defaults</span><span class="p">:</span>
                        <span class="n">default_list_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">default</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">default_list_dict</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">default_dictionary</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">default_dictionary</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">all_default_dictionaries</span>


    <span class="k">def</span> <span class="nf">__process_style</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style_text</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Converts style text into a dictionary.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        style_text: str</span>
<span class="sd">            Contains concatenated SVG style information</span>
<span class="sd">            such as `fill`, `stroke` and `stroke-width`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Convert the style text into a dictionary</span>
        <span class="n">style_data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">style_els</span> <span class="o">=</span> <span class="n">style_text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">style_els</span><span class="p">:</span>
            <span class="n">key_val</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">el</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)]</span> <span class="c1"># Convert style element into list</span>
            <span class="k">if</span> <span class="n">key_val</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">svg2mpl_style_map</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="c1"># Create new key-value pair with processed value</span>
                <span class="n">style_data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">svg2mpl_style_map</span><span class="p">[</span><span class="n">key_val</span><span class="p">[</span><span class="mi">0</span><span class="p">]]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__process_unknown_val</span><span class="p">(</span><span class="n">key_val</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">style_data</span>


    <span class="k">def</span> <span class="nf">__extract_tag_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag_attributes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Extracts all the relevant SVG details from an XML tag in the SVG.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        tag_attributes: dict</span>
<span class="sd">            Dictionary derived from XML structure</span>
<span class="sd">            containing SVG parameters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tag_details</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;glyphtype&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;terms&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c1"># Pull out the relevant details</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">tag_attributes</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;glyphtype&#39;</span><span class="p">:</span>
                <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;glyphtype&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tag_attributes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;terms&#39;</span><span class="p">:</span>
                <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;terms&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tag_attributes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;class&#39;</span><span class="p">:</span>
                <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tag_attributes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;id&#39;</span><span class="p">:</span>
                <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tag_attributes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;style&#39;</span><span class="p">:</span>
                <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__process_style</span><span class="p">(</span><span class="n">tag_attributes</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
            <span class="k">if</span> <span class="s1">&#39;parametric&#39;</span> <span class="ow">in</span> <span class="n">key</span> <span class="ow">and</span> <span class="n">key</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;}d&#39;</span><span class="p">):</span>
                <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tag_attributes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">if</span> <span class="s1">&#39;parametric&#39;</span> <span class="ow">in</span> <span class="n">key</span> <span class="ow">and</span> <span class="n">key</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;}defaults&#39;</span><span class="p">):</span>
                <span class="n">split_defaults_text</span> <span class="o">=</span> <span class="n">tag_attributes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
                <span class="n">defaults</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">split_defaults_text</span><span class="p">:</span>
                    <span class="n">key_value</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
                    <span class="n">defaults</span><span class="p">[</span><span class="n">key_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">key_value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
                <span class="n">defaults</span><span class="p">[</span><span class="s1">&#39;baseline_y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
                <span class="n">defaults</span><span class="p">[</span><span class="s1">&#39;baseline_x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
                <span class="n">tag_details</span><span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">defaults</span>
        <span class="k">return</span> <span class="n">tag_details</span>


    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">__eval_svg_data</span><span class="p">(</span><span class="n">svg_text</span><span class="p">,</span> <span class="n">parameters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Extracts and then replaces equation with evaluated version using regular expression.</span>

<span class="sd">        See: https://stackoverflow.com/questions/38734335/python-regex-replace-bracketed-text-with-contents-of-brackets</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        svg_text: str</span>
<span class="sd">            SVG text containing unsubstituted values.</span>
<span class="sd">        parameters: dict</span>
<span class="sd">            Contains parameter values to be substituted</span>
<span class="sd">            into `svg_text` for evaluation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;{([^{}]+)}&quot;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">m</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">()[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">parameters</span><span class="p">)),</span> <span class="n">svg_text</span><span class="p">)</span>


    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">__flip_position_rotate_glyph</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">baseline_y</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">orientation</span><span class="p">,</span> <span class="n">rotation</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Flips paths into matplotlib default orientation and position, and rotates paths.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        path: Matplotlib Path object - https://matplotlib.org/stable/api/path_api.html</span>
<span class="sd">            Path to be transformed.</span>
<span class="sd">        baseline_y: float</span>
<span class="sd">            y value of the baseline.</span>
<span class="sd">        position: tuple</span>
<span class="sd">            Path position, format (x,y).</span>
<span class="sd">        orientation: &#39;forward&#39; or &#39;reverse&#39;</span>
<span class="sd">            Orietnation of the part.</span>
<span class="sd">        rotation: float</span>
<span class="sd">            Rotation value in radians.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Flip paths into matplotlib default orientation and position and rotate paths</span>
        <span class="k">if</span> <span class="n">orientation</span> <span class="o">==</span> <span class="s1">&#39;reverse&#39;</span><span class="p">:</span>
            <span class="n">rotation</span> <span class="o">+=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">180</span><span class="p">)</span>
        <span class="n">new_verts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">new_codes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">v_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">vertices</span><span class="p">,</span> <span class="mi">0</span><span class="p">)):</span>
            <span class="n">cur_vert</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">vertices</span><span class="p">[</span><span class="n">v_idx</span><span class="p">]</span>
            <span class="n">new_codes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">codes</span><span class="p">[</span><span class="n">v_idx</span><span class="p">])</span>
            <span class="c1"># Assign x and flipped y of origin in accordance with matplotlib default orientation</span>
            <span class="n">org_x</span> <span class="o">=</span> <span class="n">cur_vert</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">org_flipped_y</span> <span class="o">=</span> <span class="n">baseline_y</span><span class="o">-</span><span class="p">(</span><span class="n">cur_vert</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">baseline_y</span><span class="p">)</span>
            <span class="c1"># Rotate using trig functions</span>
            <span class="n">rot_x</span> <span class="o">=</span> <span class="n">org_x</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span> <span class="o">-</span> <span class="n">org_flipped_y</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span>
            <span class="n">rot_y</span> <span class="o">=</span> <span class="n">org_x</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span> <span class="o">+</span> <span class="n">org_flipped_y</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span>
            <span class="n">final_x</span> <span class="o">=</span> <span class="n">rot_x</span><span class="o">+</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">final_y</span> <span class="o">=</span> <span class="n">rot_y</span><span class="o">+</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">new_verts</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">final_x</span><span class="p">,</span> <span class="n">final_y</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="n">new_verts</span><span class="p">,</span> <span class="n">new_codes</span><span class="p">)</span>


    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">__bounds_from_paths_to_draw</span><span class="p">(</span><span class="n">paths</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calculates the bounding box from a set of paths.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        paths: list</span>
<span class="sd">           List containing Matplotlib Path objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x_min</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">x_max</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">y_min</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">y_max</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
            <span class="c1"># Find min and max x/y values of all vertices</span>
            <span class="n">xs</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">vertices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">ys</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">vertices</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">cur_x_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span>
            <span class="n">cur_x_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span>
            <span class="n">cur_y_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">ys</span><span class="p">)</span>
            <span class="n">cur_y_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">ys</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">x_min</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">x_min</span> <span class="o">=</span> <span class="n">cur_x_min</span>
                <span class="n">x_max</span> <span class="o">=</span> <span class="n">cur_x_max</span>
                <span class="n">y_min</span> <span class="o">=</span> <span class="n">cur_y_min</span>
                <span class="n">y_max</span> <span class="o">=</span> <span class="n">cur_y_max</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">cur_x_min</span> <span class="o">&lt;</span> <span class="n">x_min</span><span class="p">:</span>
                    <span class="n">x_min</span> <span class="o">=</span> <span class="n">cur_x_min</span>
                <span class="k">if</span> <span class="n">cur_x_max</span> <span class="o">&gt;</span> <span class="n">x_max</span><span class="p">:</span>
                    <span class="n">x_max</span> <span class="o">=</span> <span class="n">cur_x_max</span>
                <span class="k">if</span> <span class="n">cur_y_min</span> <span class="o">&lt;</span> <span class="n">y_min</span><span class="p">:</span>
                    <span class="n">y_min</span> <span class="o">=</span> <span class="n">cur_y_min</span>
                <span class="k">if</span> <span class="n">cur_y_max</span> <span class="o">&gt;</span> <span class="n">y_max</span><span class="p">:</span>
                    <span class="n">y_max</span> <span class="o">=</span> <span class="n">cur_y_max</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">x_min</span><span class="p">,</span> <span class="n">y_min</span><span class="p">),</span> <span class="p">(</span><span class="n">x_max</span><span class="p">,</span> <span class="n">y_max</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">load_glyph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Loads glyph information from an SVG file.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        filename: str</span>
<span class="sd">            Absolute file path of SVG file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tree</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>
        <span class="n">root_attributes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__extract_tag_details</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">attrib</span><span class="p">)</span>
        <span class="n">glyph_type</span> <span class="o">=</span> <span class="n">root_attributes</span><span class="p">[</span><span class="s1">&#39;glyphtype&#39;</span><span class="p">]</span>
        <span class="n">glyph_terms</span> <span class="o">=</span> <span class="n">root_attributes</span><span class="p">[</span><span class="s1">&#39;terms&#39;</span><span class="p">]</span>
        <span class="n">glyph_data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">glyph_data</span><span class="p">[</span><span class="s1">&#39;paths&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">glyph_data</span><span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">root_attributes</span><span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">root</span><span class="p">:</span>
            <span class="c1"># Cycle through and find all paths</span>
            <span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">):</span>
                <span class="n">glyph_data</span><span class="p">[</span><span class="s1">&#39;paths&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__extract_tag_details</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">attrib</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">glyph_type</span><span class="p">,</span> <span class="n">glyph_terms</span><span class="p">,</span> <span class="n">glyph_data</span>


    <span class="k">def</span> <span class="nf">load_package_glyphs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Finds the directory with packaged glyphs and loads them.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="vm">__name__</span><span class="p">]</span><span class="o">.</span><span class="vm">__file__</span><span class="p">)</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="s1">&#39;glyphs&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_glyphs_from_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">load_glyphs_from_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Loads glyph information from SVG files in a directory.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        path: str</span>
<span class="sd">            Absolute file path of directory containing glyphs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">glyphs_library</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">glyph_term_map</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">infile</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;*.svg&#39;</span><span class="p">)</span> <span class="p">):</span>
            <span class="n">glyph_type</span><span class="p">,</span> <span class="n">glyph_terms</span><span class="p">,</span> <span class="n">glyph_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_glyph</span><span class="p">(</span><span class="n">infile</span><span class="p">)</span>
            <span class="n">glyphs_library</span><span class="p">[</span><span class="n">glyph_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">glyph_data</span>
            <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">glyph_terms</span><span class="p">:</span>
                <span class="n">glyph_term_map</span><span class="p">[</span><span class="n">term</span><span class="p">]</span> <span class="o">=</span> <span class="n">glyph_type</span>
        <span class="k">return</span> <span class="n">glyphs_library</span><span class="p">,</span> <span class="n">glyph_term_map</span>


    <span class="k">def</span> <span class="nf">draw_glyph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                   <span class="n">ax</span><span class="p">,</span>
                   <span class="n">glyph_type</span><span class="p">,</span>
                   <span class="n">position</span><span class="p">,</span>
                   <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;forward&#39;</span><span class="p">,</span>
                   <span class="n">rotation</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
                   <span class="n">user_parameters</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                   <span class="n">user_style</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draws a glyph to Matploblib Axes.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ax: Axes object</span>
<span class="sd">            https://matplotlib.org/stable/api/axes_api.html</span>
<span class="sd">        glyph_type: str</span>
<span class="sd">            Name of the glyph being drawn.</span>
<span class="sd">        position: tuple</span>
<span class="sd">            Position to draw to, format (x,y).</span>
<span class="sd">        rotation: float, optional</span>
<span class="sd">            Rotation of glyph in radians.</span>
<span class="sd">        user_parameters: dict, optional</span>
<span class="sd">            Dictionary containing sizing/label parameters of glyph.</span>
<span class="sd">        user_style: dict, optional</span>
<span class="sd">            Dictionary containing style parameters of glyph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Check glyph type exists</span>
            <span class="n">glyph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">glyphs_library</span><span class="p">[</span><span class="n">glyph_type</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">class</span> <span class="nc">Invalid_glyph_type</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
                <span class="k">pass</span>
            <span class="k">raise</span> <span class="n">Invalid_glyph_type</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;&quot;&quot;&#39;{glyph_type}&#39; is not a valid glyph.&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="c1"># Collate parameters</span>
        <span class="n">merged_parameters</span><span class="p">,</span> <span class="n">label_parameters</span> <span class="o">=</span> <span class="n">collate_user_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                                                  <span class="n">glyph_type</span><span class="p">,</span>
                                                                  <span class="n">user_parameters</span><span class="p">)</span>
        <span class="c1"># Find invalid path ids</span>
        <span class="k">if</span> <span class="n">user_style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">path_ids</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">glyph</span><span class="p">[</span><span class="s1">&#39;paths&#39;</span><span class="p">]:</span>
                <span class="n">path_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">user_style</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">path_ids</span><span class="p">:</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;&quot;&quot;&#39;{key}&#39; is not a valid path ID for the &#39;{glyph_type}&#39; glyph.&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">paths_to_draw</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">path_zorders</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="n">user_parameters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;path_zorders&#39;</span> <span class="ow">in</span> <span class="n">user_parameters</span><span class="p">:</span>
                <span class="n">path_zorders</span> <span class="o">=</span> <span class="n">user_parameters</span><span class="p">[</span><span class="s1">&#39;path_zorders&#39;</span><span class="p">]</span>
        <span class="n">zorders_to_use</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">glyph</span><span class="p">[</span><span class="s1">&#39;paths&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">path</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;baseline&#39;</span><span class="p">,</span> <span class="s1">&#39;bounding-box&#39;</span><span class="p">]:</span>
                <span class="n">merged_style</span> <span class="o">=</span> <span class="n">path</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">user_style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span>
                    <span class="n">path</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span>
                    <span class="n">path</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">user_style</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="c1"># Merge the styling dictionaries (user takes preference)</span>
                    <span class="n">merged_style</span> <span class="o">=</span> <span class="n">user_style</span><span class="p">[</span><span class="n">path</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="k">for</span> <span class="n">style_el</span> <span class="ow">in</span> <span class="n">path</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="k">if</span> <span class="n">style_el</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">merged_style</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="n">merged_style</span><span class="p">[</span><span class="n">style_el</span><span class="p">]</span> <span class="o">=</span>  <span class="n">path</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">][</span><span class="n">style_el</span><span class="p">]</span>
                    <span class="k">for</span> <span class="n">style_el</span> <span class="ow">in</span> <span class="n">merged_style</span><span class="o">.</span><span class="n">copy</span><span class="p">():</span>
                        <span class="c1"># Find and remove invalid style elements</span>
                        <span class="k">if</span> <span class="n">style_el</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">path</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="n">merged_style</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">style_el</span><span class="p">)</span>
                            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;&quot;&quot;Style parameter &#39;{style_el}&#39; is not valid for &#39;{path[&quot;id&quot;]}&#39;.&quot;&quot;&quot;</span><span class="p">)</span>
                <span class="n">svg_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__eval_svg_data</span><span class="p">(</span><span class="n">path</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">],</span> <span class="n">merged_parameters</span><span class="p">)</span>
                <span class="c1"># Handle user-inputted path zorders</span>
                <span class="k">if</span> <span class="n">path_zorders</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">path</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">path_zorders</span><span class="p">:</span>
                        <span class="n">zorder</span> <span class="o">=</span> <span class="n">path_zorders</span><span class="p">[</span><span class="n">path</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]]</span>
                        <span class="n">zorders_to_use</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">zorder</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">zorders_to_use</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">zorders_to_use</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
                <span class="c1"># Call to svgpath2mpl</span>
                <span class="n">paths_to_draw</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">parse_path</span><span class="p">(</span><span class="n">svg_text</span><span class="p">),</span> <span class="n">merged_style</span><span class="p">])</span>
        <span class="c1"># Draw glyph to the axis with correct styling parameters</span>
        <span class="n">baseline_y</span> <span class="o">=</span> <span class="n">glyph</span><span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">][</span><span class="s1">&#39;baseline_y&#39;</span><span class="p">]</span>
        <span class="n">all_y_flipped_paths</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">position</span> <span class="o">=</span> <span class="n">adjust_position_for_orientation</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">orientation</span><span class="p">,</span> <span class="n">merged_parameters</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">],</span> <span class="n">rotation</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths_to_draw</span><span class="p">:</span>
            <span class="n">path_index</span> <span class="o">=</span> <span class="n">paths_to_draw</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="n">y_flipped_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__flip_position_rotate_glyph</span><span class="p">(</span><span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                                               <span class="n">baseline_y</span><span class="p">,</span>
                                                               <span class="n">position</span><span class="p">,</span>
                                                               <span class="n">orientation</span><span class="p">,</span>
                                                               <span class="n">rotation</span><span class="p">)</span>
            <span class="n">all_y_flipped_paths</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">y_flipped_path</span><span class="p">])</span>
            <span class="n">patch</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">PathPatch</span><span class="p">(</span><span class="n">y_flipped_path</span><span class="p">,</span> <span class="o">**</span><span class="n">path</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">zorder</span><span class="o">=</span><span class="n">zorders_to_use</span><span class="p">[</span><span class="n">path_index</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">patch</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">user_parameters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">label_parameters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c1"># Draw label</span>
                <span class="n">processed_label_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_label_params</span><span class="p">(</span><span class="n">label_parameters</span><span class="p">,</span>
                                                                   <span class="n">all_y_flipped_paths</span><span class="p">)</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="o">**</span><span class="n">processed_label_params</span><span class="p">,</span>
                        <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
                        <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
        <span class="n">glyph_bounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bounds_from_paths_to_draw</span><span class="p">(</span><span class="n">all_y_flipped_paths</span><span class="p">)</span>
        <span class="n">position</span> <span class="o">=</span> <span class="n">adjust_position_for_orientation</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">orientation</span><span class="p">,</span> <span class="n">merged_parameters</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">],</span> <span class="n">rotation</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">glyph_bounds</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_baseline_end</span><span class="p">(</span><span class="n">glyph_type</span><span class="p">,</span>
                                      <span class="n">position</span><span class="p">,</span>
                                      <span class="n">orientation</span><span class="p">,</span>
                                      <span class="n">rotation</span><span class="o">=</span><span class="n">rotation</span><span class="p">,</span>
                                      <span class="n">user_parameters</span><span class="o">=</span><span class="n">user_parameters</span><span class="p">))</span>


    <span class="k">def</span> <span class="nf">process_label_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label_parameters</span><span class="p">,</span> <span class="n">paths</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Formats and completes label parameters.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        label_parameters: dict</span>
<span class="sd">            Dictionary containing user-inputted</span>
<span class="sd">            label parameters, may contain:</span>
<span class="sd">                color: tuple</span>
<span class="sd">                    Label text colour, format</span>
<span class="sd">                    (r,g,b).</span>
<span class="sd">                xy_skew: tuple</span>
<span class="sd">                    Skew of label from centroid,</span>
<span class="sd">                    format (x,y).</span>
<span class="sd">                rotation: float</span>
<span class="sd">                    Rotation of label text in</span>
<span class="sd">                    Radians.</span>
<span class="sd">                userfont: dict</span>
<span class="sd">                    Dictionary containing Matplotlib</span>
<span class="sd">                    font properties key-value pairs:</span>
<span class="sd">                    https://matplotlib.org/stable/_modules/matplotlib/font_manager.html#FontProperties.</span>
<span class="sd">        paths: list</span>
<span class="sd">            List of paths composing the</span>
<span class="sd">            to-be-labelled glyph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">color</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">xy_skew</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">finalfont</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">FontProperties</span><span class="p">()</span>
        <span class="c1"># Collate parameters (user parameters take priority)</span>
        <span class="k">if</span> <span class="s1">&#39;color&#39;</span> <span class="ow">in</span> <span class="n">label_parameters</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">label_parameters</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;xy_skew&#39;</span> <span class="ow">in</span> <span class="n">label_parameters</span><span class="p">:</span>
            <span class="n">xy_skew</span> <span class="o">=</span> <span class="n">label_parameters</span><span class="p">[</span><span class="s1">&#39;xy_skew&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;rotation&#39;</span> <span class="ow">in</span> <span class="n">label_parameters</span><span class="p">:</span>
            <span class="c1"># Convert to degrees</span>
            <span class="n">rotation</span> <span class="o">=</span> <span class="p">(</span><span class="mi">180</span><span class="o">/</span><span class="n">pi</span><span class="p">)</span> <span class="o">*</span> <span class="n">label_parameters</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;userfont&#39;</span> <span class="ow">in</span> <span class="n">label_parameters</span><span class="p">:</span>
            <span class="n">finalfont</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">FontProperties</span><span class="p">(</span><span class="o">**</span><span class="n">label_parameters</span><span class="p">[</span><span class="s1">&#39;userfont&#39;</span><span class="p">])</span>
        <span class="n">all_path_vertices</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
            <span class="c1"># Find vertices of each path</span>
            <span class="n">path_vertices</span> <span class="o">=</span> <span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">vertices</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">all_path_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path_vertices</span><span class="p">)</span>
        <span class="n">textpos_x</span><span class="p">,</span> <span class="n">textpos_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_centroid_of_paths</span><span class="p">(</span><span class="n">all_path_vertices</span><span class="p">,</span> <span class="n">xy_skew</span><span class="o">=</span><span class="n">xy_skew</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="n">textpos_x</span><span class="p">,</span>
                <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="n">textpos_y</span><span class="p">,</span>
                <span class="s1">&#39;s&#39;</span><span class="p">:</span><span class="n">label_parameters</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">],</span>
                <span class="s1">&#39;color&#39;</span><span class="p">:</span><span class="n">color</span><span class="p">,</span>
                <span class="s1">&#39;fontproperties&#39;</span><span class="p">:</span><span class="n">finalfont</span><span class="p">,</span>
                <span class="s1">&#39;rotation&#39;</span><span class="p">:</span><span class="n">rotation</span><span class="p">}</span>


    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">calculate_centroid_of_paths</span><span class="p">(</span><span class="n">all_path_vertices</span><span class="p">,</span> <span class="n">xy_skew</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)):</span>
        <span class="sd">&quot;&quot;&quot;Calculates central point of paths provided.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        all_path_vertices: list</span>
<span class="sd">            Contains vertices of every path.</span>
<span class="sd">        xy_skew: tuple, optional</span>
<span class="sd">            Skew of centroid in x and y</span>
<span class="sd">            directions, format (x,y).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">vertices</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_path_vertices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">vertices</span> <span class="o">=</span> <span class="n">all_path_vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">vertices_to_array</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">path_vertices</span> <span class="ow">in</span> <span class="n">all_path_vertices</span><span class="p">:</span>
                <span class="c1"># Find centroid of each path</span>
                <span class="n">length</span> <span class="o">=</span> <span class="n">path_vertices</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">sum_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">path_vertices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
                <span class="n">sum_y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">path_vertices</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>
                <span class="n">vertices_to_array</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">sum_x</span><span class="o">/</span><span class="n">length</span><span class="p">,</span> <span class="n">sum_y</span><span class="o">/</span><span class="n">length</span><span class="p">])</span>
            <span class="n">vertices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">vertices_to_array</span><span class="p">)</span>
        <span class="c1"># Find centroid of single path/centroid of multiple centroids</span>
        <span class="n">length</span> <span class="o">=</span> <span class="n">vertices</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">sum_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">vertices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="n">sum_y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">vertices</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="c1"># Collate original and relative values</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">xy_skew</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">sum_x</span><span class="o">/</span><span class="n">length</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">xy_skew</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">sum_y</span><span class="o">/</span><span class="n">length</span>
        <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>


    <span class="k">def</span> <span class="nf">get_glyph_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">glyph_type</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">user_parameters</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns bounds of glyph.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        glyph_type: str</span>
<span class="sd">            Type of glyph.</span>
<span class="sd">        position: tuple</span>
<span class="sd">            Position of glyph, format (x,y).</span>
<span class="sd">        rotation: float, optional</span>
<span class="sd">            Rotation of glyph in radians.</span>
<span class="sd">        user_parameters: dict, optional</span>
<span class="sd">            Dictionary containing sizing/label parameters of glyph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_glyph</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">glyph_type</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="n">rotation</span><span class="p">,</span> <span class="n">user_parameters</span><span class="o">=</span><span class="n">user_parameters</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">get_baseline_end</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">glyph_type</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">orientation</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">user_parameters</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Finds the point following a glyph from which the baseline should end.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        glyph_type: str</span>
<span class="sd">            Type of glyph.</span>
<span class="sd">        position: tuple</span>
<span class="sd">            Position of glyph, format (x,y).</span>
<span class="sd">        rotation: float, optional</span>
<span class="sd">            Rotation of glyph in radians.</span>
<span class="sd">        user_parameters: dict, optional</span>
<span class="sd">            Dictionary containing sizing/label parameters of glyph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">glyph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">glyphs_library</span><span class="p">[</span><span class="n">glyph_type</span><span class="p">]</span>
        <span class="n">merged_parameters</span> <span class="o">=</span> <span class="n">glyph</span><span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">user_parameters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c1"># Collate parameters (user parameters take priority)</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">user_parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">merged_parameters</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_parameters</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="n">baseline_path</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">glyph</span><span class="p">[</span><span class="s1">&#39;paths&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">path</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;baseline&#39;</span><span class="p">:</span>
                <span class="n">svg_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__eval_svg_data</span><span class="p">(</span><span class="n">path</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">],</span> <span class="n">merged_parameters</span><span class="p">)</span>
                <span class="c1"># Call to svgpath2mpl</span>
                <span class="n">baseline_path</span> <span class="o">=</span> <span class="n">parse_path</span><span class="p">(</span><span class="n">svg_text</span><span class="p">)</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="n">baseline_path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c1"># Draw glyph to the axis with correct styling parameters</span>
            <span class="n">baseline_y</span> <span class="o">=</span> <span class="n">glyph</span><span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">][</span><span class="s1">&#39;baseline_y&#39;</span><span class="p">]</span>
            <span class="n">y_flipped_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__flip_position_rotate_glyph</span><span class="p">(</span><span class="n">baseline_path</span><span class="p">,</span>
                                                               <span class="n">baseline_y</span><span class="p">,</span>
                                                               <span class="n">position</span><span class="p">,</span>
                                                               <span class="n">orientation</span><span class="p">,</span>
                                                               <span class="n">rotation</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">y_flipped_path</span><span class="o">.</span><span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">y_flipped_path</span><span class="o">.</span><span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>

        <span class="k">return</span> <span class="bp">None</span>
</pre></div>

        </details>

            <div class="docstring"><p>Class to load and render using matplotlib parametric SVG glyphs.</p>
</div>


                            <div id="GlyphRenderer.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#GlyphRenderer.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">GlyphRenderer</span><span class="signature">(glyph_path=None)</span>
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">glyph_path</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        glyph_path: str</span>
<span class="sd">            File path at which the glyph SVG files are stored,</span>
<span class="sd">            relative to the directory in which parasbolv.py is</span>
<span class="sd">            contained.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">svg2mpl_style_map</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">svg2mpl_style_map</span><span class="p">[</span><span class="s1">&#39;fill&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;facecolor&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">svg2mpl_style_map</span><span class="p">[</span><span class="s1">&#39;stroke&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;edgecolor&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">svg2mpl_style_map</span><span class="p">[</span><span class="s1">&#39;stroke-width&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;linewidth&#39;</span>
        <span class="k">if</span> <span class="n">glyph_path</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">glyphs_library</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">glyph_term_map</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_package_glyphs</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">glyphs_library</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">glyph_term_map</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_glyphs_from_path</span><span class="p">(</span><span class="n">glyph_path</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><h6 id="parameters">Parameters</h6>

<ul>
<li><strong>glyph_path</strong> (str):
File path at which the glyph SVG files are stored,
relative to the directory in which <a href="../parasbolv.html#py">parasbolv.py</a> is
contained.</li>
</ul>
</div>


                            </div>
                            <div id="GlyphRenderer.get_glyph_parameters" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#GlyphRenderer.get_glyph_parameters">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_glyph_parameters</span><span class="signature">(self, glyph_type=None, default_values=False)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_glyph_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">glyph_type</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">default_values</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the possible glyph parameters of a glyph.</span>
<span class="sd">        If no glyph is specified, returns the possible parameters</span>
<span class="sd">        for all glyphs.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        glyph_type: str</span>
<span class="sd">            Type of glyph to get parameters for. If</span>
<span class="sd">            unspecified, returns parameters for every</span>
<span class="sd">            glyph.</span>
<span class="sd">        default_values: bool</span>
<span class="sd">            If true, also returns default values for</span>
<span class="sd">            glyph parameters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">library</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">glyphs_library</span>
        <span class="k">if</span> <span class="n">glyph_type</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">default_dictionary</span> <span class="o">=</span> <span class="n">library</span><span class="p">[</span><span class="n">glyph_type</span><span class="p">][</span><span class="s1">&#39;defaults&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;&quot;&quot;&#39;{glyph_type}&#39; is not a glyph type in the glyphs library.&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">default_dictionary</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="n">all_default_dictionaries</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">all_default_dictionaries</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">library</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;defaults&#39;</span><span class="p">]</span>
        <span class="c1"># Remove defaults</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">default_values</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">default_dictionary</span><span class="p">:</span>
                <span class="n">default_list</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">default_dictionary</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">default_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">default_list</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">default_list_dict</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">all_default_dictionaries</span><span class="p">:</span>
                    <span class="n">glyph_defaults</span> <span class="o">=</span> <span class="n">all_default_dictionaries</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                    <span class="n">default_list_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">default</span> <span class="ow">in</span> <span class="n">glyph_defaults</span><span class="p">:</span>
                        <span class="n">default_list_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">default</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">default_list_dict</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">default_dictionary</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">default_dictionary</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">all_default_dictionaries</span>
</pre></div>

        </details>

            <div class="docstring"><p>Returns the possible glyph parameters of a glyph.
If no glyph is specified, returns the possible parameters
for all glyphs.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>glyph_type</strong> (str):
Type of glyph to get parameters for. If
unspecified, returns parameters for every
glyph.</li>
<li><strong>default_values</strong> (bool):
If true, also returns default values for
glyph parameters.</li>
</ul>
</div>


                            </div>
                            <div id="GlyphRenderer.load_glyph" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#GlyphRenderer.load_glyph">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">load_glyph</span><span class="signature">(self, filename)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">load_glyph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Loads glyph information from an SVG file.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        filename: str</span>
<span class="sd">            Absolute file path of SVG file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tree</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>
        <span class="n">root_attributes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__extract_tag_details</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">attrib</span><span class="p">)</span>
        <span class="n">glyph_type</span> <span class="o">=</span> <span class="n">root_attributes</span><span class="p">[</span><span class="s1">&#39;glyphtype&#39;</span><span class="p">]</span>
        <span class="n">glyph_terms</span> <span class="o">=</span> <span class="n">root_attributes</span><span class="p">[</span><span class="s1">&#39;terms&#39;</span><span class="p">]</span>
        <span class="n">glyph_data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">glyph_data</span><span class="p">[</span><span class="s1">&#39;paths&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">glyph_data</span><span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">root_attributes</span><span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">root</span><span class="p">:</span>
            <span class="c1"># Cycle through and find all paths</span>
            <span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">):</span>
                <span class="n">glyph_data</span><span class="p">[</span><span class="s1">&#39;paths&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__extract_tag_details</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">attrib</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">glyph_type</span><span class="p">,</span> <span class="n">glyph_terms</span><span class="p">,</span> <span class="n">glyph_data</span>
</pre></div>

        </details>

            <div class="docstring"><p>Loads glyph information from an SVG file.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>filename</strong> (str):
Absolute file path of SVG file.</li>
</ul>
</div>


                            </div>
                            <div id="GlyphRenderer.load_package_glyphs" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#GlyphRenderer.load_package_glyphs">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">load_package_glyphs</span><span class="signature">(self)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">load_package_glyphs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Finds the directory with packaged glyphs and loads them.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="vm">__name__</span><span class="p">]</span><span class="o">.</span><span class="vm">__file__</span><span class="p">)</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="s1">&#39;glyphs&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_glyphs_from_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Finds the directory with packaged glyphs and loads them.</p>
</div>


                            </div>
                            <div id="GlyphRenderer.load_glyphs_from_path" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#GlyphRenderer.load_glyphs_from_path">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">load_glyphs_from_path</span><span class="signature">(self, path)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">load_glyphs_from_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Loads glyph information from SVG files in a directory.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        path: str</span>
<span class="sd">            Absolute file path of directory containing glyphs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">glyphs_library</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">glyph_term_map</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">infile</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;*.svg&#39;</span><span class="p">)</span> <span class="p">):</span>
            <span class="n">glyph_type</span><span class="p">,</span> <span class="n">glyph_terms</span><span class="p">,</span> <span class="n">glyph_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_glyph</span><span class="p">(</span><span class="n">infile</span><span class="p">)</span>
            <span class="n">glyphs_library</span><span class="p">[</span><span class="n">glyph_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">glyph_data</span>
            <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">glyph_terms</span><span class="p">:</span>
                <span class="n">glyph_term_map</span><span class="p">[</span><span class="n">term</span><span class="p">]</span> <span class="o">=</span> <span class="n">glyph_type</span>
        <span class="k">return</span> <span class="n">glyphs_library</span><span class="p">,</span> <span class="n">glyph_term_map</span>
</pre></div>

        </details>

            <div class="docstring"><p>Loads glyph information from SVG files in a directory.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>path</strong> (str):
Absolute file path of directory containing glyphs.</li>
</ul>
</div>


                            </div>
                            <div id="GlyphRenderer.draw_glyph" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#GlyphRenderer.draw_glyph">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">draw_glyph</span><span class="signature">(
    self,
    ax,
    glyph_type,
    position,
    orientation=&#39;forward&#39;,
    rotation=0.0,
    user_parameters=None,
    user_style=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">draw_glyph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                   <span class="n">ax</span><span class="p">,</span>
                   <span class="n">glyph_type</span><span class="p">,</span>
                   <span class="n">position</span><span class="p">,</span>
                   <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;forward&#39;</span><span class="p">,</span>
                   <span class="n">rotation</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
                   <span class="n">user_parameters</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                   <span class="n">user_style</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draws a glyph to Matploblib Axes.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ax: Axes object</span>
<span class="sd">            https://matplotlib.org/stable/api/axes_api.html</span>
<span class="sd">        glyph_type: str</span>
<span class="sd">            Name of the glyph being drawn.</span>
<span class="sd">        position: tuple</span>
<span class="sd">            Position to draw to, format (x,y).</span>
<span class="sd">        rotation: float, optional</span>
<span class="sd">            Rotation of glyph in radians.</span>
<span class="sd">        user_parameters: dict, optional</span>
<span class="sd">            Dictionary containing sizing/label parameters of glyph.</span>
<span class="sd">        user_style: dict, optional</span>
<span class="sd">            Dictionary containing style parameters of glyph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Check glyph type exists</span>
            <span class="n">glyph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">glyphs_library</span><span class="p">[</span><span class="n">glyph_type</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">class</span> <span class="nc">Invalid_glyph_type</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
                <span class="k">pass</span>
            <span class="k">raise</span> <span class="n">Invalid_glyph_type</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;&quot;&quot;&#39;{glyph_type}&#39; is not a valid glyph.&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="c1"># Collate parameters</span>
        <span class="n">merged_parameters</span><span class="p">,</span> <span class="n">label_parameters</span> <span class="o">=</span> <span class="n">collate_user_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                                                  <span class="n">glyph_type</span><span class="p">,</span>
                                                                  <span class="n">user_parameters</span><span class="p">)</span>
        <span class="c1"># Find invalid path ids</span>
        <span class="k">if</span> <span class="n">user_style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">path_ids</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">glyph</span><span class="p">[</span><span class="s1">&#39;paths&#39;</span><span class="p">]:</span>
                <span class="n">path_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">user_style</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">path_ids</span><span class="p">:</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;&quot;&quot;&#39;{key}&#39; is not a valid path ID for the &#39;{glyph_type}&#39; glyph.&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">paths_to_draw</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">path_zorders</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="n">user_parameters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;path_zorders&#39;</span> <span class="ow">in</span> <span class="n">user_parameters</span><span class="p">:</span>
                <span class="n">path_zorders</span> <span class="o">=</span> <span class="n">user_parameters</span><span class="p">[</span><span class="s1">&#39;path_zorders&#39;</span><span class="p">]</span>
        <span class="n">zorders_to_use</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">glyph</span><span class="p">[</span><span class="s1">&#39;paths&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">path</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;baseline&#39;</span><span class="p">,</span> <span class="s1">&#39;bounding-box&#39;</span><span class="p">]:</span>
                <span class="n">merged_style</span> <span class="o">=</span> <span class="n">path</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">user_style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span>
                    <span class="n">path</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span>
                    <span class="n">path</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">user_style</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="c1"># Merge the styling dictionaries (user takes preference)</span>
                    <span class="n">merged_style</span> <span class="o">=</span> <span class="n">user_style</span><span class="p">[</span><span class="n">path</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="k">for</span> <span class="n">style_el</span> <span class="ow">in</span> <span class="n">path</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="k">if</span> <span class="n">style_el</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">merged_style</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="n">merged_style</span><span class="p">[</span><span class="n">style_el</span><span class="p">]</span> <span class="o">=</span>  <span class="n">path</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">][</span><span class="n">style_el</span><span class="p">]</span>
                    <span class="k">for</span> <span class="n">style_el</span> <span class="ow">in</span> <span class="n">merged_style</span><span class="o">.</span><span class="n">copy</span><span class="p">():</span>
                        <span class="c1"># Find and remove invalid style elements</span>
                        <span class="k">if</span> <span class="n">style_el</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">path</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="n">merged_style</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">style_el</span><span class="p">)</span>
                            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;&quot;&quot;Style parameter &#39;{style_el}&#39; is not valid for &#39;{path[&quot;id&quot;]}&#39;.&quot;&quot;&quot;</span><span class="p">)</span>
                <span class="n">svg_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__eval_svg_data</span><span class="p">(</span><span class="n">path</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">],</span> <span class="n">merged_parameters</span><span class="p">)</span>
                <span class="c1"># Handle user-inputted path zorders</span>
                <span class="k">if</span> <span class="n">path_zorders</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">path</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">path_zorders</span><span class="p">:</span>
                        <span class="n">zorder</span> <span class="o">=</span> <span class="n">path_zorders</span><span class="p">[</span><span class="n">path</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]]</span>
                        <span class="n">zorders_to_use</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">zorder</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">zorders_to_use</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">zorders_to_use</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
                <span class="c1"># Call to svgpath2mpl</span>
                <span class="n">paths_to_draw</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">parse_path</span><span class="p">(</span><span class="n">svg_text</span><span class="p">),</span> <span class="n">merged_style</span><span class="p">])</span>
        <span class="c1"># Draw glyph to the axis with correct styling parameters</span>
        <span class="n">baseline_y</span> <span class="o">=</span> <span class="n">glyph</span><span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">][</span><span class="s1">&#39;baseline_y&#39;</span><span class="p">]</span>
        <span class="n">all_y_flipped_paths</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">position</span> <span class="o">=</span> <span class="n">adjust_position_for_orientation</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">orientation</span><span class="p">,</span> <span class="n">merged_parameters</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">],</span> <span class="n">rotation</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths_to_draw</span><span class="p">:</span>
            <span class="n">path_index</span> <span class="o">=</span> <span class="n">paths_to_draw</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="n">y_flipped_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__flip_position_rotate_glyph</span><span class="p">(</span><span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                                               <span class="n">baseline_y</span><span class="p">,</span>
                                                               <span class="n">position</span><span class="p">,</span>
                                                               <span class="n">orientation</span><span class="p">,</span>
                                                               <span class="n">rotation</span><span class="p">)</span>
            <span class="n">all_y_flipped_paths</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">y_flipped_path</span><span class="p">])</span>
            <span class="n">patch</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">PathPatch</span><span class="p">(</span><span class="n">y_flipped_path</span><span class="p">,</span> <span class="o">**</span><span class="n">path</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">zorder</span><span class="o">=</span><span class="n">zorders_to_use</span><span class="p">[</span><span class="n">path_index</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">patch</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">user_parameters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">label_parameters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c1"># Draw label</span>
                <span class="n">processed_label_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_label_params</span><span class="p">(</span><span class="n">label_parameters</span><span class="p">,</span>
                                                                   <span class="n">all_y_flipped_paths</span><span class="p">)</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="o">**</span><span class="n">processed_label_params</span><span class="p">,</span>
                        <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
                        <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
        <span class="n">glyph_bounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bounds_from_paths_to_draw</span><span class="p">(</span><span class="n">all_y_flipped_paths</span><span class="p">)</span>
        <span class="n">position</span> <span class="o">=</span> <span class="n">adjust_position_for_orientation</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">orientation</span><span class="p">,</span> <span class="n">merged_parameters</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">],</span> <span class="n">rotation</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">glyph_bounds</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_baseline_end</span><span class="p">(</span><span class="n">glyph_type</span><span class="p">,</span>
                                      <span class="n">position</span><span class="p">,</span>
                                      <span class="n">orientation</span><span class="p">,</span>
                                      <span class="n">rotation</span><span class="o">=</span><span class="n">rotation</span><span class="p">,</span>
                                      <span class="n">user_parameters</span><span class="o">=</span><span class="n">user_parameters</span><span class="p">))</span>
</pre></div>

        </details>

            <div class="docstring"><p>Draws a glyph to Matploblib Axes.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>ax</strong> (Axes object):
https://matplotlib.org/stable/api/axes_api.html</li>
<li><strong>glyph_type</strong> (str):
Name of the glyph being drawn.</li>
<li><strong>position</strong> (tuple):
Position to draw to, format (x,y).</li>
<li><strong>rotation</strong> (float, optional):
Rotation of glyph in radians.</li>
<li><strong>user_parameters</strong> (dict, optional):
Dictionary containing sizing/label parameters of glyph.</li>
<li><strong>user_style</strong> (dict, optional):
Dictionary containing style parameters of glyph.</li>
</ul>
</div>


                            </div>
                            <div id="GlyphRenderer.process_label_params" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#GlyphRenderer.process_label_params">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">process_label_params</span><span class="signature">(self, label_parameters, paths)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">process_label_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label_parameters</span><span class="p">,</span> <span class="n">paths</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Formats and completes label parameters.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        label_parameters: dict</span>
<span class="sd">            Dictionary containing user-inputted</span>
<span class="sd">            label parameters, may contain:</span>
<span class="sd">                color: tuple</span>
<span class="sd">                    Label text colour, format</span>
<span class="sd">                    (r,g,b).</span>
<span class="sd">                xy_skew: tuple</span>
<span class="sd">                    Skew of label from centroid,</span>
<span class="sd">                    format (x,y).</span>
<span class="sd">                rotation: float</span>
<span class="sd">                    Rotation of label text in</span>
<span class="sd">                    Radians.</span>
<span class="sd">                userfont: dict</span>
<span class="sd">                    Dictionary containing Matplotlib</span>
<span class="sd">                    font properties key-value pairs:</span>
<span class="sd">                    https://matplotlib.org/stable/_modules/matplotlib/font_manager.html#FontProperties.</span>
<span class="sd">        paths: list</span>
<span class="sd">            List of paths composing the</span>
<span class="sd">            to-be-labelled glyph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">color</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">xy_skew</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">finalfont</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">FontProperties</span><span class="p">()</span>
        <span class="c1"># Collate parameters (user parameters take priority)</span>
        <span class="k">if</span> <span class="s1">&#39;color&#39;</span> <span class="ow">in</span> <span class="n">label_parameters</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">label_parameters</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;xy_skew&#39;</span> <span class="ow">in</span> <span class="n">label_parameters</span><span class="p">:</span>
            <span class="n">xy_skew</span> <span class="o">=</span> <span class="n">label_parameters</span><span class="p">[</span><span class="s1">&#39;xy_skew&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;rotation&#39;</span> <span class="ow">in</span> <span class="n">label_parameters</span><span class="p">:</span>
            <span class="c1"># Convert to degrees</span>
            <span class="n">rotation</span> <span class="o">=</span> <span class="p">(</span><span class="mi">180</span><span class="o">/</span><span class="n">pi</span><span class="p">)</span> <span class="o">*</span> <span class="n">label_parameters</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;userfont&#39;</span> <span class="ow">in</span> <span class="n">label_parameters</span><span class="p">:</span>
            <span class="n">finalfont</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">FontProperties</span><span class="p">(</span><span class="o">**</span><span class="n">label_parameters</span><span class="p">[</span><span class="s1">&#39;userfont&#39;</span><span class="p">])</span>
        <span class="n">all_path_vertices</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
            <span class="c1"># Find vertices of each path</span>
            <span class="n">path_vertices</span> <span class="o">=</span> <span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">vertices</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">all_path_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path_vertices</span><span class="p">)</span>
        <span class="n">textpos_x</span><span class="p">,</span> <span class="n">textpos_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_centroid_of_paths</span><span class="p">(</span><span class="n">all_path_vertices</span><span class="p">,</span> <span class="n">xy_skew</span><span class="o">=</span><span class="n">xy_skew</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="n">textpos_x</span><span class="p">,</span>
                <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="n">textpos_y</span><span class="p">,</span>
                <span class="s1">&#39;s&#39;</span><span class="p">:</span><span class="n">label_parameters</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">],</span>
                <span class="s1">&#39;color&#39;</span><span class="p">:</span><span class="n">color</span><span class="p">,</span>
                <span class="s1">&#39;fontproperties&#39;</span><span class="p">:</span><span class="n">finalfont</span><span class="p">,</span>
                <span class="s1">&#39;rotation&#39;</span><span class="p">:</span><span class="n">rotation</span><span class="p">}</span>
</pre></div>

        </details>

            <div class="docstring"><p>Formats and completes label parameters.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>label_parameters</strong> (dict):
Dictionary containing user-inputted
label parameters, may contain:
   color: tuple
       Label text colour, format
       (r,g,b).
   xy_skew: tuple
       Skew of label from centroid,
       format (x,y).
   rotation: float
       Rotation of label text in
       Radians.
   userfont: dict
       Dictionary containing Matplotlib
       font properties key-value pairs:
       https://matplotlib.org/stable/_modules/matplotlib/font_manager.html#FontProperties.</li>
<li><strong>paths</strong> (list):
List of paths composing the
to-be-labelled glyph.</li>
</ul>
</div>


                            </div>
                            <div id="GlyphRenderer.calculate_centroid_of_paths" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#GlyphRenderer.calculate_centroid_of_paths">#&nbsp;&nbsp</a>

                <div class="decorator">@staticmethod</div>

            <span class="def">def</span>
            <span class="name">calculate_centroid_of_paths</span><span class="signature">(all_path_vertices, xy_skew=(0, 0))</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">calculate_centroid_of_paths</span><span class="p">(</span><span class="n">all_path_vertices</span><span class="p">,</span> <span class="n">xy_skew</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)):</span>
        <span class="sd">&quot;&quot;&quot;Calculates central point of paths provided.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        all_path_vertices: list</span>
<span class="sd">            Contains vertices of every path.</span>
<span class="sd">        xy_skew: tuple, optional</span>
<span class="sd">            Skew of centroid in x and y</span>
<span class="sd">            directions, format (x,y).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">vertices</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_path_vertices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">vertices</span> <span class="o">=</span> <span class="n">all_path_vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">vertices_to_array</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">path_vertices</span> <span class="ow">in</span> <span class="n">all_path_vertices</span><span class="p">:</span>
                <span class="c1"># Find centroid of each path</span>
                <span class="n">length</span> <span class="o">=</span> <span class="n">path_vertices</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">sum_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">path_vertices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
                <span class="n">sum_y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">path_vertices</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>
                <span class="n">vertices_to_array</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">sum_x</span><span class="o">/</span><span class="n">length</span><span class="p">,</span> <span class="n">sum_y</span><span class="o">/</span><span class="n">length</span><span class="p">])</span>
            <span class="n">vertices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">vertices_to_array</span><span class="p">)</span>
        <span class="c1"># Find centroid of single path/centroid of multiple centroids</span>
        <span class="n">length</span> <span class="o">=</span> <span class="n">vertices</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">sum_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">vertices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="n">sum_y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">vertices</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="c1"># Collate original and relative values</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">xy_skew</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">sum_x</span><span class="o">/</span><span class="n">length</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">xy_skew</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">sum_y</span><span class="o">/</span><span class="n">length</span>
        <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>
</pre></div>

        </details>

            <div class="docstring"><p>Calculates central point of paths provided.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>all_path_vertices</strong> (list):
Contains vertices of every path.</li>
<li><strong>xy_skew</strong> (tuple, optional):
Skew of centroid in x and y
directions, format (x,y).</li>
</ul>
</div>


                            </div>
                            <div id="GlyphRenderer.get_glyph_bounds" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#GlyphRenderer.get_glyph_bounds">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_glyph_bounds</span><span class="signature">(self, glyph_type, position, rotation=0.0, user_parameters=None)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_glyph_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">glyph_type</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">user_parameters</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns bounds of glyph.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        glyph_type: str</span>
<span class="sd">            Type of glyph.</span>
<span class="sd">        position: tuple</span>
<span class="sd">            Position of glyph, format (x,y).</span>
<span class="sd">        rotation: float, optional</span>
<span class="sd">            Rotation of glyph in radians.</span>
<span class="sd">        user_parameters: dict, optional</span>
<span class="sd">            Dictionary containing sizing/label parameters of glyph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_glyph</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">glyph_type</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="n">rotation</span><span class="p">,</span> <span class="n">user_parameters</span><span class="o">=</span><span class="n">user_parameters</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Returns bounds of glyph.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>glyph_type</strong> (str):
Type of glyph.</li>
<li><strong>position</strong> (tuple):
Position of glyph, format (x,y).</li>
<li><strong>rotation</strong> (float, optional):
Rotation of glyph in radians.</li>
<li><strong>user_parameters</strong> (dict, optional):
Dictionary containing sizing/label parameters of glyph.</li>
</ul>
</div>


                            </div>
                            <div id="GlyphRenderer.get_baseline_end" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#GlyphRenderer.get_baseline_end">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_baseline_end</span><span class="signature">(
    self,
    glyph_type,
    position,
    orientation,
    rotation=0.0,
    user_parameters=None
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_baseline_end</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">glyph_type</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">orientation</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">user_parameters</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Finds the point following a glyph from which the baseline should end.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        glyph_type: str</span>
<span class="sd">            Type of glyph.</span>
<span class="sd">        position: tuple</span>
<span class="sd">            Position of glyph, format (x,y).</span>
<span class="sd">        rotation: float, optional</span>
<span class="sd">            Rotation of glyph in radians.</span>
<span class="sd">        user_parameters: dict, optional</span>
<span class="sd">            Dictionary containing sizing/label parameters of glyph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">glyph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">glyphs_library</span><span class="p">[</span><span class="n">glyph_type</span><span class="p">]</span>
        <span class="n">merged_parameters</span> <span class="o">=</span> <span class="n">glyph</span><span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">user_parameters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c1"># Collate parameters (user parameters take priority)</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">user_parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">merged_parameters</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_parameters</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="n">baseline_path</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">glyph</span><span class="p">[</span><span class="s1">&#39;paths&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">path</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;baseline&#39;</span><span class="p">:</span>
                <span class="n">svg_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__eval_svg_data</span><span class="p">(</span><span class="n">path</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">],</span> <span class="n">merged_parameters</span><span class="p">)</span>
                <span class="c1"># Call to svgpath2mpl</span>
                <span class="n">baseline_path</span> <span class="o">=</span> <span class="n">parse_path</span><span class="p">(</span><span class="n">svg_text</span><span class="p">)</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="n">baseline_path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c1"># Draw glyph to the axis with correct styling parameters</span>
            <span class="n">baseline_y</span> <span class="o">=</span> <span class="n">glyph</span><span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">][</span><span class="s1">&#39;baseline_y&#39;</span><span class="p">]</span>
            <span class="n">y_flipped_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__flip_position_rotate_glyph</span><span class="p">(</span><span class="n">baseline_path</span><span class="p">,</span>
                                                               <span class="n">baseline_y</span><span class="p">,</span>
                                                               <span class="n">position</span><span class="p">,</span>
                                                               <span class="n">orientation</span><span class="p">,</span>
                                                               <span class="n">rotation</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">y_flipped_path</span><span class="o">.</span><span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">y_flipped_path</span><span class="o">.</span><span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>

        <span class="k">return</span> <span class="bp">None</span>
</pre></div>

        </details>

            <div class="docstring"><p>Finds the point following a glyph from which the baseline should end.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>glyph_type</strong> (str):
Type of glyph.</li>
<li><strong>position</strong> (tuple):
Position of glyph, format (x,y).</li>
<li><strong>rotation</strong> (float, optional):
Rotation of glyph in radians.</li>
<li><strong>user_parameters</strong> (dict, optional):
Dictionary containing sizing/label parameters of glyph.</li>
</ul>
</div>


                            </div>
                </section>
                <section id="find_bound_of_bounds">
                            <div class="attr function"><a class="headerlink" href="#find_bound_of_bounds">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">find_bound_of_bounds</span><span class="signature">(bounds_list)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">find_bound_of_bounds</span><span class="p">(</span><span class="n">bounds_list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Find the bounding box of a list of bounds.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    bounds_list: list</span>
<span class="sd">        List containing bounds to find bounding box of.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Set initial guess</span>
    <span class="n">x_min</span> <span class="o">=</span> <span class="n">bounds_list</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">y_min</span> <span class="o">=</span> <span class="n">bounds_list</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">x_max</span> <span class="o">=</span> <span class="n">bounds_list</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">y_max</span> <span class="o">=</span> <span class="n">bounds_list</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
    <span class="c1"># Find min and max x/y values</span>
    <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bounds_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">x_min</span><span class="p">:</span>
            <span class="n">x_min</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">y_min</span><span class="p">:</span>
            <span class="n">y_min</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">x_max</span><span class="p">:</span>
            <span class="n">x_max</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">y_max</span><span class="p">:</span>
            <span class="n">y_max</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="p">[(</span><span class="n">x_min</span><span class="p">,</span> <span class="n">y_min</span><span class="p">),</span> <span class="p">(</span><span class="n">x_max</span><span class="p">,</span> <span class="n">y_max</span><span class="p">)]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Find the bounding box of a list of bounds.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>bounds_list</strong> (list):
List containing bounds to find bounding box of.</li>
</ul>
</div>


                </section>
                <section id="Construct">
                                <div class="attr class">
        <a class="headerlink" href="#Construct">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">Construct</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Construct</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;A modifiable construct consisting of</span>
<span class="sd">       SBOL glyphs and interactions.</span>

<span class="sd">       NOTE: Attributes below lacking</span>
<span class="sd">       description are documented in the</span>
<span class="sd">       __init__ docstring of this class.</span>

<span class="sd">       Attributes</span>
<span class="sd">       ----------</span>
<span class="sd">       part_list: list</span>
<span class="sd">       renderer: object</span>
<span class="sd">       padding: float</span>
<span class="sd">       gapsize: float</span>
<span class="sd">       fig: object</span>
<span class="sd">       ax: object</span>
<span class="sd">       start_position: tuple</span>
<span class="sd">       additional_bounds_list: list</span>
<span class="sd">       interaction_list: list</span>
<span class="sd">       rotation: float</span>
<span class="sd">       modify_axis: bool</span>
<span class="sd">       bounds: tuple</span>
<span class="sd">           Represents the bounds of the</span>
<span class="sd">           construct, formatted as ((x1,y1), (x2,y2))</span>
<span class="sd">           where (x1,y1) are the coordinates of the</span>
<span class="sd">           lower left vertex and (x2, y2) are the</span>
<span class="sd">           coordinates of the top right vertex.</span>
<span class="sd">    &quot;&quot;&quot;</span>


    <span class="k">def</span> <span class="fm">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                  <span class="n">part_list</span><span class="p">,</span>
                  <span class="n">renderer</span><span class="p">,</span>
                  <span class="n">padding</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
                  <span class="n">gapsize</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">,</span>
                  <span class="n">fig</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                  <span class="n">ax</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                  <span class="n">start_position</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                  <span class="n">additional_bounds_list</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                  <span class="n">interaction_list</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                  <span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
                  <span class="n">modify_axis</span> <span class="o">=</span> <span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        part_list: list</span>
<span class="sd">            Contains all glyphs in the</span>
<span class="sd">            construct. Each glyph is represented</span>
<span class="sd">            by a list containing three elements:</span>
<span class="sd">            [0] Glyph type, represented by a string,</span>
<span class="sd">            [1] the user_parameters dictionary, and</span>
<span class="sd">            [2] the style_parameters dictionary.</span>
<span class="sd">        renderer: object</span>
<span class="sd">            ParaSB0Lv GlyphRenderer object defined</span>
<span class="sd">            above.</span>
<span class="sd">        padding: float, optional</span>
<span class="sd">            Scale of the space added to axis limits.</span>
<span class="sd">        gapsize: float, optional</span>
<span class="sd">            Scale of the gaps between parts.</span>
<span class="sd">        fig: object, optional</span>
<span class="sd">            Matplotlib Figure object.</span>
<span class="sd">        ax: object, optional</span>
<span class="sd">            Matplotlib Axes object.</span>
<span class="sd">        start_position: tuple, optional</span>
<span class="sd">            Represents the origin of the construct,</span>
<span class="sd">            format (x, y).</span>
<span class="sd">        additional_bounds_list: list, optional</span>
<span class="sd">            Contains additional bounds to be</span>
<span class="sd">            incorporated into the construct</span>
<span class="sd">            bounds when using self.draw()</span>
<span class="sd">            and self.update_bounds().</span>
<span class="sd">        interaction_list: list, optional</span>
<span class="sd">            Specifies interactions between</span>
<span class="sd">            construct glyphs. Each interaction</span>
<span class="sd">            is represented by a list containing</span>
<span class="sd">            four elements: [0] The origin glyph</span>
<span class="sd">            of the interaction, represented by</span>
<span class="sd">            the glyph&#39;s index, [1] the receiving</span>
<span class="sd">            glyph of the interaction, represented</span>
<span class="sd">            similarly, [2] the interaction type</span>
<span class="sd">            string, and [3] the interaction_parameters</span>
<span class="sd">            dictionary.</span>
<span class="sd">        rotation: float, optional</span>
<span class="sd">            Float representing the rotation of</span>
<span class="sd">            the construct in radians.</span>
<span class="sd">        modify_axis: bool, optional</span>
<span class="sd">            Enable/disable the automatic resizing and</span>
<span class="sd">            modification of the Matplotlib Axes object - useful</span>
<span class="sd">            when wanting to modify it manually</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">renderer</span> <span class="o">=</span> <span class="n">renderer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">padding</span> <span class="o">=</span> <span class="n">padding</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gapsize</span> <span class="o">=</span> <span class="n">gapsize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fig</span> <span class="o">=</span> <span class="n">fig</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span> <span class="ow">is</span>  <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_position</span> <span class="o">=</span> <span class="n">start_position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">additional_bounds_list</span> <span class="o">=</span> <span class="n">additional_bounds_list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modify_axis</span> <span class="o">=</span> <span class="n">modify_axis</span>

        <span class="c1"># Data structure</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">part_list</span> <span class="o">=</span> <span class="n">part_list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interaction_list</span> <span class="o">=</span> <span class="n">interaction_list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rotation</span> <span class="o">=</span> <span class="n">rotation</span> <span class="c1"># Radians</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_bounds</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">reverse_interactions</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reverses the side interactions are drawn on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">interaction_list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">interaction</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">interaction_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">if</span> <span class="s1">&#39;direction&#39;</span> <span class="ow">in</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;forward&#39;</span><span class="p">:</span>
                        <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;reverse&#39;</span>
                    <span class="k">elif</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;reverse&#39;</span><span class="p">:</span>
                        <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;forward&#39;</span>
                <span class="k">if</span> <span class="s1">&#39;direction&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                    <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;reverse&#39;</span>


    <span class="k">def</span> <span class="nf">update_bounds</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Updates the bounds of the constuct.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">draw_for_bounds</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)[</span><span class="mi">4</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span> <span class="o">=</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>


    <span class="k">def</span> <span class="nf">draw</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">draw_for_bounds</span> <span class="o">=</span> <span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draws the construct using Matplotlib.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        draw_for_bounds: bool, optional</span>
<span class="sd">            Indicates if the construct is being</span>
<span class="sd">            drawn to update the self.bounds</span>
<span class="sd">            attribute.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Draw the construct</span>
        <span class="n">bounds_to_add</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">additional_bounds_list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c1"># Include additional bounds</span>
            <span class="k">for</span> <span class="n">additional_bounds</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">additional_bounds_list</span><span class="p">:</span>
                <span class="n">bounds_to_add</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">additional_bounds</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">draw_for_bounds</span> <span class="ow">is</span> <span class="bp">False</span><span class="p">:</span>
            <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">baseline_start</span><span class="p">,</span> <span class="n">baseline_end</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="n">render_part_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">part_list</span><span class="p">,</span>
                                                                             <span class="bp">self</span><span class="o">.</span><span class="n">renderer</span><span class="p">,</span>
                                                                             <span class="n">padding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">padding</span><span class="p">,</span>
                                                                             <span class="n">gapsize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gapsize</span><span class="p">,</span>
                                                                             <span class="n">fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="p">,</span>
                                                                             <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">,</span>
                                                                             <span class="n">start_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_position</span><span class="p">,</span>
                                                                             <span class="n">additional_bounds_list</span> <span class="o">=</span> <span class="n">bounds_to_add</span><span class="p">,</span>
                                                                             <span class="n">interaction_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interaction_list</span><span class="p">,</span>
                                                                             <span class="n">rotation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotation</span><span class="p">,</span>
                                                                             <span class="n">modify_axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modify_axis</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">baseline_start</span><span class="p">,</span> <span class="n">baseline_end</span><span class="p">,</span> <span class="n">bounds</span>
        <span class="k">elif</span> <span class="n">draw_for_bounds</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="c1"># Temporary rendering pathway to generate bounds</span>
            <span class="n">temp_fig</span><span class="p">,</span> <span class="n">temp_ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
            <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">baseline_start</span><span class="p">,</span> <span class="n">baseline_end</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="n">render_part_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">part_list</span><span class="p">,</span>
                                                                             <span class="bp">self</span><span class="o">.</span><span class="n">renderer</span><span class="p">,</span>
                                                                             <span class="n">padding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">padding</span><span class="p">,</span>
                                                                             <span class="n">gapsize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gapsize</span><span class="p">,</span>
                                                                             <span class="n">fig</span> <span class="o">=</span> <span class="n">temp_fig</span><span class="p">,</span>
                                                                             <span class="n">ax</span> <span class="o">=</span> <span class="n">temp_ax</span><span class="p">,</span>
                                                                             <span class="n">start_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_position</span><span class="p">,</span>
                                                                             <span class="n">additional_bounds_list</span> <span class="o">=</span> <span class="n">bounds_to_add</span><span class="p">,</span>
                                                                             <span class="n">interaction_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interaction_list</span><span class="p">,</span>
                                                                             <span class="n">rotation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotation</span><span class="p">,</span>
                                                                             <span class="n">modify_axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modify_axis</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">baseline_start</span><span class="p">,</span> <span class="n">baseline_end</span><span class="p">,</span> <span class="n">bounds</span>
</pre></div>

        </details>

            <div class="docstring"><p>A modifiable construct consisting of
SBOL glyphs and interactions.</p>

<p>NOTE: Attributes below lacking
description are documented in the
__init__ docstring of this class.</p>

<h6 id="attributes">Attributes</h6>

<ul>
<li><p><strong>part_list</strong> (list):</p></li>
<li><p><strong>renderer</strong> (object):</p></li>
<li><p><strong>padding</strong> (float):</p></li>
<li><p><strong>gapsize</strong> (float):</p></li>
<li><p><strong>fig</strong> (object):</p></li>
<li><p><strong>ax</strong> (object):</p></li>
<li><p><strong>start_position</strong> (tuple):</p></li>
<li><p><strong>additional_bounds_list</strong> (list):</p></li>
<li><p><strong>interaction_list</strong> (list):</p></li>
<li><p><strong>rotation</strong> (float):</p></li>
<li><p><strong>modify_axis</strong> (bool):</p></li>
<li><p><strong>bounds</strong> (tuple):
Represents the bounds of the
construct, formatted as ((x1,y1), (x2,y2))
where (x1,y1) are the coordinates of the
lower left vertex and (x2, y2) are the
coordinates of the top right vertex.</p></li>
</ul>
</div>


                            <div id="Construct.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Construct.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">Construct</span><span class="signature">(
    part_list,
    renderer,
    padding=0.2,
    gapsize=3.0,
    fig=None,
    ax=None,
    start_position=(0, 0),
    additional_bounds_list=None,
    interaction_list=None,
    rotation=0.0,
    modify_axis=True
)</span>
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                  <span class="n">part_list</span><span class="p">,</span>
                  <span class="n">renderer</span><span class="p">,</span>
                  <span class="n">padding</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
                  <span class="n">gapsize</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">,</span>
                  <span class="n">fig</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                  <span class="n">ax</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                  <span class="n">start_position</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                  <span class="n">additional_bounds_list</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                  <span class="n">interaction_list</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                  <span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
                  <span class="n">modify_axis</span> <span class="o">=</span> <span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        part_list: list</span>
<span class="sd">            Contains all glyphs in the</span>
<span class="sd">            construct. Each glyph is represented</span>
<span class="sd">            by a list containing three elements:</span>
<span class="sd">            [0] Glyph type, represented by a string,</span>
<span class="sd">            [1] the user_parameters dictionary, and</span>
<span class="sd">            [2] the style_parameters dictionary.</span>
<span class="sd">        renderer: object</span>
<span class="sd">            ParaSB0Lv GlyphRenderer object defined</span>
<span class="sd">            above.</span>
<span class="sd">        padding: float, optional</span>
<span class="sd">            Scale of the space added to axis limits.</span>
<span class="sd">        gapsize: float, optional</span>
<span class="sd">            Scale of the gaps between parts.</span>
<span class="sd">        fig: object, optional</span>
<span class="sd">            Matplotlib Figure object.</span>
<span class="sd">        ax: object, optional</span>
<span class="sd">            Matplotlib Axes object.</span>
<span class="sd">        start_position: tuple, optional</span>
<span class="sd">            Represents the origin of the construct,</span>
<span class="sd">            format (x, y).</span>
<span class="sd">        additional_bounds_list: list, optional</span>
<span class="sd">            Contains additional bounds to be</span>
<span class="sd">            incorporated into the construct</span>
<span class="sd">            bounds when using self.draw()</span>
<span class="sd">            and self.update_bounds().</span>
<span class="sd">        interaction_list: list, optional</span>
<span class="sd">            Specifies interactions between</span>
<span class="sd">            construct glyphs. Each interaction</span>
<span class="sd">            is represented by a list containing</span>
<span class="sd">            four elements: [0] The origin glyph</span>
<span class="sd">            of the interaction, represented by</span>
<span class="sd">            the glyph&#39;s index, [1] the receiving</span>
<span class="sd">            glyph of the interaction, represented</span>
<span class="sd">            similarly, [2] the interaction type</span>
<span class="sd">            string, and [3] the interaction_parameters</span>
<span class="sd">            dictionary.</span>
<span class="sd">        rotation: float, optional</span>
<span class="sd">            Float representing the rotation of</span>
<span class="sd">            the construct in radians.</span>
<span class="sd">        modify_axis: bool, optional</span>
<span class="sd">            Enable/disable the automatic resizing and</span>
<span class="sd">            modification of the Matplotlib Axes object - useful</span>
<span class="sd">            when wanting to modify it manually</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">renderer</span> <span class="o">=</span> <span class="n">renderer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">padding</span> <span class="o">=</span> <span class="n">padding</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gapsize</span> <span class="o">=</span> <span class="n">gapsize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fig</span> <span class="o">=</span> <span class="n">fig</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span> <span class="ow">is</span>  <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_position</span> <span class="o">=</span> <span class="n">start_position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">additional_bounds_list</span> <span class="o">=</span> <span class="n">additional_bounds_list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modify_axis</span> <span class="o">=</span> <span class="n">modify_axis</span>

        <span class="c1"># Data structure</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">part_list</span> <span class="o">=</span> <span class="n">part_list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interaction_list</span> <span class="o">=</span> <span class="n">interaction_list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rotation</span> <span class="o">=</span> <span class="n">rotation</span> <span class="c1"># Radians</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_bounds</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><h6 id="parameters">Parameters</h6>

<ul>
<li><strong>part_list</strong> (list):
Contains all glyphs in the
construct. Each glyph is represented
by a list containing three elements:
[0] Glyph type, represented by a string,
[1] the user_parameters dictionary, and
[2] the style_parameters dictionary.</li>
<li><strong>renderer</strong> (object):
ParaSB0Lv GlyphRenderer object defined
above.</li>
<li><strong>padding</strong> (float, optional):
Scale of the space added to axis limits.</li>
<li><strong>gapsize</strong> (float, optional):
Scale of the gaps between parts.</li>
<li><strong>fig</strong> (object, optional):
Matplotlib Figure object.</li>
<li><strong>ax</strong> (object, optional):
Matplotlib Axes object.</li>
<li><strong>start_position</strong> (tuple, optional):
Represents the origin of the construct,
format (x, y).</li>
<li><strong>additional_bounds_list</strong> (list, optional):
Contains additional bounds to be
incorporated into the construct
bounds when using self.draw()
and self.update_bounds().</li>
<li><strong>interaction_list</strong> (list, optional):
Specifies interactions between
construct glyphs. Each interaction
is represented by a list containing
four elements: [0] The origin glyph
of the interaction, represented by
the glyph's index, [1] the receiving
glyph of the interaction, represented
similarly, [2] the interaction type
string, and [3] the interaction_parameters
dictionary.</li>
<li><strong>rotation</strong> (float, optional):
Float representing the rotation of
the construct in radians.</li>
<li><strong>modify_axis</strong> (bool, optional):
Enable/disable the automatic resizing and
modification of the Matplotlib Axes object - useful
when wanting to modify it manually</li>
</ul>
</div>


                            </div>
                            <div id="Construct.reverse_interactions" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Construct.reverse_interactions">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">reverse_interactions</span><span class="signature">(self)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">reverse_interactions</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reverses the side interactions are drawn on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">interaction_list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">interaction</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">interaction_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">if</span> <span class="s1">&#39;direction&#39;</span> <span class="ow">in</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;forward&#39;</span><span class="p">:</span>
                        <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;reverse&#39;</span>
                    <span class="k">elif</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;reverse&#39;</span><span class="p">:</span>
                        <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;forward&#39;</span>
                <span class="k">if</span> <span class="s1">&#39;direction&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                    <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;reverse&#39;</span>
</pre></div>

        </details>

            <div class="docstring"><p>Reverses the side interactions are drawn on.</p>
</div>


                            </div>
                            <div id="Construct.update_bounds" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Construct.update_bounds">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">update_bounds</span><span class="signature">(self)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">update_bounds</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Updates the bounds of the constuct.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">draw_for_bounds</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)[</span><span class="mi">4</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span> <span class="o">=</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</pre></div>

        </details>

            <div class="docstring"><p>Updates the bounds of the constuct.</p>
</div>


                            </div>
                            <div id="Construct.draw" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Construct.draw">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">draw</span><span class="signature">(self, draw_for_bounds=False)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">draw</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">draw_for_bounds</span> <span class="o">=</span> <span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draws the construct using Matplotlib.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        draw_for_bounds: bool, optional</span>
<span class="sd">            Indicates if the construct is being</span>
<span class="sd">            drawn to update the self.bounds</span>
<span class="sd">            attribute.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Draw the construct</span>
        <span class="n">bounds_to_add</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">additional_bounds_list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c1"># Include additional bounds</span>
            <span class="k">for</span> <span class="n">additional_bounds</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">additional_bounds_list</span><span class="p">:</span>
                <span class="n">bounds_to_add</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">additional_bounds</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">draw_for_bounds</span> <span class="ow">is</span> <span class="bp">False</span><span class="p">:</span>
            <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">baseline_start</span><span class="p">,</span> <span class="n">baseline_end</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="n">render_part_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">part_list</span><span class="p">,</span>
                                                                             <span class="bp">self</span><span class="o">.</span><span class="n">renderer</span><span class="p">,</span>
                                                                             <span class="n">padding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">padding</span><span class="p">,</span>
                                                                             <span class="n">gapsize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gapsize</span><span class="p">,</span>
                                                                             <span class="n">fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="p">,</span>
                                                                             <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">,</span>
                                                                             <span class="n">start_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_position</span><span class="p">,</span>
                                                                             <span class="n">additional_bounds_list</span> <span class="o">=</span> <span class="n">bounds_to_add</span><span class="p">,</span>
                                                                             <span class="n">interaction_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interaction_list</span><span class="p">,</span>
                                                                             <span class="n">rotation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotation</span><span class="p">,</span>
                                                                             <span class="n">modify_axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modify_axis</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">baseline_start</span><span class="p">,</span> <span class="n">baseline_end</span><span class="p">,</span> <span class="n">bounds</span>
        <span class="k">elif</span> <span class="n">draw_for_bounds</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="c1"># Temporary rendering pathway to generate bounds</span>
            <span class="n">temp_fig</span><span class="p">,</span> <span class="n">temp_ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
            <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">baseline_start</span><span class="p">,</span> <span class="n">baseline_end</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="n">render_part_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">part_list</span><span class="p">,</span>
                                                                             <span class="bp">self</span><span class="o">.</span><span class="n">renderer</span><span class="p">,</span>
                                                                             <span class="n">padding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">padding</span><span class="p">,</span>
                                                                             <span class="n">gapsize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gapsize</span><span class="p">,</span>
                                                                             <span class="n">fig</span> <span class="o">=</span> <span class="n">temp_fig</span><span class="p">,</span>
                                                                             <span class="n">ax</span> <span class="o">=</span> <span class="n">temp_ax</span><span class="p">,</span>
                                                                             <span class="n">start_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_position</span><span class="p">,</span>
                                                                             <span class="n">additional_bounds_list</span> <span class="o">=</span> <span class="n">bounds_to_add</span><span class="p">,</span>
                                                                             <span class="n">interaction_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interaction_list</span><span class="p">,</span>
                                                                             <span class="n">rotation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotation</span><span class="p">,</span>
                                                                             <span class="n">modify_axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modify_axis</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">baseline_start</span><span class="p">,</span> <span class="n">baseline_end</span><span class="p">,</span> <span class="n">bounds</span>
</pre></div>

        </details>

            <div class="docstring"><p>Draws the construct using Matplotlib.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>draw_for_bounds</strong> (bool, optional):
Indicates if the construct is being
drawn to update the self.bounds
attribute.</li>
</ul>
</div>


                            </div>
                </section>
                <section id="render_part_list">
                            <div class="attr function"><a class="headerlink" href="#render_part_list">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">render_part_list</span><span class="signature">(
    part_list,
    renderer,
    padding=0.2,
    gapsize=3.0,
    fig=None,
    ax=None,
    start_position=(0, 0),
    additional_bounds_list=None,
    interaction_list=None,
    rotation=0.0,
    modify_axis=1
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">render_part_list</span> <span class="p">(</span><span class="n">part_list</span><span class="p">,</span>
                      <span class="n">renderer</span><span class="p">,</span>
                      <span class="n">padding</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
                      <span class="n">gapsize</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">,</span>
                      <span class="n">fig</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                      <span class="n">ax</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                      <span class="n">start_position</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                      <span class="n">additional_bounds_list</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                      <span class="n">interaction_list</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                      <span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
                      <span class="n">modify_axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Renders multiple glyphs in sequence.</span>

<span class="sd">    NOTE: See parameters of the __init__</span>
<span class="sd">    method within the Construct class</span>
<span class="sd">    for parameter descriptions.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    part_list: list</span>
<span class="sd">    renderer: object</span>
<span class="sd">    padding: float, optional</span>
<span class="sd">    gapsize: float, optional</span>
<span class="sd">    fig: object, optional</span>
<span class="sd">    ax: object, optional</span>
<span class="sd">    start_position: tuple, optional</span>
<span class="sd">    additional_bounds_list: list, optional</span>
<span class="sd">    interaction_list: list, optional</span>
<span class="sd">    rotation: float, optional</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fig</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">ax</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">modify_axis</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mf">0.99</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mf">0.99</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>
    <span class="n">part_position</span> <span class="o">=</span> <span class="n">start_position</span>
    <span class="n">bounds_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">part_list</span><span class="p">:</span>
        <span class="n">orientation</span> <span class="o">=</span> <span class="n">part</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">user_parameters</span> <span class="o">=</span> <span class="n">part</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="c1"># Pre-draw part_position adjustments (vertical_offset and orientation).</span>
        <span class="k">if</span> <span class="n">user_parameters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;vertical_offset&#39;</span> <span class="ow">in</span> <span class="n">user_parameters</span><span class="p">:</span>
                <span class="n">bearing</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="mf">3.142</span> <span class="o">-</span> <span class="n">rotation</span>
                <span class="n">part_position</span> <span class="o">=</span> <span class="p">(</span><span class="n">part_position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">user_parameters</span><span class="p">[</span><span class="s1">&#39;vertical_offset&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">bearing</span><span class="p">),</span>
                                 <span class="n">part_position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">user_parameters</span><span class="p">[</span><span class="s1">&#39;vertical_offset&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">bearing</span><span class="p">))</span>
        <span class="c1"># Draw the part</span>
        <span class="n">bounds</span><span class="p">,</span> <span class="n">part_position</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">draw_glyph</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span>
                                                    <span class="n">part</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                                    <span class="n">part_position</span><span class="p">,</span>
                                                    <span class="n">orientation</span><span class="o">=</span><span class="n">orientation</span><span class="p">,</span>
                                                    <span class="n">rotation</span><span class="o">=</span><span class="n">rotation</span><span class="p">,</span>
                                                    <span class="n">user_parameters</span><span class="o">=</span><span class="n">user_parameters</span><span class="p">,</span>
                                                    <span class="n">user_style</span><span class="o">=</span><span class="n">part</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="c1"># Post-draw part_position adjustments (vertical_offset, orientation, and gapsize)</span>
        <span class="k">if</span> <span class="n">user_parameters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;vertical_offset&#39;</span> <span class="ow">in</span> <span class="n">user_parameters</span><span class="p">:</span>
                <span class="n">bearing</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="mf">3.142</span> <span class="o">-</span> <span class="n">rotation</span>
                <span class="n">part_position</span> <span class="o">=</span> <span class="p">(</span><span class="n">part_position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="n">user_parameters</span><span class="p">[</span><span class="s1">&#39;vertical_offset&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">bearing</span><span class="p">),</span>
                                 <span class="n">part_position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="n">user_parameters</span><span class="p">[</span><span class="s1">&#39;vertical_offset&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">bearing</span><span class="p">))</span>
            <span class="k">if</span> <span class="s1">&#39;trailing_gap_skew&#39;</span> <span class="ow">in</span> <span class="n">user_parameters</span><span class="p">:</span>
                <span class="n">trailing_gap_skew</span> <span class="o">=</span> <span class="n">user_parameters</span><span class="p">[</span><span class="s1">&#39;trailing_gap_skew&#39;</span><span class="p">]</span>
                <span class="n">part_position</span> <span class="o">=</span> <span class="p">(</span><span class="n">part_position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">trailing_gap_skew</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">rotation</span><span class="p">),</span>
                                <span class="p">(</span><span class="n">part_position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">trailing_gap_skew</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">rotation</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">part</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">part_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">part_position</span> <span class="o">=</span> <span class="p">(</span><span class="n">part_position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">gapsize</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">rotation</span><span class="p">),</span>
                            <span class="p">(</span><span class="n">part_position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">gapsize</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">rotation</span><span class="p">)))</span>
        <span class="n">bounds_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>
    <span class="n">interaction_bounds_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">interaction_list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">interaction_types</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;control&#39;</span><span class="p">,</span><span class="s1">&#39;degradation&#39;</span><span class="p">,</span><span class="s1">&#39;inhibition&#39;</span><span class="p">,</span><span class="s1">&#39;process&#39;</span><span class="p">,</span><span class="s1">&#39;stimulation&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">interaction</span> <span class="ow">in</span> <span class="n">interaction_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="n">interaction_types</span><span class="p">:</span>
                <span class="c1"># Find bounds of glyphs</span>
                <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">part_list</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">part</span> <span class="ow">is</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                        <span class="n">sending_bounds</span> <span class="o">=</span> <span class="n">bounds_list</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
                        <span class="k">break</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">part_list</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">part</span> <span class="ow">is</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                        <span class="n">receiving_bounds</span> <span class="o">=</span> <span class="n">bounds_list</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
                        <span class="n">receiving_part_orientation</span> <span class="o">=</span> <span class="n">part</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">break</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="c1"># If unspecified by the user, interactions with reverse orientation receiving parts are drawn in reverse direction</span>
                <span class="k">if</span> <span class="n">receiving_part_orientation</span> <span class="o">==</span> <span class="s1">&#39;reverse&#39;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;direction&#39;</span><span class="p">:</span><span class="s1">&#39;reverse&#39;</span><span class="p">}</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="s1">&#39;direction&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                            <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;reverse&#39;</span>
                <span class="c1"># Draw interactions</span>
                <span class="n">bounds</span> <span class="o">=</span> <span class="n">draw_interaction</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span>
                                          <span class="n">sending_bounds</span><span class="p">,</span>
                                          <span class="n">receiving_bounds</span><span class="p">,</span>
                                          <span class="n">interaction</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                                          <span class="n">interaction</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
                                          <span class="n">rotation</span> <span class="o">=</span> <span class="n">rotation</span><span class="p">)</span>
                <span class="n">interaction_bounds_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;&quot;&quot;&#39;{interaction[2]}&#39; is not a valid interaction type.&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="c1"># Unify interaction bounds and additional bounds with glyph bounds</span>
    <span class="k">for</span> <span class="n">interaction_bounds</span> <span class="ow">in</span> <span class="n">interaction_bounds_list</span><span class="p">:</span>
        <span class="n">bounds_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interaction_bounds</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">additional_bounds</span> <span class="ow">in</span> <span class="n">additional_bounds_list</span><span class="p">:</span>
        <span class="n">bounds_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">additional_bounds</span><span class="p">)</span>
    <span class="c1"># Automatically find bounds for plot and resize axes</span>
    <span class="n">final_bounds</span> <span class="o">=</span> <span class="n">find_bound_of_bounds</span><span class="p">(</span><span class="n">bounds_list</span><span class="p">)</span>
    <span class="n">width</span> <span class="o">=</span> <span class="p">(</span><span class="n">final_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">final_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="mf">60.0</span>
    <span class="n">height</span> <span class="o">=</span> <span class="p">(</span><span class="n">final_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">final_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mf">60.0</span>
    <span class="n">fig_pad</span> <span class="o">=</span> <span class="p">(</span><span class="n">final_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">final_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span><span class="o">*</span><span class="n">padding</span>
    <span class="n">pad</span> <span class="o">=</span> <span class="n">height</span><span class="o">*</span><span class="n">padding</span>
    <span class="n">width</span> <span class="o">=</span> <span class="n">width</span> <span class="o">+</span> <span class="p">(</span><span class="n">pad</span><span class="o">*</span><span class="mf">2.0</span><span class="p">)</span>
    <span class="n">height</span> <span class="o">=</span> <span class="n">height</span> <span class="o">+</span> <span class="p">(</span><span class="n">pad</span><span class="o">*</span><span class="mf">2.0</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">modify_axis</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="n">final_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">fig_pad</span><span class="p">,</span> <span class="n">final_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">fig_pad</span><span class="p">])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="n">final_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">fig_pad</span><span class="p">,</span> <span class="n">final_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">fig_pad</span><span class="p">])</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">set_size_inches</span><span class="p">(</span> <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span> <span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">start_position</span><span class="p">,</span> <span class="n">part_position</span><span class="p">,</span> <span class="n">final_bounds</span>
</pre></div>

        </details>

            <div class="docstring"><p>Renders multiple glyphs in sequence.</p>

<p>NOTE: See parameters of the __init__
method within the Construct class
for parameter descriptions.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><p><strong>part_list</strong> (list):</p></li>
<li><p><strong>renderer</strong> (object):</p></li>
<li><p><strong>padding</strong> (float, optional):</p></li>
<li><p><strong>gapsize</strong> (float, optional):</p></li>
<li><p><strong>fig</strong> (object, optional):</p></li>
<li><p><strong>ax</strong> (object, optional):</p></li>
<li><p><strong>start_position</strong> (tuple, optional):</p></li>
<li><p><strong>additional_bounds_list</strong> (list, optional):</p></li>
<li><p><strong>interaction_list</strong> (list, optional):</p></li>
<li><p><strong>rotation</strong> (float, optional):</p></li>
</ul>
</div>


                </section>
                <section id="adjust_position_for_orientation">
                            <div class="attr function"><a class="headerlink" href="#adjust_position_for_orientation">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">adjust_position_for_orientation</span><span class="signature">(position, orientation, glyph_width, rotation)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">adjust_position_for_orientation</span> <span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">orientation</span><span class="p">,</span> <span class="n">glyph_width</span><span class="p">,</span> <span class="n">rotation</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Adjusts the relative position of a part that</span>
<span class="sd">       to be drawn with a reversed orientation.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    position: tuple</span>
<span class="sd">        Position the glyph is to be</span>
<span class="sd">        drawn to, format (x,y).</span>
<span class="sd">    orientation: string</span>
<span class="sd">        Defines the glyph orientation,</span>
<span class="sd">        valued as either &#39;forward&#39; or</span>
<span class="sd">        &#39;reverse&#39;.</span>
<span class="sd">    glyph_width: float</span>
<span class="sd">        Width value of the glyph.</span>
<span class="sd">    rotation: float</span>
<span class="sd">        Rotation value of the construct</span>
<span class="sd">        containing the glyph.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">orientation</span> <span class="o">==</span> <span class="s1">&#39;reverse&#39;</span><span class="p">:</span>
        <span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">glyph_width</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">rotation</span><span class="p">)),</span> <span class="p">(</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">glyph_width</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">rotation</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">position</span>
</pre></div>

        </details>

            <div class="docstring"><p>Adjusts the relative position of a part that
   to be drawn with a reversed orientation.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>position</strong> (tuple):
Position the glyph is to be
drawn to, format (x,y).</li>
<li><strong>orientation</strong> (string):
Defines the glyph orientation,
valued as either 'forward' or
'reverse'.</li>
<li><strong>glyph_width</strong> (float):
Width value of the glyph.</li>
<li><strong>rotation</strong> (float):
Rotation value of the construct
containing the glyph.</li>
</ul>
</div>


                </section>
                <section id="collate_user_params">
                            <div class="attr function"><a class="headerlink" href="#collate_user_params">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">collate_user_params</span><span class="signature">(renderer, glyph_type, user_parameters)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">collate_user_params</span> <span class="p">(</span><span class="n">renderer</span><span class="p">,</span> <span class="n">glyph_type</span><span class="p">,</span> <span class="n">user_parameters</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Combine user-defined parameters with default glyph</span>
<span class="sd">       parameters to create merged parameters for drawing.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    renderer: object</span>
<span class="sd">        ParaSBOLv rendering object.</span>
<span class="sd">    glyph_type: str</span>
<span class="sd">        Type of glyph being drawn.</span>
<span class="sd">    user_parameters: dict</span>
<span class="sd">        User-defined parameters to</span>
<span class="sd">        be applied to the glyph.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">glyph</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">glyphs_library</span><span class="p">[</span><span class="n">glyph_type</span><span class="p">]</span>
    <span class="n">merged_parameters</span> <span class="o">=</span> <span class="n">glyph</span><span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">label_parameters</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="n">user_parameters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># Find label</span>
        <span class="k">if</span> <span class="s1">&#39;label_parameters&#39;</span> <span class="ow">in</span> <span class="n">user_parameters</span><span class="p">:</span>
            <span class="n">label_parameters</span> <span class="o">=</span> <span class="n">user_parameters</span><span class="p">[</span><span class="s1">&#39;label_parameters&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">user_parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">glyph</span><span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">]</span> <span class="ow">and</span>
                <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;label_parameters&#39;</span> <span class="ow">and</span>
                <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;orientation&#39;</span> <span class="ow">and</span>
                <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;vertical_offset&#39;</span> <span class="ow">and</span>
                <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;trailing_gap_skew&#39;</span> <span class="ow">and</span>
                <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;path_zorders&#39;</span><span class="p">):</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;&quot;&quot;Parameter &#39;{key}&#39; is not valid for &#39;{glyph_type}&#39;.&quot;&quot;&quot;</span><span class="p">)</span>
            <span class="n">merged_parameters</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_parameters</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">merged_parameters</span><span class="p">,</span> <span class="n">label_parameters</span>
</pre></div>

        </details>

            <div class="docstring"><p>Combine user-defined parameters with default glyph
   parameters to create merged parameters for drawing.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>renderer</strong> (object):
ParaSBOLv rendering object.</li>
<li><strong>glyph_type</strong> (str):
Type of glyph being drawn.</li>
<li><strong>user_parameters</strong> (dict):
User-defined parameters to
be applied to the glyph.</li>
</ul>
</div>


                </section>
                <section id="draw_interaction">
                            <div class="attr function"><a class="headerlink" href="#draw_interaction">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">draw_interaction</span><span class="signature">(
    ax,
    sending_bounds,
    receiving_bounds,
    interaction_type,
    parameters,
    rotation=0.0
)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">draw_interaction</span> <span class="p">(</span><span class="n">ax</span><span class="p">,</span>
                      <span class="n">sending_bounds</span><span class="p">,</span>
                      <span class="n">receiving_bounds</span><span class="p">,</span>
                      <span class="n">interaction_type</span><span class="p">,</span>
                      <span class="n">parameters</span><span class="p">,</span>
                      <span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Draws an interaction.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ax: object</span>
<span class="sd">        Matplotlib Axes object.</span>
<span class="sd">    sending_bounds: tuple</span>
<span class="sd">        Bounds of the sending glyph of the</span>
<span class="sd">        interaction, format ((x1,y1), (x2,y2)),</span>
<span class="sd">        where (x1,y1) is the bottom left vertex</span>
<span class="sd">        and (x2,y2) the top right.</span>
<span class="sd">    receiving_bounds: tuple</span>
<span class="sd">        Bounds of the receiving glyph of the</span>
<span class="sd">        interaction, formatted identically.</span>
<span class="sd">    interaction_type: string</span>
<span class="sd">        Type of interaction being drawn, from</span>
<span class="sd">        &#39;control&#39;, &#39;degradation&#39;, &#39;inhibition&#39;,</span>
<span class="sd">        &#39;process&#39;, &#39;stimulation&#39;.</span>
<span class="sd">    parameters: dict</span>
<span class="sd">        Contains parameters for the interaction.</span>
<span class="sd">        See docstring for the function</span>
<span class="sd">        `process_interaction_params` for details.</span>
<span class="sd">    rotation: float, optional</span>
<span class="sd">        Rotation, in radians, of construct that</span>
<span class="sd">        interactions are to be drawn to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="n">process_interaction_params</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
    <span class="c1"># Convert to degrees</span>
    <span class="n">rotation</span> <span class="o">=</span> <span class="p">(</span><span class="mi">180</span><span class="o">/</span><span class="n">pi</span><span class="p">)</span> <span class="o">*</span> <span class="n">rotation</span>
    <span class="k">if</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;reverse&#39;</span><span class="p">:</span>
        <span class="c1"># Flip side to draw interaction on</span>
        <span class="n">rotation</span> <span class="o">+=</span> <span class="mi">180</span>
        <span class="c1"># Flip centroids</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">sending_bounds</span>
        <span class="n">sending_bounds</span> <span class="o">=</span> <span class="n">receiving_bounds</span>
        <span class="n">receiving_bounds</span> <span class="o">=</span> <span class="n">p</span>
    <span class="c1"># Determine distance from baseline</span>
    <span class="n">initial_distance</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;distance_from_baseline&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">interaction_type</span> <span class="o">==</span> <span class="s1">&#39;degradation&#39;</span><span class="p">:</span> <span class="c1"># Degradation is bigger than the other interactions</span>
        <span class="n">initial_distance</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;distance_from_baseline&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span>
    <span class="c1"># Determine pad size</span>
    <span class="n">y_pad</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;heightskew&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span>
    <span class="c1"># Find centroid of glyph bounds</span>
    <span class="n">origin_cent</span> <span class="o">=</span> <span class="p">(</span><span class="n">sending_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">sending_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">sending_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
                   <span class="n">sending_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">sending_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">sending_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">end_cent</span> <span class="o">=</span> <span class="p">(</span><span class="n">receiving_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">receiving_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">receiving_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
                <span class="n">receiving_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">receiving_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">receiving_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    <span class="c1"># Determine distance between centroids</span>
    <span class="n">x_distance</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">origin_cent</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">end_cent</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">y_distance</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">origin_cent</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">end_cent</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">centroid_distance</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">x_distance</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y_distance</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
    <span class="c1"># Determine interaction origin</span>
    <span class="n">rotation</span> <span class="o">=</span> <span class="n">rotation</span> <span class="o">%</span> <span class="mi">360</span>
    <span class="n">bearing</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">-</span> <span class="n">rotation</span>
    <span class="n">int_origin_x</span> <span class="o">=</span> <span class="p">(</span><span class="n">origin_cent</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">initial_distance</span><span class="o">+</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;distance_from_baseline&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">bearing</span> <span class="o">*</span> <span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span> <span class="c1"># (h + rsin(a), k + rcos(a))</span>
    <span class="n">int_origin_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">origin_cent</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">initial_distance</span><span class="o">+</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;distance_from_baseline&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">bearing</span> <span class="o">*</span> <span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="c1"># Determine origin max</span>
    <span class="n">int_origin_max</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_origin_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">y_pad</span><span class="o">+</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;sending_length_skew&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">bearing</span> <span class="o">*</span> <span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
                      <span class="n">int_origin_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">y_pad</span><span class="o">+</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;sending_length_skew&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">bearing</span> <span class="o">*</span> <span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="c1"># Determine end max</span>
    <span class="n">int_end_max</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_origin_max</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">centroid_distance</span><span class="o">*</span><span class="n">sin</span><span class="p">((</span><span class="mi">90</span> <span class="o">-</span> <span class="n">rotation</span><span class="p">)</span> <span class="o">*</span> <span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
                   <span class="n">int_origin_max</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">centroid_distance</span><span class="o">*</span><span class="n">cos</span><span class="p">((</span><span class="mi">90</span> <span class="o">-</span> <span class="n">rotation</span><span class="p">)</span> <span class="o">*</span> <span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="c1"># Determine interaction endpoint</span>
    <span class="n">int_end_x</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_max</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">y_pad</span><span class="o">+</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;receiving_length_skew&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">sin</span><span class="p">((</span><span class="mi">180</span><span class="o">-</span><span class="n">rotation</span><span class="p">)</span> <span class="o">*</span> <span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">int_end_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_max</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">y_pad</span><span class="o">+</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;receiving_length_skew&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">cos</span><span class="p">((</span><span class="mi">180</span><span class="o">-</span><span class="n">rotation</span><span class="p">)</span> <span class="o">*</span> <span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;reverse&#39;</span><span class="p">:</span>
        <span class="c1"># Reverse origin and end points</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">int_origin_x</span><span class="p">,</span> <span class="n">int_origin_y</span><span class="p">,</span> <span class="n">int_origin_max</span>
        <span class="n">int_origin_x</span><span class="p">,</span> <span class="n">int_origin_y</span><span class="p">,</span> <span class="n">int_origin_max</span> <span class="o">=</span> <span class="n">int_end_x</span><span class="p">,</span> <span class="n">int_end_y</span><span class="p">,</span> <span class="n">int_end_max</span>
        <span class="n">int_end_x</span><span class="p">,</span> <span class="n">int_end_y</span><span class="p">,</span> <span class="n">int_end_max</span> <span class="o">=</span> <span class="n">p</span>
    <span class="c1"># Draw headless interaction</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">int_origin_x</span><span class="p">,</span>
              <span class="n">int_origin_max</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
              <span class="n">int_end_max</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
              <span class="n">int_end_x</span><span class="p">],</span>
             <span class="p">[</span><span class="n">int_origin_y</span><span class="p">,</span>
              <span class="n">int_origin_max</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
              <span class="n">int_end_max</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
              <span class="n">int_end_y</span><span class="p">],</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
            <span class="n">lw</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;linewidth&#39;</span><span class="p">],</span>
            <span class="n">zorder</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;zorder&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">5</span><span class="p">)</span> <span class="c1"># Slightly lower zorder than head to prevent overlap</span>
    <span class="c1"># Control</span>
    <span class="k">if</span> <span class="n">interaction_type</span> <span class="o">==</span> <span class="s1">&#39;control&#39;</span><span class="p">:</span>
        <span class="n">draw_control</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span>
                     <span class="n">int_end_x</span><span class="p">,</span>
                     <span class="n">int_end_y</span><span class="p">,</span>
                     <span class="n">parameters</span><span class="p">,</span>
                     <span class="n">rotation</span> <span class="o">=</span> <span class="n">rotation</span><span class="p">)</span>
    <span class="c1"># Degradation</span>
    <span class="k">elif</span> <span class="n">interaction_type</span> <span class="o">==</span> <span class="s1">&#39;degradation&#39;</span><span class="p">:</span>
        <span class="n">draw_degradation</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span>
                         <span class="n">int_end_x</span><span class="p">,</span>
                         <span class="n">int_end_y</span><span class="p">,</span>
                         <span class="n">parameters</span><span class="p">,</span>
                         <span class="n">rotation</span> <span class="o">=</span> <span class="n">rotation</span><span class="p">)</span>
    <span class="c1"># Inhibition</span>
    <span class="k">elif</span> <span class="n">interaction_type</span> <span class="o">==</span> <span class="s1">&#39;inhibition&#39;</span><span class="p">:</span>
        <span class="n">draw_inhibition</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span>
                        <span class="n">int_end_x</span><span class="p">,</span>
                        <span class="n">int_end_y</span><span class="p">,</span>
                        <span class="n">parameters</span><span class="p">,</span>
                        <span class="n">rotation</span> <span class="o">=</span> <span class="n">rotation</span><span class="p">)</span>
    <span class="c1"># Process</span>
    <span class="k">elif</span> <span class="n">interaction_type</span> <span class="o">==</span> <span class="s1">&#39;process&#39;</span><span class="p">:</span>
        <span class="n">draw_process</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span>
                     <span class="n">int_end_x</span><span class="p">,</span>
                     <span class="n">int_end_y</span><span class="p">,</span>
                     <span class="n">parameters</span><span class="p">,</span>
                     <span class="n">rotation</span> <span class="o">=</span> <span class="n">rotation</span><span class="p">)</span>
    <span class="c1"># Stimulation</span>
    <span class="k">elif</span> <span class="n">interaction_type</span> <span class="o">==</span> <span class="s1">&#39;stimulation&#39;</span><span class="p">:</span>
        <span class="n">draw_stimulation</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span>
                         <span class="n">int_end_x</span><span class="p">,</span>
                         <span class="n">int_end_y</span><span class="p">,</span>
                         <span class="n">parameters</span><span class="p">,</span>
                         <span class="n">rotation</span> <span class="o">=</span> <span class="n">rotation</span><span class="p">)</span>
    <span class="c1"># Find bounds of interaction</span>
    <span class="n">xcoords</span> <span class="o">=</span> <span class="p">[</span><span class="n">int_origin_max</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">int_end_max</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
               <span class="n">int_origin_x</span><span class="p">,</span> <span class="n">int_end_x</span><span class="p">]</span>
    <span class="n">ycoords</span> <span class="o">=</span> <span class="p">[</span><span class="n">int_origin_max</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">int_end_max</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
               <span class="n">int_origin_y</span><span class="p">,</span> <span class="n">int_end_y</span><span class="p">]</span>
    <span class="n">minbounds</span> <span class="o">=</span> <span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">xcoords</span><span class="p">),</span><span class="nb">min</span><span class="p">(</span><span class="n">ycoords</span><span class="p">))</span>
    <span class="n">maxbounds</span> <span class="o">=</span> <span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">xcoords</span><span class="p">),</span><span class="nb">max</span><span class="p">(</span><span class="n">ycoords</span><span class="p">))</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">minbounds</span><span class="p">,</span> <span class="n">maxbounds</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Draws an interaction.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>ax</strong> (object):
Matplotlib Axes object.</li>
<li><strong>sending_bounds</strong> (tuple):
Bounds of the sending glyph of the
interaction, format ((x1,y1), (x2,y2)),
where (x1,y1) is the bottom left vertex
and (x2,y2) the top right.</li>
<li><strong>receiving_bounds</strong> (tuple):
Bounds of the receiving glyph of the
interaction, formatted identically.</li>
<li><strong>interaction_type</strong> (string):
Type of interaction being drawn, from
'control', 'degradation', 'inhibition',
'process', 'stimulation'.</li>
<li><strong>parameters</strong> (dict):
Contains parameters for the interaction.
See docstring for the function
<code><a href="#process_interaction_params">process_interaction_params</a></code> for details.</li>
<li><strong>rotation</strong> (float, optional):
Rotation, in radians, of construct that
interactions are to be drawn to.</li>
</ul>
</div>


                </section>
                <section id="draw_control">
                            <div class="attr function"><a class="headerlink" href="#draw_control">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">draw_control</span><span class="signature">(ax, int_end_x, int_end_y, parameters, rotation=0.0)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">draw_control</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span>
                 <span class="n">int_end_x</span><span class="p">,</span>
                 <span class="n">int_end_y</span><span class="p">,</span>
                 <span class="n">parameters</span><span class="p">,</span>
                 <span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Draws the head of a control interaction.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ax: object</span>
<span class="sd">        Matplotlib Axes object.</span>
<span class="sd">    int_end_x: float</span>
<span class="sd">        x value for the point at the end of</span>
<span class="sd">        the interaction.</span>
<span class="sd">    int_end_y: float</span>
<span class="sd">        y value for the point at the end of</span>
<span class="sd">        the interaction.</span>
<span class="sd">    parameters: dict</span>
<span class="sd">        Contains parameters for the interaction.</span>
<span class="sd">        See docstring for the function</span>
<span class="sd">        `process_interaction_params` for details.</span>
<span class="sd">    rotation: float, optional</span>
<span class="sd">        Rotation of the construct the interaction</span>
<span class="sd">        is being drawn to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headheight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headheight&#39;</span><span class="p">]:</span>
        <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headheight&#39;</span><span class="p">]</span>
    <span class="n">bearing1</span> <span class="o">=</span> <span class="p">((</span><span class="mi">360</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">rotation</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="mi">45</span>
    <span class="n">bearing2</span> <span class="o">=</span> <span class="p">((</span><span class="mi">360</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">rotation</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="mi">45</span>
    <span class="n">point1</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
              <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">point2</span> <span class="o">=</span> <span class="p">(</span><span class="n">point1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
              <span class="n">point1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">point3</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
              <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="c1"># Draw</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">int_end_x</span><span class="p">,</span>
              <span class="n">point1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
              <span class="n">point2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
              <span class="n">point3</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
              <span class="n">int_end_x</span><span class="p">],</span>
             <span class="p">[</span><span class="n">int_end_y</span><span class="p">,</span>
              <span class="n">point1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
              <span class="n">point2</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
              <span class="n">point3</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
              <span class="n">int_end_y</span><span class="p">],</span>
              <span class="n">color</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
              <span class="n">lw</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;linewidth&#39;</span><span class="p">],</span>
              <span class="n">zorder</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;zorder&#39;</span><span class="p">])</span>
</pre></div>

        </details>

            <div class="docstring"><p>Draws the head of a control interaction.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>ax</strong> (object):
Matplotlib Axes object.</li>
<li><strong>int_end_x</strong> (float):
x value for the point at the end of
the interaction.</li>
<li><strong>int_end_y</strong> (float):
y value for the point at the end of
the interaction.</li>
<li><strong>parameters</strong> (dict):
Contains parameters for the interaction.
See docstring for the function
<code><a href="#process_interaction_params">process_interaction_params</a></code> for details.</li>
<li><strong>rotation</strong> (float, optional):
Rotation of the construct the interaction
is being drawn to.</li>
</ul>
</div>


                </section>
                <section id="draw_degradation">
                            <div class="attr function"><a class="headerlink" href="#draw_degradation">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">draw_degradation</span><span class="signature">(ax, int_end_x, int_end_y, parameters, rotation=0.0)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">draw_degradation</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">int_end_x</span><span class="p">,</span> <span class="n">int_end_y</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Draws the head of a degradation interaction.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ax: object</span>
<span class="sd">        Matplotlib Axes object.</span>
<span class="sd">    int_end_x: float</span>
<span class="sd">        x value for the point at the end of</span>
<span class="sd">        the interaction.</span>
<span class="sd">    int_end_y: float</span>
<span class="sd">        y value for the point at the end of</span>
<span class="sd">        the interaction.</span>
<span class="sd">    parameters: dict</span>
<span class="sd">        Contains parameters for the interaction.</span>
<span class="sd">        See docstring for the function</span>
<span class="sd">        `process_interaction_params` for details.</span>
<span class="sd">    rotation: float, optional</span>
<span class="sd">        Rotation of the construct the interaction</span>
<span class="sd">        is being drawn to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bearing1</span> <span class="o">=</span> <span class="mi">90</span> <span class="o">-</span> <span class="n">rotation</span>
    <span class="n">bearing2</span> <span class="o">=</span> <span class="p">((</span><span class="mi">360</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">bearing1</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">bearing1</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">bearing3</span> <span class="o">=</span> <span class="p">((</span><span class="mi">360</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">rotation</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">base1</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
             <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">base2</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
             <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">point</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headheight&#39;</span><span class="p">])</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing3</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
             <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headheight&#39;</span><span class="p">])</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing3</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="c1"># Arrow</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">([[</span><span class="n">int_end_x</span><span class="p">,</span> <span class="n">int_end_y</span><span class="p">],</span>
                <span class="p">[</span><span class="n">base1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">base1</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                <span class="p">[</span><span class="n">point</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                <span class="p">[</span><span class="n">base2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">base2</span><span class="p">[</span><span class="mi">1</span><span class="p">]]],</span>
                <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">patch</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">PathPatch</span><span class="p">(</span><span class="n">path</span><span class="p">,</span>
                              <span class="n">facecolor</span><span class="o">=</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
                              <span class="n">edgecolor</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
                              <span class="n">lw</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;linewidth&#39;</span><span class="p">],</span>
                              <span class="n">zorder</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;zorder&#39;</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">patch</span><span class="p">)</span>
    <span class="c1"># Circle</span>
    <span class="n">origin</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headheight&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span> <span class="o">+</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing3</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
              <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headheight&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span> <span class="o">+</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing3</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="n">patch</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">Circle</span><span class="p">((</span><span class="n">origin</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">origin</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                            <span class="n">radius</span> <span class="o">=</span> <span class="n">r</span><span class="p">,</span>
                            <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span>
                            <span class="n">edgecolor</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
                            <span class="n">lw</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;linewidth&#39;</span><span class="p">],</span>
                            <span class="n">zorder</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;zorder&#39;</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">patch</span><span class="p">)</span>
    <span class="c1"># Line within circle</span>
    <span class="n">bearing1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">360</span> <span class="o">-</span> <span class="n">rotation</span><span class="p">)</span> <span class="o">+</span> <span class="mi">45</span>
    <span class="n">bearing2</span> <span class="o">=</span> <span class="p">(</span><span class="mi">360</span> <span class="o">-</span> <span class="n">rotation</span><span class="p">)</span> <span class="o">+</span> <span class="mi">225</span>
    <span class="n">end1</span> <span class="o">=</span> <span class="p">(</span><span class="n">origin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
            <span class="n">origin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">end2</span> <span class="o">=</span> <span class="p">(</span><span class="n">origin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
            <span class="n">origin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">end1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">end2</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
             <span class="p">[</span><span class="n">end1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">end2</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
             <span class="n">color</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
             <span class="n">lw</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;linewidth&#39;</span><span class="p">],</span>
             <span class="n">zorder</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;zorder&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">500</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Draws the head of a degradation interaction.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>ax</strong> (object):
Matplotlib Axes object.</li>
<li><strong>int_end_x</strong> (float):
x value for the point at the end of
the interaction.</li>
<li><strong>int_end_y</strong> (float):
y value for the point at the end of
the interaction.</li>
<li><strong>parameters</strong> (dict):
Contains parameters for the interaction.
See docstring for the function
<code><a href="#process_interaction_params">process_interaction_params</a></code> for details.</li>
<li><strong>rotation</strong> (float, optional):
Rotation of the construct the interaction
is being drawn to.</li>
</ul>
</div>


                </section>
                <section id="draw_inhibition">
                            <div class="attr function"><a class="headerlink" href="#draw_inhibition">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">draw_inhibition</span><span class="signature">(ax, int_end_x, int_end_y, parameters, rotation=0.0)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">draw_inhibition</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">int_end_x</span><span class="p">,</span> <span class="n">int_end_y</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Draws the head of an inhibition interaction.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ax: object</span>
<span class="sd">        Matplotlib Axes object.</span>
<span class="sd">    int_end_x: float</span>
<span class="sd">        x value for the point at the end of</span>
<span class="sd">        the interaction.</span>
<span class="sd">    int_end_y: float</span>
<span class="sd">        y value for the point at the end of</span>
<span class="sd">        the interaction.</span>
<span class="sd">    parameters: dict</span>
<span class="sd">        Contains parameters for the interaction.</span>
<span class="sd">        See docstring for the function</span>
<span class="sd">        `process_interaction_params` for details.</span>
<span class="sd">    rotation: float, optional</span>
<span class="sd">        Rotation of the construct the interaction</span>
<span class="sd">        is being drawn to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bearing1</span> <span class="o">=</span> <span class="mi">90</span> <span class="o">-</span> <span class="n">rotation</span>
    <span class="n">bearing2</span> <span class="o">=</span> <span class="p">((</span><span class="mi">360</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">bearing1</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">bearing1</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">base1</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
             <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">base2</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
             <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="c1"># Draw</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">base1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
              <span class="n">base2</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
             <span class="p">[</span><span class="n">base1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
              <span class="n">base2</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
             <span class="n">color</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
             <span class="n">lw</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;linewidth&#39;</span><span class="p">],</span>
             <span class="n">zorder</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;zorder&#39;</span><span class="p">])</span>
</pre></div>

        </details>

            <div class="docstring"><p>Draws the head of an inhibition interaction.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>ax</strong> (object):
Matplotlib Axes object.</li>
<li><strong>int_end_x</strong> (float):
x value for the point at the end of
the interaction.</li>
<li><strong>int_end_y</strong> (float):
y value for the point at the end of
the interaction.</li>
<li><strong>parameters</strong> (dict):
Contains parameters for the interaction.
See docstring for the function
<code><a href="#process_interaction_params">process_interaction_params</a></code> for details.</li>
<li><strong>rotation</strong> (float, optional):
Rotation of the construct the interaction
is being drawn to.</li>
</ul>
</div>


                </section>
                <section id="draw_process">
                            <div class="attr function"><a class="headerlink" href="#draw_process">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">draw_process</span><span class="signature">(ax, int_end_x, int_end_y, parameters, rotation=0.0)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">draw_process</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">int_end_x</span><span class="p">,</span> <span class="n">int_end_y</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Draws the head of a process interaction.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ax: object</span>
<span class="sd">        Matplotlib Axes object.</span>
<span class="sd">    int_end_x: float</span>
<span class="sd">        x value for the point at the end of</span>
<span class="sd">        the interaction.</span>
<span class="sd">    int_end_y: float</span>
<span class="sd">        y value for the point at the end of</span>
<span class="sd">        the interaction.</span>
<span class="sd">    parameters: dict</span>
<span class="sd">        Contains parameters for the interaction.</span>
<span class="sd">        See docstring for the function</span>
<span class="sd">        `process_interaction_params` for details.</span>
<span class="sd">    rotation: float, optional</span>
<span class="sd">        Rotation of the construct the interaction</span>
<span class="sd">        is being drawn to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bearing1</span> <span class="o">=</span> <span class="mi">90</span> <span class="o">-</span> <span class="n">rotation</span>
    <span class="n">bearing2</span> <span class="o">=</span> <span class="p">((</span><span class="mi">360</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">bearing1</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">bearing1</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">bearing3</span> <span class="o">=</span> <span class="p">((</span><span class="mi">360</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">rotation</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">base1</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
             <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">base2</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
             <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">point</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headheight&#39;</span><span class="p">])</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing3</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
             <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headheight&#39;</span><span class="p">])</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing3</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="c1"># Draw</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">([[</span><span class="n">int_end_x</span><span class="p">,</span> <span class="n">int_end_y</span><span class="p">],</span>
                <span class="p">[</span><span class="n">base1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">base1</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                <span class="p">[</span><span class="n">point</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                <span class="p">[</span><span class="n">base2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">base2</span><span class="p">[</span><span class="mi">1</span><span class="p">]]],</span>
                <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">patch</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">PathPatch</span><span class="p">(</span><span class="n">path</span><span class="p">,</span>
                              <span class="n">facecolor</span><span class="o">=</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
                              <span class="n">edgecolor</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
                              <span class="n">lw</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;linewidth&#39;</span><span class="p">],</span>
                              <span class="n">zorder</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;zorder&#39;</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">patch</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Draws the head of a process interaction.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>ax</strong> (object):
Matplotlib Axes object.</li>
<li><strong>int_end_x</strong> (float):
x value for the point at the end of
the interaction.</li>
<li><strong>int_end_y</strong> (float):
y value for the point at the end of
the interaction.</li>
<li><strong>parameters</strong> (dict):
Contains parameters for the interaction.
See docstring for the function
<code><a href="#process_interaction_params">process_interaction_params</a></code> for details.</li>
<li><strong>rotation</strong> (float, optional):
Rotation of the construct the interaction
is being drawn to.</li>
</ul>
</div>


                </section>
                <section id="draw_stimulation">
                            <div class="attr function"><a class="headerlink" href="#draw_stimulation">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">draw_stimulation</span><span class="signature">(ax, int_end_x, int_end_y, parameters, rotation=0.0)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">draw_stimulation</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">int_end_x</span><span class="p">,</span> <span class="n">int_end_y</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Draws the head of a stimulation interaction.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ax: object</span>
<span class="sd">        Matplotlib Axes object.</span>
<span class="sd">    int_end_x: float</span>
<span class="sd">        x value for the point at the end of</span>
<span class="sd">        the interaction.</span>
<span class="sd">    int_end_y: float</span>
<span class="sd">        y value for the point at the end of</span>
<span class="sd">        the interaction.</span>
<span class="sd">    parameters: dict</span>
<span class="sd">        Contains parameters for the interaction.</span>
<span class="sd">        See docstring for the function</span>
<span class="sd">        `process_interaction_params` for details.</span>
<span class="sd">    rotation: float, optional</span>
<span class="sd">        Rotation of the construct the interaction</span>
<span class="sd">        is being drawn to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bearing1</span> <span class="o">=</span> <span class="mi">90</span> <span class="o">-</span> <span class="n">rotation</span>
    <span class="n">bearing2</span> <span class="o">=</span> <span class="p">((</span><span class="mi">360</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">bearing1</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">bearing1</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">bearing3</span> <span class="o">=</span> <span class="p">((</span><span class="mi">360</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">rotation</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">base1</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
             <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing1</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">base2</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
             <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headwidth&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="n">point</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_end_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headheight&#39;</span><span class="p">])</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">bearing3</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span>
             <span class="n">int_end_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;headheight&#39;</span><span class="p">])</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing3</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
    <span class="c1"># Draw</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">([[</span><span class="n">int_end_x</span><span class="p">,</span> <span class="n">int_end_y</span><span class="p">],</span>
                <span class="p">[</span><span class="n">base1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">base1</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                <span class="p">[</span><span class="n">point</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                <span class="p">[</span><span class="n">base2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">base2</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                <span class="p">[</span><span class="n">int_end_x</span><span class="p">,</span> <span class="n">int_end_y</span><span class="p">]],</span>
                <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">patch</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">PathPatch</span><span class="p">(</span><span class="n">path</span><span class="p">,</span>
                              <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span>
                              <span class="n">edgecolor</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span>
                              <span class="n">lw</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;linewidth&#39;</span><span class="p">],</span>
                              <span class="n">zorder</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;zorder&#39;</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">patch</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Draws the head of a stimulation interaction.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>ax</strong> (object):
Matplotlib Axes object.</li>
<li><strong>int_end_x</strong> (float):
x value for the point at the end of
the interaction.</li>
<li><strong>int_end_y</strong> (float):
y value for the point at the end of
the interaction.</li>
<li><strong>parameters</strong> (dict):
Contains parameters for the interaction.
See docstring for the function
<code><a href="#process_interaction_params">process_interaction_params</a></code> for details.</li>
<li><strong>rotation</strong> (float, optional):
Rotation of the construct the interaction
is being drawn to.</li>
</ul>
</div>


                </section>
                <section id="process_interaction_params">
                            <div class="attr function"><a class="headerlink" href="#process_interaction_params">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">process_interaction_params</span><span class="signature">(parameters)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">process_interaction_params</span><span class="p">(</span><span class="n">parameters</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Formats and completes interaction parameters.</span>

<span class="sd">    Interaction parameters are combined into a dictionary passed as a single argumnet.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>

<span class="sd">    color: tuple</span>
<span class="sd">        Format (r,g,b).</span>
<span class="sd">    headheight: float</span>
<span class="sd">        Height of interaction head.</span>
<span class="sd">    headwidth: float</span>
<span class="sd">        Width of interaction head.</span>
<span class="sd">    zorder: int</span>
<span class="sd">        Matplotlib zorder value of</span>
<span class="sd">        the interaction.</span>
<span class="sd">    direction: string</span>
<span class="sd">        Determines what side of the</span>
<span class="sd">        construct the interaction is</span>
<span class="sd">        drawn on; &#39;forward&#39; or &#39;reverse&#39;.</span>
<span class="sd">    linewidth: float</span>
<span class="sd">        Determines the width of lines</span>
<span class="sd">        used to draw the interaction.</span>
<span class="sd">    heightskew: float</span>
<span class="sd">        Skews the total height of the</span>
<span class="sd">        interaction.</span>
<span class="sd">    sending_length_skew: float</span>
<span class="sd">        Skews the length of the origin</span>
<span class="sd">        line of the interaction.</span>
<span class="sd">    receiving_length_skew: float</span>
<span class="sd">        Skews the length of the</span>
<span class="sd">        receiving line of the</span>
<span class="sd">        interaction.</span>
<span class="sd">    distance_from_baseline: float</span>
<span class="sd">        Skews the distance between the</span>
<span class="sd">        interaction and the baseline.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">final_parameters</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
                        <span class="s1">&#39;headheight&#39;</span><span class="p">:</span> <span class="mf">7.0</span><span class="p">,</span>
                        <span class="s1">&#39;headwidth&#39;</span><span class="p">:</span> <span class="mf">7.0</span><span class="p">,</span>
                        <span class="s1">&#39;zorder&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                        <span class="s1">&#39;direction&#39;</span><span class="p">:</span> <span class="s1">&#39;forward&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;linewidth&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                        <span class="s1">&#39;heightskew&#39;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span>
                        <span class="s1">&#39;sending_length_skew&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                        <span class="s1">&#39;receiving_length_skew&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                        <span class="s1">&#39;distance_from_baseline&#39;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">parameters</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">final_parameters</span>
    <span class="c1"># Collate interaction parameters</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">parameters</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">final_parameters</span><span class="p">:</span>
            <span class="n">final_parameters</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;&quot;&quot;&#39;{key}&#39; is not a valid interaction parameter.&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="c1"># Amplify zorder to ensure all drawings composing the interaction can be grouped on Z axis</span>
    <span class="n">final_parameters</span><span class="p">[</span><span class="s1">&#39;zorder&#39;</span><span class="p">]</span> <span class="o">*=</span> <span class="mi">100</span>
    <span class="k">return</span> <span class="n">final_parameters</span>
</pre></div>

        </details>

            <div class="docstring"><p>Formats and completes interaction parameters.</p>

<p>Interaction parameters are combined into a dictionary passed as a single argumnet.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>color</strong> (tuple):
Format (r,g,b).</li>
<li><strong>headheight</strong> (float):
Height of interaction head.</li>
<li><strong>headwidth</strong> (float):
Width of interaction head.</li>
<li><strong>zorder</strong> (int):
Matplotlib zorder value of
the interaction.</li>
<li><strong>direction</strong> (string):
Determines what side of the
construct the interaction is
drawn on; 'forward' or 'reverse'.</li>
<li><strong>linewidth</strong> (float):
Determines the width of lines
used to draw the interaction.</li>
<li><strong>heightskew</strong> (float):
Skews the total height of the
interaction.</li>
<li><strong>sending_length_skew</strong> (float):
Skews the length of the origin
line of the interaction.</li>
<li><strong>receiving_length_skew</strong> (float):
Skews the length of the
receiving line of the
interaction.</li>
<li><strong>distance_from_baseline</strong> (float):
Skews the distance between the
interaction and the baseline.</li>
</ul>
</div>


                </section>
    </main>
<script>/** elasticlunr - http://weixsong.github.io * Copyright (C) 2017 Oliver Nightingale * Copyright (C) 2017 Wei Song * MIT Licensed */!function(){function e(e){if(null===e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var t=function(e){var n=new t.Index;return n.pipeline.add(t.trimmer,t.stopWordFilter,t.stemmer),e&&e.call(n,n),n};t.version="0.9.5",lunr=t,t.utils={},t.utils.warn=function(e){return function(t){e.console&&console.warn&&console.warn(t)}}(this),t.utils.toString=function(e){return void 0===e||null===e?"":e.toString()},t.EventEmitter=function(){this.events={}},t.EventEmitter.prototype.addListener=function(){var e=Array.prototype.slice.call(arguments),t=e.pop(),n=e;if("function"!=typeof t)throw new TypeError("last argument must be a function");n.forEach(function(e){this.hasHandler(e)||(this.events[e]=[]),this.events[e].push(t)},this)},t.EventEmitter.prototype.removeListener=function(e,t){if(this.hasHandler(e)){var n=this.events[e].indexOf(t);-1!==n&&(this.events[e].splice(n,1),0==this.events[e].length&&delete this.events[e])}},t.EventEmitter.prototype.emit=function(e){if(this.hasHandler(e)){var t=Array.prototype.slice.call(arguments,1);this.events[e].forEach(function(e){e.apply(void 0,t)},this)}},t.EventEmitter.prototype.hasHandler=function(e){return e in this.events},t.tokenizer=function(e){if(!arguments.length||null===e||void 0===e)return[];if(Array.isArray(e)){var n=e.filter(function(e){return null===e||void 0===e?!1:!0});n=n.map(function(e){return t.utils.toString(e).toLowerCase()});var i=[];return n.forEach(function(e){var n=e.split(t.tokenizer.seperator);i=i.concat(n)},this),i}return e.toString().trim().toLowerCase().split(t.tokenizer.seperator)},t.tokenizer.defaultSeperator=/[\s\-]+/,t.tokenizer.seperator=t.tokenizer.defaultSeperator,t.tokenizer.setSeperator=function(e){null!==e&&void 0!==e&&"object"==typeof e&&(t.tokenizer.seperator=e)},t.tokenizer.resetSeperator=function(){t.tokenizer.seperator=t.tokenizer.defaultSeperator},t.tokenizer.getSeperator=function(){return t.tokenizer.seperator},t.Pipeline=function(){this._queue=[]},t.Pipeline.registeredFunctions={},t.Pipeline.registerFunction=function(e,n){n in t.Pipeline.registeredFunctions&&t.utils.warn("Overwriting existing registered function: "+n),e.label=n,t.Pipeline.registeredFunctions[n]=e},t.Pipeline.getRegisteredFunction=function(e){return e in t.Pipeline.registeredFunctions!=!0?null:t.Pipeline.registeredFunctions[e]},t.Pipeline.warnIfFunctionNotRegistered=function(e){var n=e.label&&e.label in this.registeredFunctions;n||t.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",e)},t.Pipeline.load=function(e){var n=new t.Pipeline;return e.forEach(function(e){var i=t.Pipeline.getRegisteredFunction(e);if(!i)throw new Error("Cannot load un-registered function: "+e);n.add(i)}),n},t.Pipeline.prototype.add=function(){var e=Array.prototype.slice.call(arguments);e.forEach(function(e){t.Pipeline.warnIfFunctionNotRegistered(e),this._queue.push(e)},this)},t.Pipeline.prototype.after=function(e,n){t.Pipeline.warnIfFunctionNotRegistered(n);var i=this._queue.indexOf(e);if(-1===i)throw new Error("Cannot find existingFn");this._queue.splice(i+1,0,n)},t.Pipeline.prototype.before=function(e,n){t.Pipeline.warnIfFunctionNotRegistered(n);var i=this._queue.indexOf(e);if(-1===i)throw new Error("Cannot find existingFn");this._queue.splice(i,0,n)},t.Pipeline.prototype.remove=function(e){var t=this._queue.indexOf(e);-1!==t&&this._queue.splice(t,1)},t.Pipeline.prototype.run=function(e){for(var t=[],n=e.length,i=this._queue.length,o=0;n>o;o++){for(var r=e[o],s=0;i>s&&(r=this._queue[s](r,o,e),void 0!==r&&null!==r);s++);void 0!==r&&null!==r&&t.push(r)}return t},t.Pipeline.prototype.reset=function(){this._queue=[]},t.Pipeline.prototype.get=function(){return this._queue},t.Pipeline.prototype.toJSON=function(){return this._queue.map(function(e){return t.Pipeline.warnIfFunctionNotRegistered(e),e.label})},t.Index=function(){this._fields=[],this._ref="id",this.pipeline=new t.Pipeline,this.documentStore=new t.DocumentStore,this.index={},this.eventEmitter=new t.EventEmitter,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},t.Index.prototype.on=function(){var e=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,e)},t.Index.prototype.off=function(e,t){return this.eventEmitter.removeListener(e,t)},t.Index.load=function(e){e.version!==t.version&&t.utils.warn("version mismatch: current "+t.version+" importing "+e.version);var n=new this;n._fields=e.fields,n._ref=e.ref,n.documentStore=t.DocumentStore.load(e.documentStore),n.pipeline=t.Pipeline.load(e.pipeline),n.index={};for(var i in e.index)n.index[i]=t.InvertedIndex.load(e.index[i]);return n},t.Index.prototype.addField=function(e){return this._fields.push(e),this.index[e]=new t.InvertedIndex,this},t.Index.prototype.setRef=function(e){return this._ref=e,this},t.Index.prototype.saveDocument=function(e){return this.documentStore=new t.DocumentStore(e),this},t.Index.prototype.addDoc=function(e,n){if(e){var n=void 0===n?!0:n,i=e[this._ref];this.documentStore.addDoc(i,e),this._fields.forEach(function(n){var o=this.pipeline.run(t.tokenizer(e[n]));this.documentStore.addFieldLength(i,n,o.length);var r={};o.forEach(function(e){e in r?r[e]+=1:r[e]=1},this);for(var s in r){var u=r[s];u=Math.sqrt(u),this.index[n].addToken(s,{ref:i,tf:u})}},this),n&&this.eventEmitter.emit("add",e,this)}},t.Index.prototype.removeDocByRef=function(e){if(e&&this.documentStore.isDocStored()!==!1&&this.documentStore.hasDoc(e)){var t=this.documentStore.getDoc(e);this.removeDoc(t,!1)}},t.Index.prototype.removeDoc=function(e,n){if(e){var n=void 0===n?!0:n,i=e[this._ref];this.documentStore.hasDoc(i)&&(this.documentStore.removeDoc(i),this._fields.forEach(function(n){var o=this.pipeline.run(t.tokenizer(e[n]));o.forEach(function(e){this.index[n].removeToken(e,i)},this)},this),n&&this.eventEmitter.emit("remove",e,this))}},t.Index.prototype.updateDoc=function(e,t){var t=void 0===t?!0:t;this.removeDocByRef(e[this._ref],!1),this.addDoc(e,!1),t&&this.eventEmitter.emit("update",e,this)},t.Index.prototype.idf=function(e,t){var n="@"+t+"/"+e;if(Object.prototype.hasOwnProperty.call(this._idfCache,n))return this._idfCache[n];var i=this.index[t].getDocFreq(e),o=1+Math.log(this.documentStore.length/(i+1));return this._idfCache[n]=o,o},t.Index.prototype.getFields=function(){return this._fields.slice()},t.Index.prototype.search=function(e,n){if(!e)return[];e="string"==typeof e?{any:e}:JSON.parse(JSON.stringify(e));var i=null;null!=n&&(i=JSON.stringify(n));for(var o=new t.Configuration(i,this.getFields()).get(),r={},s=Object.keys(e),u=0;u<s.length;u++){var a=s[u];r[a]=this.pipeline.run(t.tokenizer(e[a]))}var l={};for(var c in o){var d=r[c]||r.any;if(d){var f=this.fieldSearch(d,c,o),h=o[c].boost;for(var p in f)f[p]=f[p]*h;for(var p in f)p in l?l[p]+=f[p]:l[p]=f[p]}}var v,g=[];for(var p in l)v={ref:p,score:l[p]},this.documentStore.hasDoc(p)&&(v.doc=this.documentStore.getDoc(p)),g.push(v);return g.sort(function(e,t){return t.score-e.score}),g},t.Index.prototype.fieldSearch=function(e,t,n){var i=n[t].bool,o=n[t].expand,r=n[t].boost,s=null,u={};return 0!==r?(e.forEach(function(e){var n=[e];1==o&&(n=this.index[t].expandToken(e));var r={};n.forEach(function(n){var o=this.index[t].getDocs(n),a=this.idf(n,t);if(s&&"AND"==i){var l={};for(var c in s)c in o&&(l[c]=o[c]);o=l}n==e&&this.fieldSearchStats(u,n,o);for(var c in o){var d=this.index[t].getTermFrequency(n,c),f=this.documentStore.getFieldLength(c,t),h=1;0!=f&&(h=1/Math.sqrt(f));var p=1;n!=e&&(p=.15*(1-(n.length-e.length)/n.length));var v=d*a*h*p;c in r?r[c]+=v:r[c]=v}},this),s=this.mergeScores(s,r,i)},this),s=this.coordNorm(s,u,e.length)):void 0},t.Index.prototype.mergeScores=function(e,t,n){if(!e)return t;if("AND"==n){var i={};for(var o in t)o in e&&(i[o]=e[o]+t[o]);return i}for(var o in t)o in e?e[o]+=t[o]:e[o]=t[o];return e},t.Index.prototype.fieldSearchStats=function(e,t,n){for(var i in n)i in e?e[i].push(t):e[i]=[t]},t.Index.prototype.coordNorm=function(e,t,n){for(var i in e)if(i in t){var o=t[i].length;e[i]=e[i]*o/n}return e},t.Index.prototype.toJSON=function(){var e={};return this._fields.forEach(function(t){e[t]=this.index[t].toJSON()},this),{version:t.version,fields:this._fields,ref:this._ref,documentStore:this.documentStore.toJSON(),index:e,pipeline:this.pipeline.toJSON()}},t.Index.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},t.DocumentStore=function(e){this._save=null===e||void 0===e?!0:e,this.docs={},this.docInfo={},this.length=0},t.DocumentStore.load=function(e){var t=new this;return t.length=e.length,t.docs=e.docs,t.docInfo=e.docInfo,t._save=e.save,t},t.DocumentStore.prototype.isDocStored=function(){return this._save},t.DocumentStore.prototype.addDoc=function(t,n){this.hasDoc(t)||this.length++,this.docs[t]=this._save===!0?e(n):null},t.DocumentStore.prototype.getDoc=function(e){return this.hasDoc(e)===!1?null:this.docs[e]},t.DocumentStore.prototype.hasDoc=function(e){return e in this.docs},t.DocumentStore.prototype.removeDoc=function(e){this.hasDoc(e)&&(delete this.docs[e],delete this.docInfo[e],this.length--)},t.DocumentStore.prototype.addFieldLength=function(e,t,n){null!==e&&void 0!==e&&0!=this.hasDoc(e)&&(this.docInfo[e]||(this.docInfo[e]={}),this.docInfo[e][t]=n)},t.DocumentStore.prototype.updateFieldLength=function(e,t,n){null!==e&&void 0!==e&&0!=this.hasDoc(e)&&this.addFieldLength(e,t,n)},t.DocumentStore.prototype.getFieldLength=function(e,t){return null===e||void 0===e?0:e in this.docs&&t in this.docInfo[e]?this.docInfo[e][t]:0},t.DocumentStore.prototype.toJSON=function(){return{docs:this.docs,docInfo:this.docInfo,length:this.length,save:this._save}},t.stemmer=function(){var e={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},t={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},n="[^aeiou]",i="[aeiouy]",o=n+"[^aeiouy]*",r=i+"[aeiou]*",s="^("+o+")?"+r+o,u="^("+o+")?"+r+o+"("+r+")?$",a="^("+o+")?"+r+o+r+o,l="^("+o+")?"+i,c=new RegExp(s),d=new RegExp(a),f=new RegExp(u),h=new RegExp(l),p=/^(.+?)(ss|i)es$/,v=/^(.+?)([^s])s$/,g=/^(.+?)eed$/,m=/^(.+?)(ed|ing)$/,y=/.$/,S=/(at|bl|iz)$/,x=new RegExp("([^aeiouylsz])\\1$"),w=new RegExp("^"+o+i+"[^aeiouwxy]$"),I=/^(.+?[^aeiou])y$/,b=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,E=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,D=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,F=/^(.+?)(s|t)(ion)$/,_=/^(.+?)e$/,P=/ll$/,k=new RegExp("^"+o+i+"[^aeiouwxy]$"),z=function(n){var i,o,r,s,u,a,l;if(n.length<3)return n;if(r=n.substr(0,1),"y"==r&&(n=r.toUpperCase()+n.substr(1)),s=p,u=v,s.test(n)?n=n.replace(s,"$1$2"):u.test(n)&&(n=n.replace(u,"$1$2")),s=g,u=m,s.test(n)){var z=s.exec(n);s=c,s.test(z[1])&&(s=y,n=n.replace(s,""))}else if(u.test(n)){var z=u.exec(n);i=z[1],u=h,u.test(i)&&(n=i,u=S,a=x,l=w,u.test(n)?n+="e":a.test(n)?(s=y,n=n.replace(s,"")):l.test(n)&&(n+="e"))}if(s=I,s.test(n)){var z=s.exec(n);i=z[1],n=i+"i"}if(s=b,s.test(n)){var z=s.exec(n);i=z[1],o=z[2],s=c,s.test(i)&&(n=i+e[o])}if(s=E,s.test(n)){var z=s.exec(n);i=z[1],o=z[2],s=c,s.test(i)&&(n=i+t[o])}if(s=D,u=F,s.test(n)){var z=s.exec(n);i=z[1],s=d,s.test(i)&&(n=i)}else if(u.test(n)){var z=u.exec(n);i=z[1]+z[2],u=d,u.test(i)&&(n=i)}if(s=_,s.test(n)){var z=s.exec(n);i=z[1],s=d,u=f,a=k,(s.test(i)||u.test(i)&&!a.test(i))&&(n=i)}return s=P,u=d,s.test(n)&&u.test(n)&&(s=y,n=n.replace(s,"")),"y"==r&&(n=r.toLowerCase()+n.substr(1)),n};return z}(),t.Pipeline.registerFunction(t.stemmer,"stemmer"),t.stopWordFilter=function(e){return e&&t.stopWordFilter.stopWords[e]!==!0?e:void 0},t.clearStopWords=function(){t.stopWordFilter.stopWords={}},t.addStopWords=function(e){null!=e&&Array.isArray(e)!==!1&&e.forEach(function(e){t.stopWordFilter.stopWords[e]=!0},this)},t.resetStopWords=function(){t.stopWordFilter.stopWords=t.defaultStopWords},t.defaultStopWords={"":!0,a:!0,able:!0,about:!0,across:!0,after:!0,all:!0,almost:!0,also:!0,am:!0,among:!0,an:!0,and:!0,any:!0,are:!0,as:!0,at:!0,be:!0,because:!0,been:!0,but:!0,by:!0,can:!0,cannot:!0,could:!0,dear:!0,did:!0,"do":!0,does:!0,either:!0,"else":!0,ever:!0,every:!0,"for":!0,from:!0,get:!0,got:!0,had:!0,has:!0,have:!0,he:!0,her:!0,hers:!0,him:!0,his:!0,how:!0,however:!0,i:!0,"if":!0,"in":!0,into:!0,is:!0,it:!0,its:!0,just:!0,least:!0,let:!0,like:!0,likely:!0,may:!0,me:!0,might:!0,most:!0,must:!0,my:!0,neither:!0,no:!0,nor:!0,not:!0,of:!0,off:!0,often:!0,on:!0,only:!0,or:!0,other:!0,our:!0,own:!0,rather:!0,said:!0,say:!0,says:!0,she:!0,should:!0,since:!0,so:!0,some:!0,than:!0,that:!0,the:!0,their:!0,them:!0,then:!0,there:!0,these:!0,they:!0,"this":!0,tis:!0,to:!0,too:!0,twas:!0,us:!0,wants:!0,was:!0,we:!0,were:!0,what:!0,when:!0,where:!0,which:!0,"while":!0,who:!0,whom:!0,why:!0,will:!0,"with":!0,would:!0,yet:!0,you:!0,your:!0},t.stopWordFilter.stopWords=t.defaultStopWords,t.Pipeline.registerFunction(t.stopWordFilter,"stopWordFilter"),t.trimmer=function(e){if(null===e||void 0===e)throw new Error("token should not be undefined");return e.replace(/^\W+/,"").replace(/\W+$/,"")},t.Pipeline.registerFunction(t.trimmer,"trimmer"),t.InvertedIndex=function(){this.root={docs:{},df:0}},t.InvertedIndex.load=function(e){var t=new this;return t.root=e.root,t},t.InvertedIndex.prototype.addToken=function(e,t,n){for(var n=n||this.root,i=0;i<=e.length-1;){var o=e[i];o in n||(n[o]={docs:{},df:0}),i+=1,n=n[o]}var r=t.ref;n.docs[r]?n.docs[r]={tf:t.tf}:(n.docs[r]={tf:t.tf},n.df+=1)},t.InvertedIndex.prototype.hasToken=function(e){if(!e)return!1;for(var t=this.root,n=0;n<e.length;n++){if(!t[e[n]])return!1;t=t[e[n]]}return!0},t.InvertedIndex.prototype.getNode=function(e){if(!e)return null;for(var t=this.root,n=0;n<e.length;n++){if(!t[e[n]])return null;t=t[e[n]]}return t},t.InvertedIndex.prototype.getDocs=function(e){var t=this.getNode(e);return null==t?{}:t.docs},t.InvertedIndex.prototype.getTermFrequency=function(e,t){var n=this.getNode(e);return null==n?0:t in n.docs?n.docs[t].tf:0},t.InvertedIndex.prototype.getDocFreq=function(e){var t=this.getNode(e);return null==t?0:t.df},t.InvertedIndex.prototype.removeToken=function(e,t){if(e){var n=this.getNode(e);null!=n&&t in n.docs&&(delete n.docs[t],n.df-=1)}},t.InvertedIndex.prototype.expandToken=function(e,t,n){if(null==e||""==e)return[];var t=t||[];if(void 0==n&&(n=this.getNode(e),null==n))return t;n.df>0&&t.push(e);for(var i in n)"docs"!==i&&"df"!==i&&this.expandToken(e+i,t,n[i]);return t},t.InvertedIndex.prototype.toJSON=function(){return{root:this.root}},t.Configuration=function(e,n){var e=e||"";if(void 0==n||null==n)throw new Error("fields should not be null");this.config={};var i;try{i=JSON.parse(e),this.buildUserConfig(i,n)}catch(o){t.utils.warn("user configuration parse failed, will use default configuration"),this.buildDefaultConfig(n)}},t.Configuration.prototype.buildDefaultConfig=function(e){this.reset(),e.forEach(function(e){this.config[e]={boost:1,bool:"OR",expand:!1}},this)},t.Configuration.prototype.buildUserConfig=function(e,n){var i="OR",o=!1;if(this.reset(),"bool"in e&&(i=e.bool||i),"expand"in e&&(o=e.expand||o),"fields"in e)for(var r in e.fields)if(n.indexOf(r)>-1){var s=e.fields[r],u=o;void 0!=s.expand&&(u=s.expand),this.config[r]={boost:s.boost||0===s.boost?s.boost:1,bool:s.bool||i,expand:u}}else t.utils.warn("field name in user configuration not found in index instance fields");else this.addAllFields2UserConfig(i,o,n)},t.Configuration.prototype.addAllFields2UserConfig=function(e,t,n){n.forEach(function(n){this.config[n]={boost:1,bool:e,expand:t}},this)},t.Configuration.prototype.get=function(){return this.config},t.Configuration.prototype.reset=function(){this.config={}},lunr.SortedSet=function(){this.length=0,this.elements=[]},lunr.SortedSet.load=function(e){var t=new this;return t.elements=e,t.length=e.length,t},lunr.SortedSet.prototype.add=function(){var e,t;for(e=0;e<arguments.length;e++)t=arguments[e],~this.indexOf(t)||this.elements.splice(this.locationFor(t),0,t);this.length=this.elements.length},lunr.SortedSet.prototype.toArray=function(){return this.elements.slice()},lunr.SortedSet.prototype.map=function(e,t){return this.elements.map(e,t)},lunr.SortedSet.prototype.forEach=function(e,t){return this.elements.forEach(e,t)},lunr.SortedSet.prototype.indexOf=function(e){for(var t=0,n=this.elements.length,i=n-t,o=t+Math.floor(i/2),r=this.elements[o];i>1;){if(r===e)return o;e>r&&(t=o),r>e&&(n=o),i=n-t,o=t+Math.floor(i/2),r=this.elements[o]}return r===e?o:-1},lunr.SortedSet.prototype.locationFor=function(e){for(var t=0,n=this.elements.length,i=n-t,o=t+Math.floor(i/2),r=this.elements[o];i>1;)e>r&&(t=o),r>e&&(n=o),i=n-t,o=t+Math.floor(i/2),r=this.elements[o];return r>e?o:e>r?o+1:void 0},lunr.SortedSet.prototype.intersect=function(e){for(var t=new lunr.SortedSet,n=0,i=0,o=this.length,r=e.length,s=this.elements,u=e.elements;;){if(n>o-1||i>r-1)break;s[n]!==u[i]?s[n]<u[i]?n++:s[n]>u[i]&&i++:(t.add(s[n]),n++,i++)}return t},lunr.SortedSet.prototype.clone=function(){var e=new lunr.SortedSet;return e.elements=this.toArray(),e.length=e.elements.length,e},lunr.SortedSet.prototype.union=function(e){var t,n,i;this.length>=e.length?(t=this,n=e):(t=e,n=this),i=t.clone();for(var o=0,r=n.toArray();o<r.length;o++)i.add(r[o]);return i},lunr.SortedSet.prototype.toJSON=function(){return this.toArray()},function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.elasticlunr=t()}(this,function(){return t})}();</script>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let searchIndex, searchErr;

    async function initialize() {
        let docs;
        try {
            let resp = await fetch("../search.json");
            docs = await resp.json();
        } catch (e) {
            searchErr = "Cannot fetch search index.";
            throw e;
        }

        // Also split on html tags. this is a cheap heuristic, but good enough.
        elasticlunr.tokenizer.setSeperator(/[\s\-.;&]+|<[^>]*>/);

        if (docs._isPrebuiltIndex) {
            console.info("using precompiled search index");
            searchIndex = elasticlunr.Index.load(docs);
        } else {
            console.time("building search index");
            searchIndex = elasticlunr(function () {
                this.addField('qualname');
                this.addField('fullname');
                this.addField('doc');
                this.setRef('fullname');
            });
            for (let doc of docs) {
                searchIndex.addDoc(doc);
            }
            console.timeEnd("building search index");
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const search = getSearchTerm();
            if (!search) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!searchIndex) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = searchIndex.search(search, {
                fields: {
                    qualname: {boost: 4},
                    fullname: {boost: 2},
                    doc: {boost: 1},
                },
                expand: true
            });

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(search)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(search)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.type) {
                    case "function":
                        heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span><span class="signature">(${doc.parameters.join(", ")})</span>`;
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.type}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>